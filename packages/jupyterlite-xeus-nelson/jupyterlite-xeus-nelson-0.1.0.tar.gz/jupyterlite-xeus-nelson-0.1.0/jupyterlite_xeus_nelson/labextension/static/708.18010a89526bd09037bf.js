"use strict";(self.webpackChunk_jupyterlite_xeus_nelson_kernel=self.webpackChunk_jupyterlite_xeus_nelson_kernel||[]).push([[708],{708:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var n=t(267),i=t(687),r=t(635),a=t(684),o=t(840),l=t(526),d=t(671);class p{constructor(e){this._isDisposed=!1,this._disposed=new o.Signal(this),this._executeDelegate=new l.PromiseDelegate,this._parentHeader=void 0,this._parent=void 0;const{id:s,name:n,sendMessage:i,location:r}=e;this._id=s,this._name=n,this._location=r,this._sendMessage=i,this._worker=new Worker(new URL(t.p+t.u(213),t.b),{type:void 0}),this._worker.onmessage=e=>{this._processWorkerMessage(e.data)},this._remote=(0,a.wrap)(this._worker),this.initFileSystem(e)}async handleMessage(e){this._parent=e,this._parentHeader=e.header,await this._sendMessageToWorker(e)}async _sendMessageToWorker(e){if("input_reply"!==e.header.msg_type&&(this._executeDelegate=new l.PromiseDelegate),await this._remote.processMessage({msg:e,parent:this.parent}),"input_reply"!==e.header.msg_type)return await this._executeDelegate.promise}get parentHeader(){return this._parentHeader}get parent(){return this._parent}get location(){return this._location}_processWorkerMessage(e){var s,t,n,i;e.header&&(e.header.session=null!==(t=null===(s=this._parentHeader)||void 0===s?void 0:s.session)&&void 0!==t?t:"",e.session=null!==(i=null===(n=this._parentHeader)||void 0===n?void 0:n.session)&&void 0!==i?i:"",this._sendMessage(e),"status"===e.header.msg_type&&"idle"===e.content.execution_state&&this._executeDelegate.resolve())}get ready(){return Promise.resolve()}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}dispose(){this.isDisposed||(this._worker.terminate(),this._worker=null,this._remote=null,this._isDisposed=!0,this._disposed.emit(void 0))}get id(){return this._id}get name(){return this._name}async initFileSystem(e){let s,t;if(e.location.includes(":")){const n=e.location.split(":");s=n[0],t=n[1]}else s="",t=e.location;await this._remote.ready(),e.mountDrive&&(await this._remote.mount(s,"/drive",d.PageConfig.getBaseUrl()),await this._remote.cd(t))}}const _=t.p+"69da0ac9a09126e3c01831219b74572f3b76533e342c72f8afa9fd8f01dcc8e8.png",h=t.p+"553002d543a9199df1e32348f99812205fb446205bd319f902ff7f8a27525f28.png",u=[{id:"@jupyterlite/xeus-nelson-kernel-extension:kernel",autoStart:!0,requires:[r.IKernelSpecs],optional:[n.IServiceWorkerManager,i.IBroadcastChannelWrapper],activate:(e,s,t,n)=>{s.register({spec:{name:"Nelson",display_name:"Nelson",language:"nelson",argv:[],spec:{argv:[],env:{},display_name:"Nelson",language:"nelson",interrupt_mode:"message",metadata:{}},resources:{"logo-32x32":_,"logo-64x64":h}},create:async e=>{const s=!(!(null==t?void 0:t.enabled)||!(null==n?void 0:n.enabled));return s?console.info("xeus-nelson contents will be synced with Jupyter Contents"):console.warn("xeus-nelson contents will NOT be synced with Jupyter Contents"),new p({...e,mountDrive:s})}})}}]}}]);