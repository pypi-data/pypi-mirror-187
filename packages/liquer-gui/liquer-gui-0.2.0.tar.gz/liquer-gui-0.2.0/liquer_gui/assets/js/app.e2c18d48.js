(function(t){function e(e){for(var i,r,o=e[0],l=e[1],d=e[2],c=0,h=[];c<o.length;c++)r=o[c],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(h.length)h.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={app:0},s=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},5406:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list-item",{on:{click:function(e){t.drawer=!t.drawer}}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-h6"},[t._v(" LiQuer ")])],1)],1),a("v-divider"),a("v-list",{attrs:{dense:"",nav:""}},[a("v-list-item",{attrs:{link:"",href:"#-i-mode/content"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-eye")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Content")])],1)],1),a("v-list-item",{attrs:{link:"",href:"#-i-mode/store"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-folder")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Store")])],1)],1),a("v-list-item",{attrs:{link:"",href:"#-i-mode/commands"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-view-list")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Commands")])],1)],1),a("v-list-item",{attrs:{link:"",href:"#-i-mode/clean"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-delete")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Clean")])],1)],1),a("v-divider"),a("v-list-item",{attrs:{link:"",href:"https://github.com/orest-d/liquer"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-home")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" LiQuer Home ")])],1)],1)],1)],1),a("v-app-bar",{attrs:{app:"",dense:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),a("v-toolbar-title",[t._v("LiQuer")]),a("v-spacer"),t.can_edit?a("v-btn",{attrs:{href:"#-i-mode/edit"}},[t._v("Edit")]):t._e(),"content"==t.mode?a("v-btn",{attrs:{href:"#-i-mode/metadata"}},[t._v("Metadata")]):t._e(),"metadata"==t.mode?a("v-btn",{attrs:{href:"#-i-mode/content"}},[t._v("Content")]):t._e()],1),a("v-main",["store"==t.mode?a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.updir()}}},[a("v-icon",[t._v("mdi-arrow-up-thin-circle-outline")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.sync()}}},[a("v-icon",[t._v("mdi-sync")])],1)],1),a("v-col",{attrs:{cols:"10"}},[t._v(t._s(t.dirkey))]),a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.make_dir()}}},[a("v-icon",[t._v("mdi-play-box-outline")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.clean_dir()}}},[a("v-icon",[t._v("mdi-delete")])],1)],1)],1)],1):t._e(),"clean"==t.mode?a("Clean",{on:{"message-event":function(e){return t.message_event(e)}}}):t._e(),"store"==t.mode?a("DirView",{attrs:{dirkey:t.dirkey,tick:t.tick},on:{"message-event":function(e){return t.message_event(e)},"open-event":function(e){return t.open_event(e)}}}):t._e(),"content"==t.mode?a("Content",{attrs:{metadata:t.metadata},on:{"message-event":function(e){return t.message_event(e)}}}):t._e(),"metadata"==t.mode?a("MetadataView",{attrs:{metadata:t.metadata},on:{"message-event":function(e){return t.message_event(e)}}}):t._e(),"commands"==t.mode?a("Commands",{attrs:{liquer_url:t.liquer_url},on:{"message-event":function(e){return t.message_event(e)}}}):t._e(),t.show_plain_text_editor?a("PlainTextStoreEditor",{attrs:{metadata:t.metadata},on:{"message-event":function(e){return t.message_event(e)}}}):t._e(),t.show_highlighting_text_editor?a("HighlightingTextStoreEditor",{attrs:{metadata:t.metadata},on:{"message-event":function(e){return t.message_event(e)}}}):t._e()],1),a("StatusBar",{attrs:{status:t.status,message:t.message}})],1)},s=[],r=(a("2ca0"),a("a15b"),a("fb6a"),a("ac1f"),a("1276"),a("4de4"),a("d3b7"),a("5319"),a("8a79"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",{attrs:{padless:"",app:""}},[a("v-col",{staticStyle:{padding:"1px"},attrs:{cols:"1"}},["OK"==t.status?a("v-chip",{attrs:{label:"",color:"gray",dark:""}},[t._v(" "+t._s(t.status)+" ")]):t._e(),"ERROR"==t.status?a("v-chip",{attrs:{label:"",color:"red",dark:""}},[t._v(" "+t._s(t.status)+" ")]):t._e()],1),a("v-col",{staticStyle:{padding:"1px"},attrs:{cols:"11"}},[a("span",[t._v(t._s(t.message))])])],1)}),o=[],l={props:["status","message"],data:function(){return{drawer:null}}},d=l,u=a("2877"),c=a("6544"),h=a.n(c),m=a("cc20"),_=a("62ad"),v=a("553a"),f=Object(u["a"])(d,r,o,!1,null,null,null),p=f.exports;h()(f,{VChip:m["a"],VCol:_["a"],VFooter:v["a"]});var g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return null!=t.commands?a("v-card",[a("v-card-title",[t._v(" List of commands "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.commands_headers,items:t.commands_rows,search:t.search},scopedSlots:t._u([{key:"item.name",fn:function(e){var i=e.item;return[a("a",{attrs:{href:"#-i-q/ns-meta/help-"+i.name+"-"+i.ns}},[t._v(t._s(i.name))])]}},{key:"item.example_link",fn:function(e){var i=e.item;return[i.example_link?a("a",{attrs:{href:"#"+i.example_link}},[t._v(t._s(i.example_link))]):t._e()]}},{key:"item.doc",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.doc.split("\n")[0])+" ")]}}],null,!1,2909849687)})],1):t._e()},y=[],b={props:{liquer_url:{type:String,default:"/liquer"}},data:function(){return{commands:[],search:""}},methods:{info:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"INFO",message:t,reason:e,query:a})},error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"ERROR",message:t,reason:e,query:a})},message_event:function(t){this.$emit("message-event",t)}},computed:{commands_headers:function(){return[{text:"Namespace",value:"ns"},{text:"Command",value:"name"},{text:"Description",value:"doc"},{text:"Example",value:"example_link"}]},commands_rows:function(){return null==this.commands?[]:this.commands}},created:function(){this.info("Hello from commands"),this.$http.get(this.liquer_url+"/q/ns-meta/flat_commands/commands.json").then(function(t){t.json().then(function(t){this.commands=t,this.info("Commands loaded.")}.bind(this),function(t){this.error("Json error (commands)",t)}.bind(this))}.bind(this),function(t){this.error("Data loading error",t)}.bind(this))}},k=b,x=a("b0af"),q=a("99d9"),w=a("8fea"),V=a("2fa4"),R=a("8654"),C=Object(u["a"])(k,g,y,!1,null,null,null),O=C.exports;h()(C,{VCard:x["a"],VCardTitle:q["b"],VDataTable:w["a"],VSpacer:V["a"],VTextField:R["a"]});var S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},["none"==t.mode||"waiting"==t.mode?a("v-row",[a("v-col",{attrs:{cols:"8"}},["none"==t.mode?a("h4",[t._v("No metadata")]):t._e(),"waiting"==t.mode?a("h4",[t._v("Waiting for "+t._s(t.metadata.query))]):t._e()]),a("v-col",{attrs:{cols:"4"}},[a("v-progress-circular",{attrs:{size:50,width:10,color:"primary",indeterminate:""}})],1)],1):t._e(),"none"==t.mode?a("v-row",[a("v-col",[a("MetadataView",{attrs:{metadata:t.metadata},on:{"message-event":function(e){return t.message_event(e)}}})],1)],1):t._e(),"recipe"==t.mode?a("v-row",[a("v-col",[a("MetadataView",{attrs:{metadata:t.metadata},on:{"message-event":function(e){return t.message_event(e)}}})],1)],1):t._e(),"waiting"==t.mode?a("v-row",[a("v-col",[a("MetadataView",{attrs:{metadata:t.metadata},on:{"message-event":function(e){return t.message_event(e)}}})],1)],1):t._e(),"error"==t.mode?a("v-row",[a("v-col",[t._v(" Query "+t._s(t.metadata.query)+" failed. "),a("p",[t._v(t._s(t.metadata.message))]),a("MetadataView",{attrs:{metadata:t.metadata},on:{"message-event":function(e){return t.message_event(e)}}})],1)],1):t._e(),"invalid"==t.mode?a("v-row",[a("v-col",[t._v(" Invalid metadata ")])],1):t._e(),"text"==t.mode?a("div",[a("pre",[t._v(t._s(t.data))])]):t._e(),"link"==t.mode?a("div",[a("h3",[t._v(t._s(t.title))]),a("em",[t._v(t._s(t.data_description))]),a("br"),a("pre",[t._v(t._s(t.description))]),t._v(" Content: "),a("a",{attrs:{href:t.external_link}},[a("v-icon",[t._v("mdi-link")]),t._v(t._s(t.external_link_description))],1)]):t._e(),"iframe"==t.mode?a("div",{staticStyle:{width:"100%",height:"100%"}},[a("iframe",{staticStyle:{"background-color":"white"},attrs:{width:"100%",height:"100%",src:t.external_link,frameBorder:"0"}})]):t._e(),"image"==t.mode?a("div",[a("img",{staticStyle:{width:"100%",height:"100%","object-fit":"scale-down"},attrs:{src:t.external_link,"aspect-ratio":"1"}})]):t._e(),"dataframe"==t.mode?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[t._v("Pandas version: "+t._s(t.data.schema.pandas_version)+" "),a("v-btn",{attrs:{href:t.pcv_query}},[t._v("PointCloud Viewer")])],1),null!=t.data?a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.dataframe_headers,items:t.dataframe_rows}})],1):t._e()],1):t._e()],1)},j=[],E=(a("a4d3"),a("e01a"),a("159b"),a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[t.has_metadata?t._e():a("v-card-title",[t._v(" No Metadata "+t._s(t.query)+" "),a("v-spacer")],1),t.has_metadata?a("v-card-title",[a("ResultStatus",{attrs:{status:t.metadata.status}}),t._v(" "+t._s(t.query)+" ")],1):t._e(),t.has_metadata?a("v-expansion-panels",{attrs:{multiple:""},model:{value:t.panel,callback:function(e){t.panel=e},expression:"panel"}},[a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("Description")]),a("v-expansion-panel-content",[a("h3",[t._v(t._s(t.title))]),a("em",[t._v(t._s(t.data_description))]),a("br"),a("pre",[t._v(t._s(t.description))])])],1),a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("Progress")]),a("v-expansion-panel-content",[a("div",{domProps:{innerHTML:t._s(t.metadata.html_preview)}}),a("div",[t._v(t._s(t.metadata.message))]),t._l(t.metadata.progress_indicators,(function(t,e){return a("ProgressIndicator",{key:e,attrs:{item:t,color:"primary"}})})),t._l(t.metadata.child_progress_indicators,(function(t,e){return a("ProgressIndicator",{key:e,attrs:{item:t,color:"secondary"}})}))],2)],1),a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("Logs")]),a("v-expansion-panel-content",[a("h3",[t._v("Log")]),a("v-container",{attrs:{fluid:""}},t._l(t.metadata.log,(function(t,e){return a("LogEntry",{key:e,attrs:{item:t}})})),1),a("h3",[t._v("Child Log")]),a("v-container",{attrs:{fluid:""}},t._l(t.metadata.child_log,(function(t,e){return a("LogEntry",{key:e,attrs:{item:t}})})),1)],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("Info")]),a("v-expansion-panel-content",[a("h3",[t._v("Basic data")]),a("v-simple-table",[a("tbody",[a("tr",[a("td",[t._v("Query")]),a("td",[a("a",{attrs:{href:"#-i-qm/"+t.query}},[t._v(t._s(t.query))])])]),a("tr",[a("td",[t._v("Key")]),a("td",[t._v(t._s(t.key))])]),a("tr",[a("td",[t._v("Parent query")]),a("td",[a("a",{attrs:{href:"#-i-qm/"+t.metadata.parent_query}},[t._v(t._s(t.metadata.parent_query))])])]),a("tr",[a("td",[t._v("Type identifier")]),a("td",[t._v(t._s(t.metadata.type_identifier))])]),a("tr",[a("td",[t._v("MIME type")]),a("td",[t._v(t._s(t.metadata.mimetype))])]),a("tr",[a("td",[t._v("Started")]),a("td",[t._v(t._s(t.metadata.started))])]),a("tr",[a("td",[t._v("Updated")]),a("td",[t._v(t._s(t.metadata.updated))])]),a("tr",[a("td",[t._v("Created")]),a("td",[t._v(t._s(t.metadata.created))])])])]),a("h3",[t._v("File Info")]),a("v-simple-table",[a("tbody",[a("tr",[a("td",[t._v("Name")]),a("td",[t._v(t._s(t.fileinfo.name))])]),a("tr",[a("td",[t._v("Extension")]),a("td",[t._v(t._s(t.metadata.extension))])]),a("tr",[a("td",[t._v("File-system path")]),a("td",[t._v(t._s(t.fileinfo.filesystem_path))])]),a("tr",[a("td",[t._v("MD5 checksum")]),a("td",[t._v(t._s(t.fileinfo.md5))])])])]),a("h3",[t._v("Recipe")]),a("v-simple-table",[a("tbody",[a("tr",[a("th",{attrs:{colspan:"2"}},[t._v("Recipe")])]),a("tr",[a("td",[t._v("Has recipe")]),a("td",[t._v(t._s(t.metadata.has_recipe))])]),a("tr",[a("td",[t._v("Recipes key")]),a("td",[a("a",{attrs:{href:"#-i-k/"+t.metadata.recipes_key}},[t._v(t._s(t.metadata.recipes_key))])])]),a("tr",[a("td",[t._v("Recipe name")]),a("td",[t._v(t._s(t.metadata.recipe_name))])]),a("tr",[a("td",[t._v("Recipes directory")]),a("td",[t._v(t._s(t.metadata.recipes_directory))])]),a("tr",[a("td",[t._v("Is side-effect")]),a("td",[t._v(t._s(t.metadata.side_effect))])])])])],1)],1)],1):t._e()],1)}),$=[],N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show_status?a("v-chip",{staticClass:"ma-2",attrs:{color:t.color,dark:"",outlined:""}},[a("v-icon",{attrs:{left:""}},[t._v(t._s(t.icon))]),t._v(t._s(t.status)+" ")],1):t._e()},F=[],M={props:["status"],data:function(){return{table:{none:{color:"gray",icon:"mdi-help-circle"},submitted:{color:"blue",icon:"mdi-clock-outline"},parent:{color:"yellow",icon:"mdi-pinwheel-outline"},evaluation:{color:"yellow",icon:"mdi-pinwheel"},dependencies:{color:"yellow",icon:"mdi-pinwheel-outline"},ready:{color:"green",icon:"mdi-check-circle"},error:{color:"red",icon:"mdi-alert-circle"},expired:{color:"gray",icon:"mdi-check"},recipe:{color:"blue",icon:"mdi-link"},external:{color:"light-green",icon:"mdi-check-decagram"},"side-effect":{color:"green",icon:"mdi-check-circle"}}}},computed:{show_status:function(){try{return this.table[this.status].color,!0}catch(t){return!1}},color:function(){try{return this.table[this.status].color}catch(t){return this.table["none"].color}},icon:function(){try{return this.table[this.status].icon}catch(t){return this.table["none"].icon}}}},P=M,I=a("132d"),L=Object(u["a"])(P,N,F,!1,null,null,null),T=L.exports;h()(L,{VChip:m["a"],VIcon:I["a"]});var U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[null!=t.item.total_steps?a("v-progress-linear",{attrs:{color:t.color,height:"25"},model:{value:t.percentage,callback:function(e){t.percentage=e},expression:"percentage"}},[a("span",[t._v(t._s(t.item.message))])]):t._e(),null==t.item.total_steps?a("v-progress-circular",{attrs:{indeterminate:"",color:t.color}}):t._e(),null==t.item.total_steps?a("span",[t._v(t._s(t.item.message))]):t._e()],1)},D=[],J={props:["item","color"],data:function(){return{}},computed:{percentage:function(){return 100*this.item.step/this.item.total_steps}}},B=J,K=a("490a"),Q=a("8e36"),W=Object(u["a"])(B,U,D,!1,null,null,null),A=W.exports;h()(W,{VProgressCircular:K["a"],VProgressLinear:Q["a"]});var H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{attrs:{cols:"1"}},[a("v-chip",{staticClass:"ma-2",attrs:{color:t.color,dark:"",label:"",outlined:""}},[a("v-icon",{attrs:{left:""}},[t._v(t._s(t.icon))]),t._v(t._s(t.item.kind)+" ")],1)],1),a("v-col",{attrs:{cols:"3"}},[a("span",{staticClass:"text-caption"},[t._v(t._s(t.item.timestamp))]),t.has_origin?a("p",[a("a",{staticClass:"text-caption",attrs:{href:t.origin_href}},[t._v(t._s(t.item.origin))])]):t._e()]),a("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.item.message)+" "),t.has_traceback?a("p",[a("pre",[t._v(t._s(t.item.traceback))])]):t._e()])],1)},z=[],G={props:["item"],data:function(){return{table:{none:{color:"gray",icon:"mdi-help-circle"},error:{color:"red",icon:"mdi-alert-circle"},warning:{color:"orange",icon:"mdi-alert"},info:{color:"green",icon:"mdi-information"},debug:{color:"blue",icon:"mdi-bug"}}}},computed:{color:function(){try{return this.table[this.item.kind].color}catch(t){return this.table["none"].color}},icon:function(){try{return this.table[this.item.kind].icon}catch(t){return this.table["none"].icon}},origin_href:function(){try{return void 0!=this.item.origin&&null!=this.item.origin&&""!=this.item.origin?"#-i-qm/"+this.item.origin:"#-i-mode/metadata"}catch(t){return"#-i-mode/metadata"}},has_origin:function(){try{return void 0!=this.item.origin&&null!=this.item.origin&&""!=this.item.origin}catch(t){return!1}},has_traceback:function(){try{return void 0!=this.item.traceback&&null!=this.item.traceback&&""!=this.item.traceback}catch(t){return!1}}}},Y=G,X=a("0fd9"),Z=Object(u["a"])(Y,H,z,!1,null,null,null),tt=Z.exports;h()(Z,{VChip:m["a"],VCol:_["a"],VIcon:I["a"],VRow:X["a"]});var et={components:{ResultStatus:T,ProgressIndicator:A,LogEntry:tt},props:{liquer_url:{type:String,default:"/liquer"},metadata:{default:null}},data:function(){return{panel:[0,1]}},methods:{info:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"INFO",message:t,reason:e,query:a})},error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"ERROR",message:t,reason:e,query:a})},message_event:function(t){this.$emit("message-event",t)},update:function(){}},computed:{has_metadata:function(){try{return"status"in this.metadata||"query"in this.metadata}catch(t){return!1}},query:function(){try{return this.metadata.query}catch(t){return"-na-"}},title:function(){try{return this.metadata.title}catch(t){return""}},description:function(){try{return this.metadata.description}catch(t){return""}},key:function(){try{return this.metadata.key}catch(t){return""}},fileinfo:function(){console.log("Get fileinfo");try{var t=this.metadata.fileinfo;return void 0==t||null==t?(console.log("fileinfo undefined"),{}):(console.log("fileinfo OK"),t)}catch(e){return console.log("fileinfo error"),{}}},data_description:function(){try{return this.metadata.data_characteristics.description}catch(t){return""}}},watch:{metadata:function(){this.update()}},created:function(){}},at=et,it=a("a523"),nt=a("cd55"),st=a("49e2"),rt=a("c865"),ot=a("0393"),lt=a("1f4f"),dt=Object(u["a"])(at,E,$,!1,null,null,null),ut=dt.exports;h()(dt,{VCard:x["a"],VCardTitle:q["b"],VContainer:it["a"],VExpansionPanel:nt["a"],VExpansionPanelContent:st["a"],VExpansionPanelHeader:rt["a"],VExpansionPanels:ot["a"],VSimpleTable:lt["a"],VSpacer:V["a"]});var ct={components:{MetadataView:ut},props:{liquer_url:{type:String,default:"/liquer"},data:{default:null},metadata:{default:null}},data:function(){return{mode:"none",data_ready:!1,url_query_prefix:"/liquer/q/",url_store_data_prefix:"/liquer/api/store/data/"}},methods:{info:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"INFO",message:t,reason:e,query:a})},error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"ERROR",message:t,reason:e,query:a})},message_event:function(t){this.$emit("message-event",t)},update:function(){if(null==this.metadata&&(this.mode="none"),null==this.metadata.status&&(this.mode="invalid"),"error"==this.metadata.status&&(this.mode="error"),"recipe"==this.metadata.status&&(this.mode="recipe"),"evaluation"!=this.metadata.status&&"parent"!=this.metadata.status&&"dependencies"!=this.metadata.status&&"submitted"!=this.metadata.status||(this.mode="waiting"),"ready"==this.metadata.status||"external"==this.metadata.status||"expired"==this.metadata.status||"side-effect"==this.metadata.status){console.log("READY"),console.log("Query",this.metadata.query),console.log("Type",this.metadata.type_identifier),console.log("Metadata",this.metadata);var t={generic:function(){this.just_load("text")},text:function(){"text/html"==this.metadata.mimetype?this.mode="iframe":this.metadata.mimetype.startsWith("image/")?this.mode="image":this.just_load("text")},dataframe:function(){this.just_load_json("dataframe",this.dataframe_head_query)},matplotlibfigure:function(){this.mode="image"}};try{t[this.metadata.type_identifier].bind(this)()}catch(e){this.metadata.mimetype.startsWith("text/")?this.mode="iframe":this.metadata.mimetype.startsWith("image/")?this.mode="image":(this.metadata.type_identifier in t?this.error("Error dispatching content"):(this.info("Undefined data type: "+this.metadata.type_identifier),this.mode="link"),console.log(e.stack))}}return"waiting"},just_load:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("Just load",t,e);var a=null;null==e?""!=this.key?(console.log("Using key",this.key),a=this.url_store_data_prefix+this.key):void 0==this.metadata.query||null==this.metadata.query?this.error("Neither key nor query in metadata"):(console.log("Using query",this.metadata.query),a=this.url_query_prefix+this.metadata.query):(console.log("Using passed query",e),a=this.url_query_prefix+e),console.log("URL",a),this.$http.get(a).then(function(e){this.data=e.body,this.mode=t}.bind(this),function(t){this.error("Failed loading data",t,e)}.bind(this))},just_load_json:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("Just load json",t,e);var a=null;null==e?""!=this.key?(console.log("Using key",this.key),a=this.url_store_data_prefix+this.key):void 0==this.metadata.query||null==this.metadata.query?this.error("Neither key nor query in metadata"):(console.log("Using query",this.metadata.query),a=this.url_query_prefix+this.metadata.query):(console.log("Using passed query",e),a=this.url_query_prefix+e),console.log("URL",a),this.$http.get(a).then(function(e){e.json().then(function(e){this.data=e,this.info("Data loaded."),console.log("Mode:",t),this.mode=t}.bind(this),function(t){this.error("Json error (data)",t)}.bind(this))}.bind(this),function(t){this.error("Failed loading data",t,e)}.bind(this))}},watch:{metadata:function(){console.log("Metadata updated in content"),this.update()}},created:function(){console.log("Content created"),this.update()},computed:{title:function(){try{return this.metadata.title}catch(t){return""}},description:function(){try{return this.metadata.description}catch(t){return""}},key:function(){try{return this.metadata.key}catch(t){return""}},data_description:function(){try{return this.metadata.data_characteristics.description}catch(t){return""}},pcv_query:function(){return"string"==typeof this.metadata.key?"#-i-q/-R/"+this.metadata.key+"/-/dr/pointcloud-viewer.html":"#-i-q/"+this.metadata.query+"/pointcloud-viewer.html"},external_link:function(){return"string"==typeof this.metadata.key?this.url_store_data_prefix+this.metadata.key:this.url_query_prefix+this.metadata.query},dataframe_head_query:function(){return"string"==typeof this.metadata.key?"-R/"+this.metadata.key+"/-/dr/head_df-1000/data.json":this.metadata.query+"/head_df-1000/data.json"},external_link_description:function(){return"string"==typeof this.metadata.key?this.metadata.key+" (key)":this.metadata.query+" (query)"},dataframe_headers:function(){if(null==this.data)return[];var t=[];return this.data.schema.fields.forEach((function(e){t.push({text:e.name,value:e.name})})),console.log(t),t},dataframe_rows:function(){return null==this.data?[]:(console.log("rows",this.data.data),this.data.data)}}},ht=ct,mt=a("8336"),_t=a("0e8f"),vt=a("a722"),ft=Object(u["a"])(ht,S,j,!1,null,null,null),pt=ft.exports;h()(ft,{VBtn:mt["a"],VCol:_["a"],VContainer:it["a"],VDataTable:w["a"],VFlex:_t["a"],VIcon:I["a"],VLayout:vt["a"],VProgressCircular:K["a"],VRow:X["a"]});var gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.dir_status},scopedSlots:t._u([{key:"item.icon",fn:function(e){var i=e.item;return[a("v-icon",{domProps:{textContent:t._s(i.icon)}})]}},{key:"item.status",fn:function(e){var i=e.item;return[i.is_dir?t._e():a("ResultStatus",{attrs:{status:i.status}})]}},{key:"item.name",fn:function(e){var i=e.item;return[a("span",{on:{click:function(e){return t.open_item(i)}}},[t._v(t._s(i.name))])]}},{key:"item.control",fn:function(e){var i=e.item;return[a("v-btn",{attrs:{href:"#-i-km/"+i.key,icon:""}},[a("v-icon",[t._v("mdi-information")])],1),t.can_rerun(i)?a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.remove_key(i.key)}}},[a("v-icon",[t._v("mdi-delete")])],1):t._e()]}}])})},yt=[],bt={components:{ResultStatus:T},props:{liquer_url:{type:String,default:"/liquer"},dirkey:{type:String,default:""},tick:{default:0}},data:function(){return{url_query_prefix:"/liquer/q/",url_submit_prefix:"/liquer/submit/",url_remove_prefix:"/liquer/api/store/remove/",dir_status:[],headers:[{text:"",align:"start",sortable:!0,value:"icon",width:"32px"},{text:"Status",value:"status",width:"50px"},{text:"Name",value:"name"},{text:"Characteristics",value:"data_characteristics"},{text:"Message",value:"message"},{text:"Title",value:"title"},{text:"Updated",value:"updated"},{text:"Size",value:"size"},{text:"",value:"control",sortable:!1}]}},methods:{info:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"INFO",message:t,reason:e,query:a})},error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"ERROR",message:t,reason:e,query:a})},message_event:function(t){this.$emit("message-event",t)},icon:function(t){return t.is_dir?"mdi-folder":"mdi-file"},can_rerun:function(t){return t.has_recipe&&"recipe"!=t.status},open_item:function(t){this.$emit("open-event",t)},updir:function(){this.open_item({key:this.dirkey.split("/").slice(0,-1).join("/"),is_dir:!0})},remove_key:function(t){this.info("Remove "+t);var e="";""!=t?(e=this.url_remove_prefix+t,console.log("Remove query",e),this.$http.get(e).then(function(a){a.json().then(function(e){"OK"==e.status?(this.info("Removed "+t),this.fetch_dir_status(this.dirkey)):(this.error(e.message),this.fetch_dir_status(this.dirkey))}.bind(this),function(a){this.error("JSON error while removing "+t,a,e),this.fetch_dir_status(this.dirkey)}.bind(this))}.bind(this),function(a){this.error("Failed to remove "+t,a,e),this.fetch_dir_status(this.dirkey)}.bind(this))):console.log("Attempt to remove",t)},fetch_dir_status:function(t){this.info("Fetching dir info "+t);var e="";e=""==t?this.url_query_prefix+"ns-meta/dir_status/status.json":this.url_query_prefix+"-R-meta/"+t+"/-/ns-meta/dir_status/status.json",console.log("Fetching dir info from query",e),this.dir_status=[],this.$http.get(e).then(function(t){t.json().then(function(t){if("OK"==t.status){this.dir_status=t.data;for(var e=0;e<this.dir_status.length;e++)this.dir_status[e].icon=this.icon(this.dir_status[e]);this.info("Dir info loaded")}else this.error(t.message)}.bind(this),function(t){this.error("JSON error while fetching dir info",t,e)}.bind(this))}.bind(this),function(t){this.error("Failed loading dir info",t,e)}.bind(this))}},watch:{dirkey:function(t,e){t!=e&&this.fetch_dir_status(t)},tick:function(){this.fetch_dir_status(this.dirkey)}},created:function(){this.fetch_dir_status(this.dirkey)}},kt=bt,xt=Object(u["a"])(kt,gt,yt,!1,null,null,null),qt=xt.exports;h()(xt,{VBtn:mt["a"],VDataTable:w["a"],VIcon:I["a"]});var wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-card",[a("v-card-title",[t._v("Clean")]),a("v-card-content",[a("v-form",[a("v-checkbox",{attrs:{label:"Errors"},model:{value:t.errors,callback:function(e){t.errors=e},expression:"errors"}}),a("v-checkbox",{attrs:{label:"Expired store items"},model:{value:t.expired,callback:function(e){t.expired=e},expression:"expired"}}),a("v-checkbox",{attrs:{label:"Evaluated/unfinished items"},model:{value:t.evaluation,callback:function(e){t.evaluation=e},expression:"evaluation"}}),a("v-checkbox",{attrs:{label:"Finished items with recipes"},model:{value:t.recipes,callback:function(e){t.recipes=e},expression:"recipes"}}),a("v-checkbox",{attrs:{label:"Cache"},model:{value:t.cache,callback:function(e){t.cache=e},expression:"cache"}})],1),a("v-sheet",{staticClass:"ma-4",attrs:{elevation:"3",rounded:""}},[a("p",[a("b",[t._v(t._s(t.result.status))]),t._v("  "+t._s(t.result.message)+" ")]),a("p",[a("b",[t._v(t._s(t.cache_clean_result.status))]),t._v("  "+t._s(t.cache_clean_result.message)+" ")])])],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.clean()}}},[t._v("Clean")])],1)],1)],1)},Vt=[],Rt={props:[],data:function(){return{errors:!0,expired:!1,evaluation:!0,recipes:!1,cache:!1,result:{status:"",message:""},cache_clean_result:{status:"",message:""},url_query_prefix:"/liquer/q/",url_clean_cache:"/liquer/api/cache/clean"}},methods:{info:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"INFO",message:t,reason:e,query:a})},error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"ERROR",message:t,reason:e,query:a})},message_event:function(t){this.$emit("message-event",t)},clean:function(){console.log("Clean"),(this.errors||this.expired||this.evaluation||this.recipes)&&(console.log("Run clean "+this.clean_url),this.$http.get(this.clean_url).then(function(t){t.json().then(function(t){this.result=t,console.log("clean result: ",this.result)}.bind(this),function(t){this.error("JSON error while cleaning",t)}.bind(this))}.bind(this),function(t){this.error("Failed calling clean",t)}.bind(this))),this.cache&&(console.log("Run clean cache:"+this.url_clean_cache),this.$http.get(this.url_clean_cache).then(function(t){t.json().then(function(t){this.cache_clean_result=t,console.log("cache clean result: ",this.cache_clean_result)}.bind(this),function(t){this.error("JSON error while cleaning cache",t)}.bind(this))}.bind(this),function(t){this.error("Failed calling clean",t)}.bind(this)))}},computed:{clean_url:function(){var t=this.url_query_prefix+"ns-meta/root_key/clean";return t+=this.errors?"-t":"-f",t+=this.expired?"-t":"-f",t+=this.evaluation?"-t":"-f",t+=this.recipes?"-t":"-f",t+="-t/result.json",t}}},Ct=Rt,Ot=a("ac7c"),St=a("4bd4"),jt=a("8dd9"),Et=Object(u["a"])(Ct,wt,Vt,!1,null,null,null),$t=Et.exports;h()(Et,{VBtn:mt["a"],VCard:x["a"],VCardActions:q["a"],VCardTitle:q["b"],VCheckbox:Ot["a"],VContainer:it["a"],VForm:St["a"],VSheet:jt["a"]});var Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},["text"!=t.mode?a("v-row",[a("v-col",{attrs:{cols:"8"}},["none"==t.mode?a("h4",[t._v("No metadata")]):t._e(),"waiting"==t.mode?a("h4",[t._v("Waiting for "+t._s(t.metadata.query))]):t._e(),"invalid"==t.mode?a("h4",[t._v("Invalid status")]):t._e(),"error"==t.mode?a("h4",[t._v("Error in "+t._s(t.metadata.query))]):t._e(),"recipe"==t.mode?a("h4",[t._v("Recipe")]):t._e(),"unsupported"==t.mode?a("h4",[t._v("Unsupported data type")]):t._e()]),a("v-col",{attrs:{cols:"4"}},[a("v-progress-circular",{attrs:{size:50,width:10,color:"primary",indeterminate:""}})],1)],1):t._e(),"text"==t.mode?a("v-row",[a("v-col",[a("v-textarea",{attrs:{solo:"",rows:"20"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1)],1):t._e(),"text"==t.mode?a("v-row",[a("v-col",[a("v-btn",{on:{click:function(e){return t.save()}}},[t._v("Save")])],1)],1):t._e()],1)},Ft=[],Mt={components:{},props:{liquer_url:{type:String,default:"/liquer"},data:{default:null},metadata:{default:null}},data:function(){return{mode:"none",data_ready:!1,data:"",url_query_prefix:"/liquer/q/",url_store_data_prefix:"/liquer/api/store/data/"}},methods:{info:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"INFO",message:t,reason:e,query:a})},error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"ERROR",message:t,reason:e,query:a})},message_event:function(t){this.$emit("message-event",t)},update:function(){if(null==this.metadata&&(this.mode="none"),null==this.metadata.status&&(this.mode="invalid"),"error"==this.metadata.status&&(this.mode="error"),"recipe"==this.metadata.status&&(this.mode="recipe"),"evaluation"!=this.metadata.status&&"parent"!=this.metadata.status&&"dependencies"!=this.metadata.status&&"submitted"!=this.metadata.status||(this.mode="waiting"),"ready"==this.metadata.status||"external"==this.metadata.status||"expired"==this.metadata.status||"side-effect"==this.metadata.status){console.log("READY"),console.log("Query",this.metadata.query),console.log("Type",this.metadata.type_identifier),console.log("Metadata",this.metadata);var t={generic:function(){this.load("text")},text:function(){this.load("text")}};try{t[this.metadata.type_identifier].bind(this)()}catch(e){this.mode="unsupported"}}return"waiting"},load:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==e&&(e=this.metadata.key);var a=this.url_store_data_prefix+e;console.log("Load",e),console.log("URL",a),this.$http.get(a).then(function(e){this.data=e.body,this.mode=t}.bind(this),function(t){this.error("Failed loading data",t,e)}.bind(this))},save:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("Save"),null==t&&(t=this.metadata.key);var e=this.url_store_data_prefix+t;console.log("Save",t),console.log("URL",e),this.$http.post(e,this.data).then(function(t){t.json().then(function(t){console.log("save result: ",t)}.bind(this),function(t){this.error("JSON error while saving to store ",t)}.bind(this))}.bind(this),function(e){this.error("Failed saving data",e,t)}.bind(this))}},watch:{metadata:function(){console.log("Metadata updated in content"),this.update()}},created:function(){console.log("Plain text editor created"),this.update()},computed:{external_link:function(){return"string"==typeof this.metadata.key?this.url_store_data_prefix+this.metadata.key:this.url_query_prefix+this.metadata.query}}},Pt=Mt,It=a("a844"),Lt=Object(u["a"])(Pt,Nt,Ft,!1,null,null,null),Tt=Lt.exports;h()(Lt,{VBtn:mt["a"],VCol:_["a"],VContainer:it["a"],VProgressCircular:K["a"],VRow:X["a"],VTextarea:It["a"]});var Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},["text"!=t.mode?a("v-row",[a("v-col",{attrs:{cols:"8"}},["none"==t.mode?a("h4",[t._v("No metadata")]):t._e(),"waiting"==t.mode?a("h4",[t._v("Waiting for "+t._s(t.metadata.query))]):t._e(),"invalid"==t.mode?a("h4",[t._v("Invalid status")]):t._e(),"error"==t.mode?a("h4",[t._v("Error in "+t._s(t.metadata.query))]):t._e(),"recipe"==t.mode?a("h4",[t._v("Recipe")]):t._e(),"unsupported"==t.mode?a("h4",[t._v("Unsupported data type")]):t._e()]),a("v-col",{attrs:{cols:"4"}},[a("v-progress-circular",{attrs:{size:50,width:10,color:"primary",indeterminate:""}})],1)],1):t._e(),"text"==t.mode?a("v-row",[a("v-col",[a("prism-editor",{staticClass:"highlighting-editor",attrs:{highlight:t.highlighter,"line-numbers":t.lineNumbers},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1)],1):t._e(),"text"==t.mode?a("v-row",[a("v-col",[a("v-btn",{on:{click:function(e){return t.save()}}},[t._v("Save")])],1)],1):t._e()],1)},Dt=[],Jt=a("e57a"),Bt=(a("cabf"),a("8c7a")),Kt=(a("cb55"),a("457d"),a("416b"),a("3d21"),a("84bf"),{components:{PrismEditor:Jt["a"]},props:{liquer_url:{type:String,default:"/liquer"},data:{default:null},metadata:{default:null}},data:function(){return{mode:"none",data_ready:!1,data:"",lineNumbers:!0,language:"yaml",url_query_prefix:"/liquer/q/",url_store_data_prefix:"/liquer/api/store/data/"}},methods:{info:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"INFO",message:t,reason:e,query:a})},error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"ERROR",message:t,reason:e,query:a})},message_event:function(t){this.$emit("message-event",t)},highlighter:function(t){return Object(Bt["highlight"])(t,Bt["languages"][this.language])},update:function(){if(null==this.metadata&&(this.mode="none"),null==this.metadata.status&&(this.mode="invalid"),"error"==this.metadata.status&&(this.mode="error"),"recipe"==this.metadata.status&&(this.mode="recipe"),"evaluation"!=this.metadata.status&&"parent"!=this.metadata.status&&"dependencies"!=this.metadata.status&&"submitted"!=this.metadata.status||(this.mode="waiting"),"ready"==this.metadata.status||"external"==this.metadata.status||"expired"==this.metadata.status||"side-effect"==this.metadata.status){console.log("READY"),console.log("Query",this.metadata.query),console.log("Type",this.metadata.type_identifier),console.log("Metadata",this.metadata);var t={generic:function(){this.load("text")},text:function(){this.load("text")}};try{t[this.metadata.type_identifier].bind(this)()}catch(e){this.mode="unsupported"}}return"waiting"},load:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==e&&(e=this.metadata.key);var a=this.url_store_data_prefix+e;console.log("Load",e),console.log("URL",a),this.$http.get(a).then(function(e){this.data=e.body,this.mode=t}.bind(this),function(t){this.error("Failed loading data",t,e)}.bind(this))},save:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("Save"),null==t&&(t=this.metadata.key);var e=this.url_store_data_prefix+t;console.log("Save",t),console.log("URL",e),this.$http.post(e,this.data).then(function(t){t.json().then(function(t){console.log("save result: ",t)}.bind(this),function(t){this.error("JSON error while saving to store ",t)}.bind(this))}.bind(this),function(e){this.error("Failed saving data",e,t)}.bind(this))}},watch:{metadata:function(){console.log("Metadata updated in content"),this.update()}},created:function(){console.log("Plain text editor created"),this.update()},computed:{external_link:function(){return"string"==typeof this.metadata.key?this.url_store_data_prefix+this.metadata.key:this.url_query_prefix+this.metadata.query}}}),Qt=Kt,Wt=(a("c9b6"),Object(u["a"])(Qt,Ut,Dt,!1,null,null,null)),At=Wt.exports;h()(Wt,{VBtn:mt["a"],VCol:_["a"],VContainer:it["a"],VProgressCircular:K["a"],VRow:X["a"]});var Ht={name:"App",components:{StatusBar:p,Commands:O,Content:pt,DirView:qt,MetadataView:ut,Clean:$t,PlainTextStoreEditor:Tt,HighlightingTextStoreEditor:At},data:function(){return{drawer:!1,mode:"",query:"",is_key:!1,data:null,dirkey:"",tick:0,metadata:null,status:"OK",message:"",message_event_object:{status:"OK"},url_query_prefix:"/liquer/q/",url_submit_prefix:"/liquer/submit/",url_submit_key_prefix:"/liquer/submit/-R/",url_remove_prefix:"/liquer/cache/remove/",url_stored_meta_prefix:"/liquer/api/stored_metadata/",liquer_url:"/liquer",html:""}},methods:{info:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"INFO",message:t,reason:e,query:a})},error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.message_event({status:"ERROR",message:t,reason:e,query:a})},message_event:function(t){console.log("*** ".concat(t.status,":"),t.message),null!=t.reason&&console.log("   Reason: ",t.reason),null!=t.query&&console.log("   Query:  ",t.query),this.message=t.message,this.status=t.status,this.message_event_object=t},open_event:function(t){console.log("Open",t),t.is_dir?(this.dirkey=t.key,window.location.href="#-i-store/"+this.dirkey):(this.mode="content",this.query="",this.key=t.key,this.is_key=!0,window.location.href="#-i-k/"+this.key)},update_route:function(){console.log("Update route",window.location.hash),this.route=window.location.hash,this.route.startsWith("#")&&(this.route=this.route.substring(1));var t={mode:function(t,e){t.set_mode(e),"content"==this.mode&&(this.is_key?t.submit_query(this.key,!0):t.submit_query(this.query))},store:function(t,e){t.dirkey=e,t.set_mode("store")},q:function(t,e){t.set_mode("content"),t.submit_query(e)},qm:function(t,e){t.set_mode("metadata"),t.submit_query(e)},k:function(t,e){t.key=e,t.is_key=!0,t.set_mode("content"),t.submit_query(e,!0)},km:function(t,e){t.key=e,t.is_key=!0,t.set_mode("metadata"),t.load_stored_metadata("-R/"+e)}},e=!1;for(var a in t){var i="-i-"+a+"/";if(console.log("Try prefix",i),this.route.startsWith(i)){e=!0;var n=this.route.substring(i.length);return console.log("  Route instruction",a),console.log("  Route argument",n),void t[a](this,n)}}e||console.log("Route not recognized")},set_mode:function(t){this.mode=t,this.drawer=!1},updir:function(){console.log("Updir from",this.dirkey),this.dirkey=this.dirkey.split("/").slice(0,-1).join("/"),console.log("Updir to",this.dirkey),window.location.href="#-i-store/"+this.dirkey},clean_dir:function(){console.log("Clean dir",this.dirkey);var t=this.url_query_prefix;""==this.dirkey?t+="ns-meta/root_key/clean-t-t-t-t-f/result.json":t=t+"-R-meta/"+this.dirkey+"/-/ns-meta/clean-t-t-t-t-f/result.json",console.log("Clean URL",t),this.$http.get(t).then(function(t){t.json().then(function(t){console.log("clean result: ",t),this.tick+=1}.bind(this),function(t){this.error("JSON error while cleaning "+this.dirkey,t),this.tick+=1}.bind(this))}.bind(this),function(t){this.error("Failed calling clean "+this.dirkey,t)}.bind(this))},make_dir:function(){console.log("make dir",this.dirkey);var t=this.url_query_prefix;""==this.dirkey?t+="ns-meta/root_key/make_recipes-f/result.json":t=t+"-R-meta/"+this.dirkey+"/-/ns-meta/make_recipes-f/result.json",console.log("Make dir URL",t),this.$http.get(t).then(function(t){t.json().then(function(t){console.log("Make dir result: ",t),this.tick+=1}.bind(this),function(t){this.error("JSON error while make dir "+this.dirkey,t),this.tick+=1}.bind(this))}.bind(this),function(t){this.error("Failed calling make_recipes "+this.dirkey,t)}.bind(this))},load_stored_metadata:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};null==t&&(t=this.query),console.log("Load stored metadata",t),this.$http.get(this.url_stored_meta_prefix+t).then(function(a){a.json().then(function(t){this.metadata=t,e()}.bind(this),function(e){this.error("JSON error while loading stored metadata",e,t)}.bind(this))}.bind(this),function(e){this.error("Failed loading stored metadata",e,t)}.bind(this))},get_metadata:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};null==t&&(t=this.query),console.log("Get metadata",t);var a=this.url_query_prefix+this.query_basis(t)+"/state/metadata.json";console.log("GET",a),this.$http.get(a).then(function(a){a.json().then(function(t){this.metadata=t,e()}.bind(this),function(e){this.error("JSON error while loading metadata",e,t)}.bind(this))}.bind(this),function(e){this.error("Failed loading metadata",e,t)}.bind(this))},sync:function(){console.log("Sync");var t=this.url_query_prefix+"sync_store/result.json";console.log("GET",t),this.$http.get(t).then(function(t){t.json().then(function(t){"OK"==t.status?this.info(t.message):this.error(t.message),this.tick+=1}.bind(this),function(t){this.error("JSON error while sync",t)}.bind(this))}.bind(this),function(t){this.error("Failed to sync",t)}.bind(this))},monitor_query:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};null==t&&(t=this.query),console.log("Monitor query",t),this.load_stored_metadata(t,function(){null==this.metadata?(console.log("No metadata for ".concat(t,", assuming volatile")),this.info("Volatile query",this.metadata,t),this.get_metadata(t,e)):"error"==this.metadata.status?(console.log("Status",this.metadata.status),this.error("Query failed",this.metadata,t)):"ready"==this.metadata.status?(this.info("Data ready",this.metadata,t),e()):"external"==this.metadata.status?(this.info("External data ready",this.metadata,t),e()):"expired"==this.metadata.status?(this.info("Expired data available",this.metadata,t),e()):"side-effect"==this.metadata.status?(this.info("Data ready (created as a side-effect)",this.metadata,t),e()):(console.log("Status",this.metadata.status),console.log("Refresh metadata ".concat(t)),this.info("Status: ".concat(this.metadata.status),this.metadata,t),window.setTimeout(this.monitor_query,500,t,e))}.bind(this))},submit_query:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Submit query",t),this.query=t,this.is_key=e;var a="";e?(this.info("Submitting key",{},t),a=this.url_submit_key_prefix+t,console.log("Submitting key, url:",a)):(this.info("Submitting query",{},t),a=this.url_submit_prefix+t,console.log("Submitting query, url:",a)),this.$http.get(a).then(function(a){a.json().then(function(a){try{"OK"==a.status?(this.info(a.message,a,t),e&&(t="-R/"+t),this.monitor_query(t,function(){console.log("Metadata obtained for query",t),console.log("metadata:",this.metadata)}.bind(this))):this.error(a.message,a,t)}catch(i){this.error("Unexpected result from query submission",a,t)}}.bind(this),function(e){this.error("JSON error while submitting query",e,t)}.bind(this))}.bind(this),function(e){this.error("Failed sumbitting query",e,t)}.bind(this))},split_query:function(t){var e=t,a=this.query.split("/").filter((function(t){return t.length})),i="data",n="pickle";if(a.length>0){var s=a[a.length-1];i=s.replace("-","_");var r=i.split(".");i=r[0],n=r[r.length-1],-1==s.indexOf("-")&&-1!=s.indexOf(".")&&(e=a.slice(0,a.length-1).join("/"))}return[e,i,n]},query_basis:function(t){var e=t,a=this.query.split("/").filter((function(t){return t.length}));if(a.length>0){var i=a[a.length-1];-1==i.indexOf("-")&&-1!=i.indexOf(".")&&(e=a.slice(0,a.length-1).join("/"))}return e}},computed:{can_edit:function(){return"content"==this.mode||"metadata"==this.mode},show_plain_text_editor:function(){return"edit"==this.mode&&"string"==typeof this.key&&!this.key.endsWith(".yaml")},show_highlighting_text_editor:function(){return"edit"==this.mode&&"string"==typeof this.key&&this.key.endsWith(".yaml")}},created:function(){this.mode="",window.onhashchange=this.update_route,this.update_route()}},zt=Ht,Gt=a("7496"),Yt=a("40dc"),Xt=a("5bc1"),Zt=a("ce7e"),te=a("8860"),ee=a("da13"),ae=a("5d23"),ie=a("34c3"),ne=a("f6c4"),se=a("f774"),re=a("2a7f"),oe=Object(u["a"])(zt,n,s,!1,null,null,null),le=oe.exports;h()(oe,{VApp:Gt["a"],VAppBar:Yt["a"],VAppBarNavIcon:Xt["a"],VBtn:mt["a"],VCol:_["a"],VContainer:it["a"],VDivider:Zt["a"],VIcon:I["a"],VList:te["a"],VListItem:ee["a"],VListItemContent:ae["a"],VListItemIcon:ie["a"],VListItemTitle:ae["b"],VMain:ne["a"],VNavigationDrawer:se["a"],VRow:X["a"],VSpacer:V["a"],VToolbarTitle:re["a"]});var de=a("f309");i["a"].use(de["a"]);var ue=new de["a"]({theme:{dark:!0}}),ce=a("28dd");i["a"].use(ce["a"]),i["a"].config.productionTip=!1,new i["a"]({vuetify:ue,render:function(t){return t(le)},data:{status:"OK",message:"",url_submit_prefix:"/liquer/submit/",url_remove_prefix:"/liquer/cache/remove/",url_prefix:"/liquer/q/"}}).$mount("#app")},c9b6:function(t,e,a){"use strict";a("5406")}});
//# sourceMappingURL=app.e2c18d48.js.map