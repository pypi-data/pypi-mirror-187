<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
<!-- proceed to override the email_template_confirmation -->
    <function name="write" model="ir.model.data">
        <function name="search" model="ir.model.data">
            <value eval="[('module', '=', 'cooperator'),('name', '=', 'email_template_confirmation')]"/>
        </function>
        <value eval="{'noupdate': False}" />
    </function>

    <record id="cooperator.email_template_confirmation" model="mail.template">
            <field name="name">Confirmation Email for CE Subscription Request Receipt</field>
            <field name="email_from">
                ${(object.company_id.coop_email_contact or object.company_id.email)|safe}
            </field>
            <field name="subject">[Somcomunitats.coop] Application to become Community membership</field>
            <field name="email_to">${object.email}</field>
            <field name="email_cc">info+altausuari@somcomunitats.coop</field>
            <field name="email_bcc">${object.company_id.email}</field>
            <field name="reply_to">
                ${(object.company_id.coop_email_contact or object.company_id.email)|safe}
            </field>
            <field name="model_id" ref="model_subscription_request" />
            <field name="auto_delete" eval="True" />
            <field name="lang">${(object.lang or object.company_id.default_lang_id.code or object.company_id.partner_id.lang)}</field>
            <field name="is_cooperator_template" eval="True" />
            <field
                name="body_html"
            ><![CDATA[
<div style="font-family: 'Lucica Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFF; ">

    <p>Hello,</p>
    <p>Thank you for filling out the form and request to join the Community.</p>
    <p>In the coming weeks we will contact you to indicate the next steps</p>
    <p>Here is a copy of the data we received:</p>
    <div id="field_list_div" style="font-family: 'Lucica Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 10px; color: rgb(34, 34, 34); background-color: #FFF; ">
        <p> - Request to join: ${object.company_id.name}</p>
        <p> - Firstname: ${object.firstname}</p>
        <p> - Lastname: ${object.lastname}</p>
        <p> - VAT: ${object.vat}</p>
        <p> - Address: ${object.address}</p>
        <p> - Zip code: ${object.zip_code}</p>
        <p> - City: ${object.city}</p>
        <p> - Country: ${object.country_id.name}</p>        
        <p> - Email: ${object.email}</p>
        <p> - Phone: ${object.phone}</p>
        <p> - Gender: ${object.gender}</p>        
        <p> - Birthdate: ${object.birthdate}</p>
        <p> - Language: ${object.lang}</p>  
        <p> - Initial share amount: ${object.subscription_amount}</p>  
    </div>
    <br />
    <p>We keep in touch for any questions.</p>
    <p>Yours faithfully,</p>
    <p>Somcomunitats.coop team </p>
    <p><a href="https://web-test.somcomunitats.coop/recursos/">Resources and FAQs</a></p>
</div>
            ]]></field>
    </record>

    <function name="write" model="ir.model.data">
        <function name="search" model="ir.model.data">
            <value eval="[('module', '=', 'cooperator'),('name', '=', 'email_template_confirmation')]"/>
        </function>
        <value eval="{'noupdate': True}" />
    </function>
    </data>
</odoo>