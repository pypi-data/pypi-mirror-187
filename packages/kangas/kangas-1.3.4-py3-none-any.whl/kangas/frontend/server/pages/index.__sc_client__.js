"use strict";
(() => {
var exports = {};
exports.id = 739;
exports.ids = [739];
exports.modules = {

/***/ "./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FSettingsBar%2FPaging.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FSettingsBar%2FMatrixSelect.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FSettingsBar%2FSelectRow.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FSettingsBar%2FRefreshButton.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FModals%2FDialogueModalContainer.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2Fpage.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FSettingsBar%2FImports.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FExpandOverlay.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FClientContext.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FCurveAssetCell.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FBooleanCell.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fnode_modules%2Fnext%2Fimage.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FImage%2FImageCanvas.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FDeferredCell.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FHistogram%2FHistogramGroupCell.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FHistogram%2FHistogramGroupExpanded.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FCategory%2FCategoryGroupCell.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FCategory%2FCategoryGroupExpanded.client.js&runtime=nodejs&ssr=false&name=pages%2Findex!":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "__N_SSP": () => (/* binding */ __N_SSP),
/* harmony export */   "__next_rsc__": () => (/* binding */ __next_rsc__),
/* harmony export */   "default": () => (/* binding */ RSC)
/* harmony export */ });
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/SettingsBar/Paging.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/SettingsBar/MatrixSelect.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/SettingsBar/SelectRow.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/SettingsBar/RefreshButton.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/Modals/DialogueModalContainer.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/page.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/SettingsBar/Imports.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/Cells/ExpandOverlay.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/Cells/ClientContext.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/Cells/CurveAssetCell.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/Cells/BooleanCell.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, "./node_modules/next/image.js", 23));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/Cells/Image/ImageCanvas.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/DeferredCell.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/Cells/Histogram/HistogramGroupCell.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/Cells/Histogram/HistogramGroupExpanded.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/Cells/Category/CategoryGroupCell.client.js"));Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, "./components/Cells/Category/CategoryGroupExpanded.client.js"))
    const __next_rsc__ = {
      server: false,
      __webpack_require__
    };
    function RSC() {};
    const __N_SSP = true;

/***/ }),

/***/ "./components/Cells/BooleanCell.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ BooleanCell_client)
});

// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__("react/jsx-runtime");
;// CONCATENATED MODULE: external "@mui/icons-material/CheckBox"
const CheckBox_namespaceObject = require("@mui/icons-material/CheckBox");
var CheckBox_default = /*#__PURE__*/__webpack_require__.n(CheckBox_namespaceObject);
;// CONCATENATED MODULE: external "@mui/icons-material/CheckBoxOutlineBlank"
const CheckBoxOutlineBlank_namespaceObject = require("@mui/icons-material/CheckBoxOutlineBlank");
var CheckBoxOutlineBlank_default = /*#__PURE__*/__webpack_require__.n(CheckBoxOutlineBlank_namespaceObject);
;// CONCATENATED MODULE: ./components/Cells/BooleanCell.client.js



const BooleanCellClient = ({ value  })=>{
    if (value === null) return /*#__PURE__*/ jsx_runtime_.jsx(jsx_runtime_.Fragment, {
        children: "None"
    });
    else return value === 1 ? /*#__PURE__*/ jsx_runtime_.jsx((CheckBox_default()), {}) : /*#__PURE__*/ jsx_runtime_.jsx((CheckBoxOutlineBlank_default()), {});
};
/* harmony default export */ const BooleanCell_client = (BooleanCellClient);


/***/ }),

/***/ "./components/Cells/Category/CategoryGroupCell.client.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_icons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("@material-ui/icons");
/* harmony import */ var _material_ui_icons__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/next/dynamic.js");
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_generateChartColor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./lib/generateChartColor.js");
/* harmony import */ var _lib_useCategory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./lib/useCategory.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_useCategory__WEBPACK_IMPORTED_MODULE_4__]);
_lib_useCategory__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];







const Plot = next_dynamic__WEBPACK_IMPORTED_MODULE_2___default()(null, {
    loadableGenerated: {
        modules: [
            "../components/Cells/Category/CategoryGroupCell.client.js -> " + "react-plotly.js"
        ]
    },
    ssr: false
});
const CategoryGroupClient = ({ value  })=>{
    const { 0: dimensions , 1: setDimensions  } = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);
    const data = (0,_lib_useCategory__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(value);
    /*
    useLayoutEffect(() => {
        const ours = document.getElementById(id.current);
        if (ours?.clientWidth && ( ours?.clientHeight > 30 )) {
            setDimensions({
                height: ours.clientHeight - 30,
                width: ours.clientWidth
            })
        }
    }, []);*/ const sortedData = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>{
        if (!data?.values) return;
        return Object.keys(data.values).sort().reduce((obj, key)=>{
            obj[key] = data.values[key];
            return obj;
        }, {});
    }, [
        data
    ]);
    const categoryData = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>{
        if (!sortedData) return;
        return [
            {
                type: "bar",
                orientation: "h",
                x: Object.values(sortedData),
                y: Object.keys(sortedData),
                text: Object.keys(sortedData).map((key)=>`${data.column}: ${key} ${data.message || ""}`),
                marker: {
                    color: Object.keys(sortedData).map(_lib_generateChartColor__WEBPACK_IMPORTED_MODULE_5__/* .getColor */ .Lq)
                }
            }, 
        ];
    }, [
        sortedData
    ]);
    const layout = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>{
        return {
            paper_bgcolor: "rgba(0,0,0,0)",
            plot_bgcolor: "rgba(0,0,0,0)",
            autosize: true,
            bargap: 0.1,
            margin: {
                l: 0,
                r: 0,
                b: 0,
                t: 0,
                pad: 0
            },
            showlegend: false,
            xaxis: {
                visible: true,
                showticklabels: true
            },
            yaxis: {
                visible: true,
                showticklabels: true,
                type: "category"
            }
        };
    }, [
        dimensions
    ]);
    // Verbatim type:
    // {"type": "verbatim", "value": "1011 slug 3s, 1 each", "columnType": "TEXT", "message": "1001 slug 3s not showing"}
    if (data?.type === "verbatim") {
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
            className: "cell-verbatim",
            children: data.value
        });
    } else {
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(Plot, {
            style: {
                height: "100%",
                width: "100%",
                maxHeight: "110px"
            },
            data: categoryData,
            layout: layout,
            config: {
                displayModeBar: false
            }
        });
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CategoryGroupClient);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./components/Cells/Category/CategoryGroupExpanded.client.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_icons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("@material-ui/icons");
/* harmony import */ var _material_ui_icons__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/next/dynamic.js");
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_generateChartColor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./lib/generateChartColor.js");
/* harmony import */ var _lib_useCategory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./lib/useCategory.js");
/* harmony import */ var _ClientContext_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./components/Cells/ClientContext.client.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_useCategory__WEBPACK_IMPORTED_MODULE_4__]);
_lib_useCategory__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];







// Config

const Plot = next_dynamic__WEBPACK_IMPORTED_MODULE_2___default()(null, {
    loadableGenerated: {
        modules: [
            "../components/Cells/Category/CategoryGroupExpanded.client.js -> " + "react-plotly.js"
        ]
    },
    ssr: false
});
// It spiritually hurts me that this cannot be a server component - Caleb
const CategoryGroupClient = ({ value  })=>{
    const { 0: dimensions , 1: setDimensions  } = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);
    const data = (0,_lib_useCategory__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(value);
    (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(()=>{
        const viewport = window.visualViewport;
        if (viewport?.width && viewport?.height) {
            setDimensions({
                height: viewport.height,
                width: viewport.width
            });
        }
    }, []);
    const sortedData = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>{
        if (!data?.values) return;
        return Object.keys(data.values).sort().reduce((obj, key)=>{
            obj[key] = data.values[key];
            return obj;
        }, {});
    }, [
        data
    ]);
    const categoryData = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>{
        if (!sortedData) return;
        return [
            {
                type: "bar",
                orientation: "h",
                x: Object.values(sortedData),
                y: Object.keys(sortedData),
                text: Object.keys(sortedData).map((key)=>`${data.column}: ${key} ${data.message || ""}`),
                marker: {
                    color: Object.keys(sortedData).map(_lib_generateChartColor__WEBPACK_IMPORTED_MODULE_6__/* .getColor */ .Lq)
                }
            }, 
        ];
    }, [
        sortedData
    ]);
    const layout = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>{
        return {
            autosize: true,
            title: `${value?.columnName}`,
            font: {
                family: "Roboto",
                size: 22,
                color: "#191A1C"
            },
            xaxis: {
                font: {
                    size: 13,
                    color: "#3D4355"
                }
            },
            yaxis: {
                type: "category"
            }
        };
    }, [
        value
    ]);
    // Verbatim type:
    // {"type": "verbatim", "value": "1011 slug 3s, 1 each", "columnType": "TEXT", "message": "1001 slug 3s not showing"}
    if (data?.type === "verbatim") {
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
            className: "cell-verbatim-expanded",
            children: data.value
        });
    } else {
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
            style: {
                minWidth: "500px"
            },
            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(Plot, {
                style: {
                    height: "100%",
                    width: "100%"
                },
                data: categoryData,
                layout: layout,
                config: {
                    displayModeBar: false
                }
            })
        });
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CategoryGroupClient);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./components/Cells/ClientContext.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConfigContext": () => (/* binding */ ConfigContext),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


const ConfigContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({
    apiUrl: null,
    otherUrl: null,
    isColab: false,
    isIframe: false
});
const ClientContext = ({ apiUrl , otherUrl , isColab , children  })=>{
    // We check if the app is inside an iframe by comparing the window against its parent
    // but window is not defined server-side, so we use the effect hook to ensure it runs client side
    const { 0: isIframe , 1: setIsIframe  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        setIsIframe(window !== window.parent);
        // This is a hacky workaround
        // TODO Clean up when we upgrade Next
        if (window !== window.parent) {
            document.getElementById("matrix-select-pulldown")?.setAttribute("style", "display: none");
        }
    }, []);
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(ConfigContext.Provider, {
        value: {
            apiUrl,
            otherUrl,
            isColab,
            isIframe
        },
        children: children
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ClientContext);


/***/ }),

/***/ "./components/Cells/CurveAssetCell.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/next/dynamic.js");
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);



const Plot = next_dynamic__WEBPACK_IMPORTED_MODULE_1___default()(null, {
    loadableGenerated: {
        modules: [
            "../components/Cells/CurveAssetCell.client.js -> " + "react-plotly.js"
        ]
    },
    ssr: false
});
// It spiritually hurts me that this cannot be a server component - Caleb
const CurveAssetCellClient = ({ chartData , layout  })=>{
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(Plot, {
        data: chartData,
        layout: layout,
        config: {
            displayModeBar: false
        }
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CurveAssetCellClient);


/***/ }),

/***/ "./components/Cells/ExpandOverlay.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Modals_DialogueModalContainer_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./components/Modals/DialogueModalContainer.client.js");

/*
const DialogueModalContainer = dynamic(() => import('../Modals/DialogueModalContainer.client'), {
    ssr: false
});
*/ 
const ExpandOverlay = ({ children  })=>{
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
        className: "expand-overlay",
        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_Modals_DialogueModalContainer_client__WEBPACK_IMPORTED_MODULE_1__["default"], {
            children: children
        })
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ExpandOverlay);


/***/ }),

/***/ "./components/Cells/Histogram/HistogramGroupCell.client.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/next/dynamic.js");
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_formatValue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./lib/formatValue.js");
/* harmony import */ var _lib_generateChartColor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./lib/generateChartColor.js");
/* harmony import */ var _ClientContext_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./components/Cells/ClientContext.client.js");
/* harmony import */ var _lib_useHistogram__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./lib/useHistogram.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_useHistogram__WEBPACK_IMPORTED_MODULE_5__]);
_lib_useHistogram__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];







const Plot = next_dynamic__WEBPACK_IMPORTED_MODULE_1___default()(null, {
    loadableGenerated: {
        modules: [
            "../components/Cells/Histogram/HistogramGroupCell.client.js -> " + "react-plotly.js"
        ]
    },
    ssr: false
});
const HistogramGroupClient = ({ value , dgid  })=>{
    const appConfig = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_ClientContext_client__WEBPACK_IMPORTED_MODULE_4__.ConfigContext);
    const data = (0,_lib_useHistogram__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(value);
    // TODO: Move into useHistogram
    const histogramData = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(()=>{
        if (!data) return null;
        else return [
            {
                type: "bar",
                x: data.columnType === "DATETIME" ? data.labels.map((v)=>(0,_lib_formatValue__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(v, "DATETIME")) : data.labels,
                y: data.bins,
                text: data?.labels?.map((value)=>`${data.column}: ${(0,_lib_formatValue__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(value, data.columnType)} ${data.message || ""}`),
                marker: {
                    color: (0,_lib_generateChartColor__WEBPACK_IMPORTED_MODULE_6__/* .getColor */ .Lq)(data.column)
                }
            }, 
        ];
    }, [
        data
    ]);
    const layout = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(()=>{
        return {
            paper_bgcolor: "rgba(0,0,0,0)",
            plot_bgcolor: "rgba(0,0,0,0)",
            autosize: true,
            bargap: 0.1,
            margin: {
                l: 0,
                r: 0,
                b: 0,
                t: 0,
                pad: 0
            },
            showlegend: false,
            xaxis: {
                visible: true,
                showticklabels: true
            },
            yaxis: {
                visible: true,
                showticklabels: true
            }
        };
    }, []);
    const config = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(()=>{
        return {
            displayModeBar: false
        };
    });
    // Verbatim type:
    // {"type": "verbatim", "value": "1011 slug 3s, 1 each", "columnType": "TEXT", "message": "1001 slug 3s not showing"}
    if (data?.type === "verbatim") {
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
            className: "cell-verbatim",
            children: data.value
        });
    } else {
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(Plot, {
            style: {
                height: "100%",
                width: "100%",
                maxHeight: "110px"
            },
            data: histogramData,
            layout: layout,
            config: config
        });
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HistogramGroupClient);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./components/Cells/Histogram/HistogramGroupExpanded.client.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/next/dynamic.js");
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_formatValue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./lib/formatValue.js");
/* harmony import */ var _lib_truncateValue__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./lib/truncateValue.js");
/* harmony import */ var _lib_generateChartColor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./lib/generateChartColor.js");
/* harmony import */ var _ClientContext_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./components/Cells/ClientContext.client.js");
/* harmony import */ var _lib_useHistogram__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./lib/useHistogram.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_useHistogram__WEBPACK_IMPORTED_MODULE_6__]);
_lib_useHistogram__WEBPACK_IMPORTED_MODULE_6__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];








const Plot = next_dynamic__WEBPACK_IMPORTED_MODULE_1___default()(null, {
    loadableGenerated: {
        modules: [
            "../components/Cells/Histogram/HistogramGroupExpanded.client.js -> " + "react-plotly.js"
        ]
    },
    ssr: false
});
const HistogramGroupClient = ({ value , dgid  })=>{
    const appConfig = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_ClientContext_client__WEBPACK_IMPORTED_MODULE_5__.ConfigContext);
    const data = (0,_lib_useHistogram__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(value);
    // TODO Clean this up as a subcomponent
    const makeStatsTable = (statistics)=>{
        if (statistics) {
            return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                style: {
                    margin: "auto",
                    marginLeft: "inherit"
                },
                children: Object.keys(statistics).map((key, index)=>{
                    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("ul", {
                        style: {
                            paddingLeft: "0"
                        },
                        children: [
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("b", {
                                children: key
                            }),
                            " :",
                            " ",
                            (0,_lib_truncateValue__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(statistics[key], 3).toLocaleString(appConfig.locale)
                        ]
                    });
                })
            });
        }
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {});
    };
    const histogramData = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(()=>{
        if (!data) return null;
        else return [
            {
                type: "bar",
                x: data.columnType === "DATETIME" ? data.labels.map((v)=>(0,_lib_formatValue__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(v, "DATETIME")) : data.labels,
                y: data.bins,
                text: data?.labels?.map((value)=>`${data.column}: ${(0,_lib_formatValue__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(value, data.columnType)} ${data.message || ""}`),
                marker: {
                    color: (0,_lib_generateChartColor__WEBPACK_IMPORTED_MODULE_7__/* .getColor */ .Lq)(data.column)
                }
            }, 
        ];
    }, [
        data
    ]);
    const statisticsTable = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(()=>{
        if (!data?.statistics) return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {});
        return makeStatsTable(data.statistics);
    }, [
        data
    ]);
    const layout = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(()=>{
        return {
            autosize: true,
            title: `${data?.column}`,
            font: {
                family: "Roboto",
                size: 22,
                color: "#191A1C"
            },
            xaxis: {
                font: {
                    size: 13,
                    color: "#3D4355"
                }
            },
            yaxis: {
                font: {
                    size: 13,
                    color: "#3D4355"
                }
            }
        };
    }, [
        data
    ]);
    const plotlyConfig = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(()=>{
        return {
            displayModeBar: false
        };
    });
    // Verbatim type:
    // {"type": "verbatim", "value": "1011 slug 3s, 1 each", "columnType": "TEXT", "message": "1001 slug 3s not showing"}
    if (data?.type === "verbatim") {
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
            className: "cell-verbatim-expanded",
            children: data.value
        });
    } else {
        return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            style: {
                minWidth: "600px",
                display: "flex"
            },
            children: [
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(Plot, {
                    style: {
                        height: "100%",
                        width: "75%"
                    },
                    data: histogramData,
                    layout: layout,
                    config: plotlyConfig
                }),
                statisticsTable
            ]
        });
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HistogramGroupClient);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./components/Cells/Image/Canvas.client.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_useMetadata__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./lib/useMetadata.js");
/* harmony import */ var _lib_useAsset__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./lib/useAsset.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("@mui/material");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_mui_material__WEBPACK_IMPORTED_MODULE_4__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_useMetadata__WEBPACK_IMPORTED_MODULE_2__, _lib_useAsset__WEBPACK_IMPORTED_MODULE_3__]);
([_lib_useMetadata__WEBPACK_IMPORTED_MODULE_2__, _lib_useAsset__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);





const Canvas = ({ url , drawImage , dgid , scoreBound , ref  })=>{
    const { 0: loaded , 1: setLoaded  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const canvas = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();
    const image = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();
    const { 0: filteredLabels , 1: setFilteredLabels  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);
    const assetId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{
        const searchParams = new URL(url).searchParams;
        return searchParams.get("assetId");
    }, [
        url
    ]);
    const parsedMeta = (0,_lib_useMetadata__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(dgid, assetId);
    const imageSrc = (0,_lib_useAsset__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(url);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if (!scoreBound || !parsedMeta?.overlays) return;
        const below = parsedMeta?.overlays?.filter((overlay)=>overlay?.score < scoreBound);
        setFilteredLabels(below.map((x)=>x.label));
    }, [
        parsedMeta,
        scoreBound
    ]);
    const load = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{
        if (!canvas || !image || !parsedMeta) return;
        drawImage(canvas, image, parsedMeta, filteredLabels);
        setLoaded(true);
    }, [
        drawImage,
        parsedMeta,
        filteredLabels
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        load();
    }, [
        load
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "canvas-container",
        ref: ref,
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("canvas", {
                ref: canvas,
                className: `image-canvas ${!loaded && "hidden"}`
            }),
            !loaded && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_mui_material__WEBPACK_IMPORTED_MODULE_4__.CircularProgress, {}),
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("img", {
                ref: image,
                src: imageSrc,
                crossOrigin: "Anonymous",
                className: "hidden",
                onLoad: load,
                alt: "DataGrid Image"
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Canvas);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./components/Cells/Image/CanvasWrapper.client.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("@mui/material");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_mui_material__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intersection_observer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("react-intersection-observer");
/* harmony import */ var _Canvas_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./components/Cells/Image/Canvas.client.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_intersection_observer__WEBPACK_IMPORTED_MODULE_3__, _Canvas_client__WEBPACK_IMPORTED_MODULE_4__]);
([react_intersection_observer__WEBPACK_IMPORTED_MODULE_3__, _Canvas_client__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);





const CanvasWrapper = ({ url , drawImage , dgid , scoreBound  })=>{
    const { ref , inView , entry  } = (0,react_intersection_observer__WEBPACK_IMPORTED_MODULE_3__.useInView)({
        threshold: 0,
        rootMargin: "1000px",
        triggerOnce: true
    });
    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)();
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        ref: ref,
        children: [
            inView && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                ref: canvasRef,
                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_Canvas_client__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
                    url: url,
                    drawImage: drawImage,
                    dgid: dgid,
                    scoreBound: scoreBound
                })
            }),
            !inView && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_mui_material__WEBPACK_IMPORTED_MODULE_1__.CircularProgress, {})
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CanvasWrapper);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./components/Cells/Image/ImageCanvas.client.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CanvasContext": () => (/* binding */ CanvasContext),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intersection_observer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("react-intersection-observer");
/* harmony import */ var use_debounce__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("use-debounce");
/* harmony import */ var _lib_generateChartColor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./lib/generateChartColor.js");
/* harmony import */ var _Label_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./components/Cells/Image/Label.client.js");
/* harmony import */ var _Modals_DialogueModalContainer_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./components/Modals/DialogueModalContainer.client.js");
/* harmony import */ var _CanvasWrapper_client__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./components/Cells/Image/CanvasWrapper.client.js");
/* harmony import */ var _Canvas_client__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./components/Cells/Image/Canvas.client.js");
/* harmony import */ var _lib_useMetadata__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./lib/useMetadata.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_intersection_observer__WEBPACK_IMPORTED_MODULE_2__, use_debounce__WEBPACK_IMPORTED_MODULE_3__, _CanvasWrapper_client__WEBPACK_IMPORTED_MODULE_6__, _Canvas_client__WEBPACK_IMPORTED_MODULE_7__, _lib_useMetadata__WEBPACK_IMPORTED_MODULE_8__]);
([react_intersection_observer__WEBPACK_IMPORTED_MODULE_2__, use_debounce__WEBPACK_IMPORTED_MODULE_3__, _CanvasWrapper_client__WEBPACK_IMPORTED_MODULE_6__, _Canvas_client__WEBPACK_IMPORTED_MODULE_7__, _lib_useMetadata__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);

/* eslint-disable react/jsx-key */ 








/*

In the below components, we have a potentially confusing distinction between "hidden labels" and "filtered labels".

To clarify, hidden labels are labels that are manually hidden by the user clicking directly on the label. Filtered labels
are instead removed according to their score.

Hidden labels are set at the parent ImageCanvas level, while each canvas individually calculates its filtered labels.

*/ const CanvasContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)();
// TODO Memoize these props into a canvasProps style object
const CanvasContainer = ({ urls , url , isMulti , strValue , drawImage , assetId , dgid , filterLabels , scoreBound  })=>{
    const { ref , inView , entry  } = (0,react_intersection_observer__WEBPACK_IMPORTED_MODULE_2__.useInView)({
        threshold: 0,
        rootMargin: "10000px"
    });
    const increaseVisible = (0,use_debounce__WEBPACK_IMPORTED_MODULE_3__.useDebouncedCallback)(()=>{
        setVisible(Math.min(visible + 100, urls?.length));
    }, 250);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if (inView) increaseVisible();
    }, [
        inView,
        increaseVisible
    ]);
    const { 0: visible , 1: setVisible  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(100);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("h2", {
                className: "image-title",
                children: strValue
            }),
            urls ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "canvas-grid",
                children: [
                    urls.slice(0, visible).map((x, i)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_Modals_DialogueModalContainer_client__WEBPACK_IMPORTED_MODULE_5__["default"], {
                            tabIndex: i,
                            toggleElement: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_CanvasWrapper_client__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
                                url: x,
                                drawImage: drawImage,
                                dgid: dgid,
                                filterLabels: filterLabels,
                                scoreBound: scoreBound,
                                index: i
                            }),
                            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(ImageCanvas, {
                                url: x,
                                dgid: dgid,
                                assetId: new URL(x).searchParams.get("assetId")
                            })
                        }, x)),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                        style: {
                            width: "100%"
                        },
                        ref: ref
                    })
                ]
            }) : /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_Canvas_client__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
                url: url,
                drawImage: drawImage,
                assetId: assetId,
                dgid: dgid,
                scoreBound: scoreBound
            })
        ]
    });
};
// TODO Simplify this component + move subcomponents/lib functions out
function computeScale(canvasWidth, canvasHeight, width, height) {
    if (width > height) {
        if (width < canvasWidth) {
            return Math.max(width / canvasWidth, canvasWidth / width);
        } else {
            return Math.min(width / canvasWidth, canvasWidth / width);
        }
    } else {
        if (height < canvasHeight) {
            return Math.max(height / canvasHeight, canvasHeight / height);
        } else {
            return Math.min(height / canvasHeight, canvasHeight / height);
        }
    }
}
const Accordion = ({ label , children  })=>{
    const { 0: active , 1: setActive  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const toggleActive = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{
        setActive(!active);
    }, [
        active
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "accordion",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "accordion-label",
                onClick: toggleActive,
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                        className: "arrow"
                    }),
                    label
                ]
            }),
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                className: `accordion-content ${active ? "active" : ""}`,
                children: children
            })
        ]
    });
};
const ImageCanvas = ({ url , inheritedMetadata , dgid , assetId , urls  })=>{
    // This is the full image, not thumbnail
    const metadata = (0,_lib_useMetadata__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(dgid, assetId, inheritedMetadata);
    const { 0: mask  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();
    const { 0: smootheImage , 1: setSmootheImage  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);
    const { 0: grayscale , 1: setGrayscale  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const { 0: invert  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const { 0: imageAlpha  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1.0);
    const { 0: overlayAlpha  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1.0);
    const { 0: scoreRange , 1: setScoreRange  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({
        min: 0,
        max: 1
    });
    const { 0: scoreBound , 1: setScoreBound  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();
    const { 0: hiddenLabels , 1: setHiddenLabels  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());
    const [canvasWidth, canvasHeight] = [
        400,
        400
    ];
    const { 0: canvasScale , 1: setCanvasScale  } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1.0);
    const isMulti = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>!!urls?.length, [
        urls
    ]);
    const scoreRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();
    const updateSmoothing = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((value)=>{
        // checkbox is for pixelated, so true means not smoothe:
        setSmootheImage(!value.target.checked);
    }, []);
    const updateGrayscale = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((value)=>{
        setGrayscale(value.target.checked);
    }, []);
    const updateCanvasScale = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((value)=>{
        setCanvasScale(value.target.value);
    }, []);
    const updateScoreBound = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((value)=>{
        setScoreBound(value.target.value);
    }, []);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        scoreRef.current.min = scoreRange.min;
        scoreRef.current.max = scoreRange.max;
    }, [
        scoreRange
    ]);
    const filterLabels = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((filtered)=>{
        const newLabels = new Set(hiddenLabels);
        filtered?.forEach((label)=>{
            if (!newLabels.has(label)) newLabels.add(label);
        });
        setHiddenLabels(newLabels);
    }, [
        hiddenLabels
    ]);
    const drawImage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((canvas, image, meta, filtered)=>{
        if (!meta) return;
        const ctx = canvas.current.getContext("2d");
        const imageScale = computeScale(canvasWidth * canvasScale, canvasHeight * canvasScale, image.current.naturalWidth, image.current.naturalHeight);
        canvas.current.width = image.current.naturalWidth * imageScale;
        canvas.current.height = image.current.naturalHeight * imageScale;
        ctx.clearRect(0, 0, canvas.current.width, canvas.current.height);
        ctx.globalAlpha = imageAlpha;
        // Handle masks as you draw the image
        if (mask) {
            // Assumes same size as Image:
            ctx.drawImage(mask, 0, 0, image.current.width * imageScale, image.current.height * imageScale);
            ctx.globalCompositeOperation = "source-in";
        // White is masked area; other will shine through
        }
        // Now draw the image
        ctx.imageSmoothingEnabled = smootheImage;
        ctx.drawImage(image.current, 0, 0, image.current.width * imageScale, image.current.height * imageScale);
        if (grayscale) {
            const imageData = ctx.getImageData(0, 0, canvas.current.width, canvas.current.height);
            const data = imageData.data;
            for(let i = 0; i < data.length; i += 4){
                const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
                data[i] = avg; // red
                data[i + 1] = avg; // green
                data[i + 2] = avg; // blue
            }
            ctx.putImageData(imageData, 0, 0);
        }
        if (invert) {
            const imageData1 = ctx.getImageData(0, 0, canvas.current.width, canvas.current.height);
            const data1 = imageData1.data;
            for(let i1 = 0; i1 < data1.length; i1 += 4){
                data1[i1] = 255 - data1[i1]; // red
                data1[i1 + 1] = 255 - data1[i1 + 1]; // green
                data1[i1 + 2] = 255 - data1[i1 + 2]; // blue
            }
            ctx.putImageData(imageData1, 0, 0);
        }
        if (meta?.overlays) {
            ctx.globalAlpha = overlayAlpha;
            for(let reg = 0; reg < meta?.overlays.length; reg++){
                if (filtered.includes(meta.overlays[reg]?.label)) continue;
                if (meta.overlays[reg]?.score) {
                    const score = meta.overlays[reg].score;
                    // Update the score range, if appropriate
                    if (scoreRange.min > score) setScoreRange({
                        ...scoreRange,
                        min: score
                    });
                    if (scoreRange.max < score) setScoreRange({
                        ...scoreRange,
                        max: score
                    });
                    // Filter labels outside of range. For multi-view, the individual canvas does this
                    if (!isMulti && scoreBound > score) removeLabel(meta.overlays[reg].label);
                }
                if (meta?.overlays[reg].type === "regions") {
                    const regions = meta?.overlays[reg].data;
                    if (!hiddenLabels.has(meta?.overlays[reg].label)) {
                        for(let r = 0; r < regions.length; r++){
                            const region = regions[r];
                            ctx.fillStyle = (0,_lib_generateChartColor__WEBPACK_IMPORTED_MODULE_9__/* .getColor */ .Lq)(meta?.overlays[reg].label);
                            ctx.beginPath();
                            ctx.moveTo(region[0] * imageScale, region[1] * imageScale);
                            for(let i2 = 2; i2 < region.length; i2 += 2){
                                ctx.lineTo(region[i2] * imageScale, region[i2 + 1] * imageScale);
                            }
                            ctx.closePath();
                            ctx.fill();
                        }
                    }
                } else if (meta?.overlays[reg].type === "boxes") {
                    const boxes = meta?.overlays[reg].data;
                    if (!hiddenLabels.has(meta?.overlays[reg].label)) {
                        for(let r1 = 0; r1 < boxes.length; r1++){
                            const [[x1, y1], [x2, y2]] = boxes[r1];
                            ctx.strokeStyle = (0,_lib_generateChartColor__WEBPACK_IMPORTED_MODULE_9__/* .getColor */ .Lq)(meta?.overlays[reg].label);
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.moveTo(x1 * imageScale, y1 * imageScale);
                            ctx.lineTo(x2 * imageScale, y1 * imageScale);
                            ctx.lineTo(x2 * imageScale, y2 * imageScale);
                            ctx.lineTo(x1 * imageScale, y2 * imageScale);
                            ctx.closePath();
                            ctx.stroke();
                        }
                    }
                } else if (meta?.overlays[reg].type === "annotations") {
                // FIXME: text, anchor, points
                }
            }
        }
    }, [
        mask,
        grayscale,
        invert,
        canvasScale,
        hiddenLabels,
        smootheImage,
        removeLabel,
        scoreBound,
        canvasHeight,
        canvasWidth,
        imageAlpha,
        isMulti,
        overlayAlpha,
        scoreRange, 
    ]);
    const addLabel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((label)=>{
        const newLabels = new Set(hiddenLabels);
        if (newLabels.has(label)) newLabels.delete(label);
        setHiddenLabels(newLabels);
    }, [
        hiddenLabels
    ]);
    const removeLabel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((label)=>{
        const newLabels = new Set(hiddenLabels);
        if (!newLabels.has(label)) newLabels.add(label);
        setHiddenLabels(newLabels);
    }, [
        hiddenLabels
    ]);
    const formattedLabels = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{
        if (!metadata?.labels) return null;
        // TODO: Remove when all DGs are updated. Old DGs used a raw array data structure for labels.
        if (Array.isArray(metadata?.labels)) return metadata?.labels.sort();
        return Object.keys(metadata?.labels).sort();
    }, [
        metadata
    ]);
    const strValue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>metadata?.name || metadata?.filename || assetId, [
        metadata,
        assetId
    ]);
    const displayMeta = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{
        if (!metadata || isMulti) return null;
        if (!metadata?.overlays) return metadata;
        const { ...display } = metadata;
        return display;
    }, [
        metadata,
        isMulti
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if (metadata?.overlays && !!scoreBound) {
            let newHiddenLabels = new Set(hiddenLabels);
            for (const overlay of metadata?.overlays || {}){
                if (overlay?.score) {
                    if (overlay?.score <= scoreBound) {
                        newHiddenLabels.add(overlay?.label);
                    }
                    if (overlay?.score > scoreBound && newHiddenLabels.has(overlay?.label)) {
                        newHiddenLabels.delete(overlay?.label);
                    }
                }
            }
            if (hiddenLabels.size !== newHiddenLabels.size || ![
                ...hiddenLabels
            ].every((value)=>newHiddenLabels.has(value))) {
                setHiddenLabels(newHiddenLabels);
            }
        }
    }, [
        metadata,
        scoreBound,
        hiddenLabels
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "editor-container",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "left-column",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                        className: "image-controls",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                className: "checkbox",
                                children: [
                                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("input", {
                                        type: "checkbox",
                                        className: "image-smoothing-checkbox",
                                        id: "image-smoothing",
                                        onChange: updateSmoothing
                                    }),
                                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("label", {
                                        htmlFor: "image-smoothing",
                                        className: "checkbox-label",
                                        children: "Pixelated"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                className: "checkbox",
                                children: [
                                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("input", {
                                        type: "checkbox",
                                        className: "grayscale-checkbox",
                                        id: "grayscale",
                                        onChange: updateGrayscale
                                    }),
                                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("label", {
                                        htmlFor: "grayscale",
                                        className: "checkbox-label",
                                        children: "Grayscale"
                                    })
                                ]
                            }),
                            !isMulti && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                className: "slider-container",
                                children: [
                                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                        className: "zoom-label",
                                        children: "Zoom:"
                                    }),
                                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("input", {
                                        type: "range",
                                        min: "1",
                                        max: "5",
                                        defaultValue: `${canvasScale}`,
                                        className: "zoom-slider",
                                        id: "zoom-slide",
                                        onChange: updateCanvasScale,
                                        step: "0.01"
                                    })
                                ]
                            })
                        ]
                    }),
                    displayMeta && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                        className: "metadata-control",
                        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(Accordion, {
                            label: "Metadata",
                            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("pre", {
                                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("code", {
                                    children: JSON.stringify(displayMeta, null, 4)
                                })
                            })
                        })
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                        className: "score-control",
                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                            className: "slider-container",
                            children: [
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                    className: "zoom-label",
                                    children: "Score:"
                                }),
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("input", {
                                    type: "range",
                                    ref: scoreRef,
                                    min: "0",
                                    max: "1",
                                    defaultValue: "0",
                                    className: "zoom-slider",
                                    id: "zoom-slide",
                                    step: "0.001",
                                    onChange: updateScoreBound
                                })
                            ]
                        })
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                        className: "labels-container",
                        children: !!formattedLabels && formattedLabels.map((label)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_Label_client__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
                                label: label,
                                hidden: hiddenLabels.has(label),
                                addLabel: addLabel,
                                removeLabel: removeLabel
                            }))
                    })
                ]
            }),
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                className: `right-column ${isMulti && "multi-canvas"}`,
                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(CanvasContainer, {
                    urls: urls,
                    url: url,
                    dgid: dgid,
                    assetId: assetId,
                    isMulti: isMulti,
                    drawImage: drawImage,
                    filterLabels: filterLabels,
                    scoreBound: scoreBound,
                    strValue: strValue
                })
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ImageCanvas);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./components/Cells/Image/Label.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_generateChartColor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./lib/generateChartColor.js");



const Label = ({ label , hidden , addLabel , removeLabel  })=>{
    // TODO: Use something a bit more standard for classes
    const classes = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{
        if (hidden) return "badge badge-label badge-disabled";
        return "badge badge-label";
    }, [
        hidden
    ]);
    const background = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{
        return (0,_lib_generateChartColor__WEBPACK_IMPORTED_MODULE_2__/* .getColor */ .Lq)(label);
    }, [
        label
    ]);
    const font = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{
        return (0,_lib_generateChartColor__WEBPACK_IMPORTED_MODULE_2__/* .getContrastingColor */ .Qg)((0,_lib_generateChartColor__WEBPACK_IMPORTED_MODULE_2__/* .getColor */ .Lq)(label));
    }, [
        label
    ]);
    const node = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();
    const click = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{
        if (!addLabel || !removeLabel) return;
        if (hidden) addLabel(label);
        else removeLabel(label);
    }, [
        hidden,
        label,
        addLabel,
        removeLabel
    ]);
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
        ref: node,
        className: classes,
        style: {
            backgroundColor: background,
            color: font
        },
        onClick: click,
        children: `${label}`
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Label);


/***/ }),

/***/ "./components/DeferredCell.client.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intersection_observer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("react-intersection-observer");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_intersection_observer__WEBPACK_IMPORTED_MODULE_1__]);
react_intersection_observer__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];


const DeferredCell = ({ children  })=>{
    const { ref , inView , entry  } = (0,react_intersection_observer__WEBPACK_IMPORTED_MODULE_1__.useInView)({
        threshold: 0,
        rootMargin: "1000px"
    });
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
        ref: ref,
        children: inView && children
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DeferredCell);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./components/Modals/DialogueModalContainer.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ DialogueModalContainer_client)
});

// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__("react/jsx-runtime");
// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__("react");
;// CONCATENATED MODULE: external "@mui/material/Dialog"
const Dialog_namespaceObject = require("@mui/material/Dialog");
var Dialog_default = /*#__PURE__*/__webpack_require__.n(Dialog_namespaceObject);
;// CONCATENATED MODULE: ./components/Modals/DialogueModalContainer.client.js


/*
const Dialogue = dynamic(() => import('@mui/material/Dialog'), {
    ssr: false
});*/ 
const DialogueModalContainer = ({ toggleElement , children , sx , tabIndex , fullScreen =false  })=>{
    const { 0: open , 1: setOpen  } = (0,external_react_.useState)(false);
    const toggleOpen = (0,external_react_.useCallback)(()=>setOpen(!open), [
        open
    ]);
    const openModal = (0,external_react_.useCallback)(()=>{
        if (!open) setOpen(true);
    }, [
        open
    ]);
    if (!toggleElement) {
        return /*#__PURE__*/ jsx_runtime_.jsx("div", {
            onClick: openModal,
            style: {
                height: "100%",
                width: "100%",
                opacity: "0",
                cursor: "pointer"
            },
            tabIndex: tabIndex,
            children: /*#__PURE__*/ jsx_runtime_.jsx((Dialog_default()), {
                open: open,
                fullScreen: fullScreen,
                onClose: toggleOpen,
                sx: sx,
                children: children
            })
        });
    }
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                tabIndex: tabIndex,
                onClick: openModal,
                children: toggleElement
            }),
            /*#__PURE__*/ jsx_runtime_.jsx((Dialog_default()), {
                open: open,
                fullScreen: fullScreen,
                onClose: toggleOpen,
                sx: sx,
                children: children
            })
        ]
    });
};
/* harmony default export */ const DialogueModalContainer_client = (DialogueModalContainer);


/***/ }),

/***/ "./components/SettingsBar/Imports.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/next/dynamic.js");
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_1__);

// This is a very hacky way to load Plotly early

const Plot = next_dynamic__WEBPACK_IMPORTED_MODULE_1___default()(null, {
    loadableGenerated: {
        modules: [
            "../components/SettingsBar/Imports.client.js -> " + "react-plotly.js"
        ]
    },
    ssr: false
});
const Imports = ()=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
        style: {
            display: "none"
        },
        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(Plot, {
            data: [
                {
                    x: [
                        1,
                        2,
                        3
                    ],
                    y: [
                        2,
                        6,
                        3
                    ],
                    type: "scatter",
                    mode: "lines+markers",
                    marker: {
                        color: "red"
                    }
                },
                {
                    type: "bar",
                    x: [
                        1,
                        2,
                        3
                    ],
                    y: [
                        2,
                        5,
                        3
                    ]
                }, 
            ],
            layout: {
                width: 320,
                height: 240,
                title: "A Fancy Plot"
            }
        })
    });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Imports);


/***/ }),

/***/ "./components/SettingsBar/MatrixSelect.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ MatrixSelect_client)
});

// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__("react/jsx-runtime");
// EXTERNAL MODULE: external "next/streaming"
var streaming_ = __webpack_require__("next/streaming");
// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__("react");
// EXTERNAL MODULE: external "react-select"
var external_react_select_ = __webpack_require__("react-select");
var external_react_select_default = /*#__PURE__*/__webpack_require__.n(external_react_select_);
;// CONCATENATED MODULE: ./lib/defaultQuery.js
const DEFAULT_QUERY = {
    dgid: null,
    limit: 10,
    offset: 0
};
/* harmony default export */ const defaultQuery = (DEFAULT_QUERY);

;// CONCATENATED MODULE: ./components/SettingsBar/MatrixSelect.client.js




// Util

// Ideally, we wouldn't need to import a third-party library for a select component here,
// but native select components are annoying to style
const MatrixSelect = ({ query , options  })=>{
    const refresh = (0,streaming_.unstable_useRefreshRoot)();
    const customStyles = {
        menuPortal: (provided)=>({
                ...provided,
                zIndex: 9999
            }),
        menu: (provided)=>({
                ...provided,
                zIndex: 9999
            })
    };
    // FIXME: don't use endsWith, but something smarter
    return /*#__PURE__*/ jsx_runtime_.jsx((external_react_select_default()), {
        id: "matrix-select-pulldown",
        defaultValue: options.find((item)=>item.value.endsWith(query?.dgid)) || "",
        options: options,
        styles: customStyles,
        onChange: (e)=>{
            refresh({
                query: {
                    ...defaultQuery,
                    dgid: e.value
                }
            });
        }
    });
};
/* harmony default export */ const MatrixSelect_client = (MatrixSelect);


/***/ }),

/***/ "./components/SettingsBar/Paging.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./config.js");
/* harmony import */ var next_streaming__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("next/streaming");
/* harmony import */ var next_streaming__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_streaming__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);




const Paging = ({ query , pagination , total  })=>{
    const refresh = (0,next_streaming__WEBPACK_IMPORTED_MODULE_2__.unstable_useRefreshRoot)();
    const max = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>Math.ceil(total / query?.limit), [
        total,
        query?.limit
    ]);
    const pageInput = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)();
    const changePage = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((page)=>{
        const offset = (page - 1) * query?.limit;
        if (offset < 0 || offset === query?.offset || page - 1 >= total / query?.limit) return;
        refresh({
            query: {
                ...query,
                offset
            }
        });
    }, [
        query
    ]);
    const enter = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((e)=>{
        if (e?.keyCode === 13 || e?.code === "Enter") {
            const page = parseInt(e.target.value);
            if (page) changePage(page);
        }
    }, [
        changePage
    ]);
    const currentPage = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>{
        if (!query?.offset) return 1;
        const ratio = Math.ceil(query?.offset / query?.limit);
        return ratio + 1;
    }, [
        query
    ]);
    const pageForward = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(()=>{
        changePage(currentPage + 1);
    }, [
        currentPage,
        changePage
    ]);
    const pageBack = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(()=>{
        changePage(currentPage - 1);
    }, [
        currentPage,
        changePage
    ]);
    const rowsMessage = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>{
        if (!total) return "No matching rows";
        if (total === 1) return "Showing 1 matching row";
        if (pagination?.length > 1) {
            const startRow = ((query?.offset || 0) + 1).toLocaleString(_config__WEBPACK_IMPORTED_MODULE_1__/* ["default"].locale */ .Z.locale);
            const endRow = Math.min((query?.offset || 0) + query?.limit, total).toLocaleString(_config__WEBPACK_IMPORTED_MODULE_1__/* ["default"].locale */ .Z.locale);
            return `Showing ${startRow} - ${endRow} rows of ${total.toLocaleString(_config__WEBPACK_IMPORTED_MODULE_1__/* ["default"].locale */ .Z.locale)}`;
        }
        return `Showing all matching rows`;
    }, [
        total,
        _config__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z,
        query,
        pagination
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{
        if (pageInput?.current) pageInput.current.value = currentPage;
    }, [
        currentPage
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "pagination",
        children: [
            `${rowsMessage} `,
            pagination.length > 1 && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                children: [
                    "Page:",
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                        style: {
                            cursor: "pointer"
                        },
                        onClick: ()=>changePage(1),
                        children: ` |< `
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                        style: {
                            cursor: "pointer"
                        },
                        onClick: pageBack,
                        children: `<`
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("input", {
                        type: "text",
                        inputMode: "numeric",
                        pattern: "[0-9]*",
                        onKeyDown: (e)=>enter(e),
                        ref: pageInput,
                        defaultValue: currentPage,
                        style: {
                            width: "50px",
                            margin: "0 8px",
                            textAlign: "center",
                            fontSize: "12px",
                            fontWeight: "500"
                        }
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                        style: {
                            cursor: "pointer"
                        },
                        onClick: pageForward,
                        children: `> `
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                        style: {
                            cursor: "pointer"
                        },
                        onClick: ()=>changePage(Math.ceil(total / query?.limit)),
                        children: `>|`
                    })
                ]
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Paging);


/***/ }),

/***/ "./components/SettingsBar/RefreshButton.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ RefreshButton_client)
});

// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__("react/jsx-runtime");
;// CONCATENATED MODULE: external "@mui/icons-material/Cached"
const Cached_namespaceObject = require("@mui/icons-material/Cached");
var Cached_default = /*#__PURE__*/__webpack_require__.n(Cached_namespaceObject);
// EXTERNAL MODULE: ./node_modules/next/dist/client/streaming/refresh.js
var streaming_refresh = __webpack_require__("./node_modules/next/dist/client/streaming/refresh.js");
// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__("react");
;// CONCATENATED MODULE: ./components/SettingsBar/RefreshButton.client.js




const RefreshButton = ({ query  })=>{
    const refresh = (0,streaming_refresh.useRefreshRoot)();
    // This is not memoized because we need Date.now() to be current when fired
    const clearCache = ()=>{
        refresh({
            query,
            expiration: Date.now()
        });
    };
    return /*#__PURE__*/ jsx_runtime_.jsx((Cached_default()), {
        className: "cached-icon",
        onClick: clearCache
    });
};
/* harmony default export */ const RefreshButton_client = (RefreshButton);


/***/ }),

/***/ "./components/SettingsBar/SelectRow.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ SelectRow_client)
});

// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__("react/jsx-runtime");
// EXTERNAL MODULE: ./components/Modals/DialogueModalContainer.client.js + 1 modules
var DialogueModalContainer_client = __webpack_require__("./components/Modals/DialogueModalContainer.client.js");
// EXTERNAL MODULE: external "next/streaming"
var streaming_ = __webpack_require__("next/streaming");
// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__("react");
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);
;// CONCATENATED MODULE: external "prop-types"
const external_prop_types_namespaceObject = require("prop-types");
var external_prop_types_default = /*#__PURE__*/__webpack_require__.n(external_prop_types_namespaceObject);
;// CONCATENATED MODULE: external "textarea-caret"
const external_textarea_caret_namespaceObject = require("textarea-caret");
var external_textarea_caret_default = /*#__PURE__*/__webpack_require__.n(external_textarea_caret_namespaceObject);
;// CONCATENATED MODULE: external "get-input-selection"
const external_get_input_selection_namespaceObject = require("get-input-selection");
var external_get_input_selection_default = /*#__PURE__*/__webpack_require__.n(external_get_input_selection_namespaceObject);
// EXTERNAL MODULE: external "@mui/material"
var material_ = __webpack_require__("@mui/material");
;// CONCATENATED MODULE: ./components/SettingsBar/ReactAutocomplete.client.js

/*
TODO: Implement this without react-autocomplete-input
*/ // Forked/modified from https://github.com/yury-dymov/react-autocomplete-input/blob/master/src/AutoCompleteTextField.js





const FilterButton = ({ callback  })=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "button-outline",
        onClick: callback,
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("img", {
                src: "/filter_placeholder.png"
            }),
            " ",
            /*#__PURE__*/ jsx_runtime_.jsx("span", {
                children: "Filter"
            })
        ]
    });
const KEY_UP = 38;
const KEY_DOWN = 40;
const KEY_RETURN = 13;
const KEY_ENTER = 14;
const KEY_ESCAPE = 27;
const KEY_TAB = 9;
const OPTION_LIST_Y_OFFSET = 10;
const OPTION_LIST_MIN_WIDTH = 100;
const propTypes = {
    applyFilter: (external_prop_types_default()).func,
    onKeyPress: (external_prop_types_default()).func,
    defaultValue: (external_prop_types_default()).string,
    disabled: (external_prop_types_default()).bool,
    maxOptions: (external_prop_types_default()).number,
    onBlur: (external_prop_types_default()).func,
    onChange: (external_prop_types_default()).func,
    onKeyDown: (external_prop_types_default()).func,
    onRequestOptions: (external_prop_types_default()).func,
    onSelect: (external_prop_types_default()).func,
    changeOnSelect: (external_prop_types_default()).func,
    options: external_prop_types_default().oneOfType([
        (external_prop_types_default()).object,
        external_prop_types_default().arrayOf((external_prop_types_default()).string), 
    ]),
    regex: (external_prop_types_default()).string,
    matchAny: (external_prop_types_default()).bool,
    minChars: (external_prop_types_default()).number,
    requestOnlyIfNoOptions: (external_prop_types_default()).bool,
    spaceRemovers: external_prop_types_default().arrayOf((external_prop_types_default()).string),
    spacer: (external_prop_types_default()).string,
    trigger: external_prop_types_default().oneOfType([
        (external_prop_types_default()).string,
        external_prop_types_default().arrayOf((external_prop_types_default()).string), 
    ]),
    value: (external_prop_types_default()).string,
    offsetX: (external_prop_types_default()).number,
    offsetY: (external_prop_types_default()).number,
    passThroughEnter: (external_prop_types_default()).bool,
    refInput: external_prop_types_default().shape({
        current: (external_prop_types_default()).any
    })
};
const defaultProps = {
    Component: material_.TextField,
    defaultValue: "",
    disabled: false,
    maxOptions: 6,
    onBlur: ()=>{},
    onChange: ()=>{},
    onKeyDown: ()=>{},
    onRequestOptions: ()=>{},
    onSelect: ()=>{},
    changeOnSelect: (trigger, slug)=>trigger + slug,
    options: [],
    regex: "^[A-Za-z0-9\\-_]+$",
    matchAny: false,
    minChars: 0,
    requestOnlyIfNoOptions: true,
    spaceRemovers: [
        ",",
        ".",
        "!",
        "?"
    ],
    spacer: " ",
    trigger: "@",
    offsetX: 0,
    offsetY: 0,
    value: null,
    passThroughEnter: false
};
class AutocompleteTextField extends (external_react_default()).Component {
    constructor(props){
        super(props);
        this.isTrigger = this.isTrigger.bind(this);
        this.arrayTriggerMatch = this.arrayTriggerMatch.bind(this);
        this.getMatch = this.getMatch.bind(this);
        this.handleChange = this.handleChange.bind(this);
        this.handleKeyDown = this.handleKeyDown.bind(this);
        this.handleResize = this.handleResize.bind(this);
        this.handleSelection = this.handleSelection.bind(this);
        this.updateCaretPosition = this.updateCaretPosition.bind(this);
        this.updateHelper = this.updateHelper.bind(this);
        this.resetHelper = this.resetHelper.bind(this);
        this.renderAutocompleteList = this.renderAutocompleteList.bind(this);
        this.state = {
            helperVisible: false,
            left: 0,
            trigger: null,
            matchLength: 0,
            matchStart: 0,
            options: [],
            selection: 0,
            top: 0,
            value: null
        };
        this.recentValue = props.defaultValue;
        this.enableSpaceRemovers = false;
        this.refInput = props.refInput;
    }
    componentDidMount() {
        window.addEventListener("resize", this.handleResize);
    }
    componentDidUpdate(prevProps) {
        const { options  } = this.props;
        const { caret  } = this.state;
        if (options.length !== prevProps.options.length) {
            this.updateHelper(this.recentValue, caret, options);
        }
    }
    componentWillUnmount() {
        window.removeEventListener("resize", this.handleResize);
    }
    getMatch(str, caret, providedOptions) {
        const { trigger , matchAny , regex  } = this.props;
        const re = new RegExp(regex);
        let triggers = trigger;
        if (!Array.isArray(triggers)) {
            triggers = new Array(trigger);
        }
        triggers.sort();
        const providedOptionsObject = providedOptions;
        if (Array.isArray(providedOptions)) {
            triggers.forEach((triggerStr)=>{
                providedOptionsObject[triggerStr] = providedOptions;
            });
        }
        const triggersMatch = this.arrayTriggerMatch(triggers, re);
        let slugData = null;
        for(let triggersIndex = 0; triggersIndex < triggersMatch.length; triggersIndex++){
            const { triggerStr , triggerMatch , triggerLength  } = triggersMatch[triggersIndex];
            for(let i = caret - 1; i >= 0; --i){
                const substr = str.substring(i, caret);
                const match = substr.match(re);
                let matchStart = -1;
                if (triggerLength > 0) {
                    const triggerIdx = triggerMatch ? i : i - triggerLength + 1;
                    if (triggerIdx < 0) {
                        break;
                    }
                    if (this.isTrigger(triggerStr, str, triggerIdx)) {
                        matchStart = triggerIdx + triggerLength;
                    }
                    if (!match && matchStart < 0) {
                        break;
                    }
                } else {
                    if (match && i > 0) {
                        continue;
                    }
                    matchStart = i === 0 && match ? 0 : i + 1;
                    if (caret - matchStart === 0) {
                        break;
                    }
                }
                if (matchStart >= 0) {
                    const triggerOptions = providedOptionsObject[triggerStr];
                    if (triggerOptions == null) {
                        continue;
                    }
                    const matchedSlug = str.substring(matchStart, caret);
                    const options = triggerOptions.filter((slug)=>{
                        const idx = slug.toLowerCase().indexOf(matchedSlug.toLowerCase());
                        return idx !== -1 && (matchAny || idx === 0);
                    });
                    const currTrigger = triggerStr;
                    const matchLength = matchedSlug.length;
                    if (slugData === null) {
                        slugData = {
                            trigger: currTrigger,
                            matchStart,
                            matchLength,
                            options
                        };
                    } else {
                        slugData = {
                            ...slugData,
                            trigger: currTrigger,
                            matchStart,
                            matchLength,
                            options
                        };
                    }
                }
            }
        }
        return slugData;
    }
    arrayTriggerMatch(triggers, re) {
        const triggersMatch = triggers.map((trigger)=>({
                triggerStr: trigger,
                triggerMatch: trigger.match(re),
                triggerLength: trigger.length
            }));
        return triggersMatch;
    }
    isTrigger(trigger, str, i) {
        if (!trigger || !trigger.length) {
            return true;
        }
        if (str.substr(i, trigger.length) === trigger) {
            return true;
        }
        return false;
    }
    handleChange(e) {
        const { onChange , options , spaceRemovers , spacer , value ,  } = this.props;
        const old = this.recentValue;
        const str = e.target.value;
        const caret = external_get_input_selection_default()(e.target).end;
        if (!str.length) {
            this.setState({
                helperVisible: false
            });
        }
        this.recentValue = str;
        this.setState({
            caret,
            value: e.target.value
        });
        if (!str.length || !caret) {
            return onChange(e.target.value);
        }
        // '@wonderjenny ,|' -> '@wonderjenny, |'
        if (this.enableSpaceRemovers && spaceRemovers.length && str.length > 2 && spacer.length) {
            for(let i = 0; i < Math.max(old.length, str.length); ++i){
                if (old[i] !== str[i]) {
                    if (i >= 2 && str[i - 1] === spacer && spaceRemovers.indexOf(str[i - 2]) === -1 && spaceRemovers.indexOf(str[i]) !== -1 && this.getMatch(str.substring(0, i - 2), caret - 3, options)) {
                        const newValue = `${str.slice(0, i - 1)}${str.slice(i, i + 1)}${str.slice(i - 1, i)}${str.slice(i + 1)}`;
                        this.updateCaretPosition(i + 1);
                        this.refInput.current.value = newValue;
                        if (!value) {
                            this.setState({
                                value: newValue
                            });
                        }
                        return onChange(newValue);
                    }
                    break;
                }
            }
            this.enableSpaceRemovers = false;
        }
        this.updateHelper(str, caret, options);
        if (!value) {
            this.setState({
                value: e.target.value
            });
        }
        return onChange(e.target.value);
    }
    handleKeyDown(event) {
        const { helperVisible , options , selection  } = this.state;
        const { onKeyDown , passThroughEnter  } = this.props;
        if (helperVisible) {
            switch(event.keyCode){
                case KEY_ESCAPE:
                    event.preventDefault();
                    this.resetHelper();
                    break;
                case KEY_UP:
                    event.preventDefault();
                    this.setState({
                        selection: (options.length + selection - 1) % options.length
                    });
                    break;
                case KEY_DOWN:
                    event.preventDefault();
                    this.setState({
                        selection: (selection + 1) % options.length
                    });
                    break;
                case KEY_ENTER:
                case KEY_RETURN:
                    if (!passThroughEnter) {
                        event.preventDefault();
                    }
                    this.handleSelection(selection);
                    break;
                case KEY_TAB:
                    this.handleSelection(selection);
                    break;
                default:
                    onKeyDown(event);
                    break;
            }
        } else {
            onKeyDown(event);
        }
    }
    handleResize() {
        this.setState({
            helperVisible: false
        });
    }
    handleSelection(idx) {
        const { spacer , onSelect , changeOnSelect  } = this.props;
        const { matchStart , matchLength , options , trigger ,  } = this.state;
        const slug = options[idx];
        const value = this.recentValue;
        const part1 = trigger.length === 0 ? "" : value.substring(0, matchStart - trigger.length);
        const part2 = value.substring(matchStart + matchLength);
        const event = {
            target: this.refInput.current
        };
        const changedStr = changeOnSelect(trigger, slug);
        event.target.value = `${part1}${changedStr}${spacer}${part2}`;
        this.handleChange(event);
        onSelect(event.target.value);
        this.resetHelper();
        this.updateCaretPosition(part1.length + changedStr.length + 1);
        this.enableSpaceRemovers = true;
    }
    updateCaretPosition(caret) {
        this.setState({
            caret
        }, ()=>(0,external_get_input_selection_namespaceObject.setCaretPosition)(this.refInput.current, caret));
    }
    updateHelper(str, caret, options) {
        const input = this.refInput.current;
        const slug = this.getMatch(str, caret, options);
        if (slug) {
            const caretPos = external_textarea_caret_default()(input, caret);
            const rect = input.getBoundingClientRect();
            const top = caretPos.top + input.offsetTop;
            const left = Math.min(caretPos.left + input.offsetLeft - OPTION_LIST_Y_OFFSET, input.offsetLeft + rect.width - OPTION_LIST_MIN_WIDTH);
            const { minChars , onRequestOptions , requestOnlyIfNoOptions  } = this.props;
            if (slug.matchLength >= minChars && (slug.options.length > 1 || slug.options.length === 1 && (slug.options[0].length !== slug.matchLength || slug.options[0].length === 1))) {
                this.setState({
                    helperVisible: true,
                    top,
                    left,
                    ...slug
                });
            } else {
                if (!requestOnlyIfNoOptions || !slug.options.length) {
                    onRequestOptions(str.substr(slug.matchStart, slug.matchLength));
                }
                this.resetHelper();
            }
        } else {
            this.resetHelper();
        }
    }
    resetHelper() {
        this.setState({
            helperVisible: false,
            selection: 0
        });
    }
    renderAutocompleteList() {
        const { helperVisible , left , matchStart , matchLength , options , selection , top , value ,  } = this.state;
        if (!helperVisible) {
            return null;
        }
        const { maxOptions , offsetX , offsetY  } = this.props;
        if (options.length === 0) {
            return null;
        }
        if (selection >= options.length) {
            this.setState({
                selection: 0
            });
            return null;
        }
        const optionNumber = maxOptions === 0 ? options.length : maxOptions;
        const helperOptions = options.slice(0, optionNumber).map((val, idx)=>{
            const highlightStart = val.toLowerCase().indexOf(value.substr(matchStart, matchLength).toLowerCase());
            return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                className: idx === selection ? "active" : null,
                onClick: ()=>{
                    this.handleSelection(idx);
                },
                onMouseEnter: ()=>{
                    this.setState({
                        selection: idx
                    });
                },
                children: [
                    val.slice(0, highlightStart),
                    /*#__PURE__*/ jsx_runtime_.jsx("strong", {
                        children: val.substr(highlightStart, matchLength)
                    }),
                    val.slice(highlightStart + matchLength)
                ]
            }, val);
        });
        return /*#__PURE__*/ jsx_runtime_.jsx("ul", {
            className: "react-autocomplete-input",
            style: {
                left: left + offsetX,
                top: top + offsetY
            },
            children: helperOptions
        });
    }
    render() {
        const { onKeyPress , applyFilter , defaultValue , disabled , onBlur , value , ...rest } = this.props;
        const { value: stateValue  } = this.state;
        const propagated = Object.assign({}, rest);
        Object.keys(propTypes).forEach((k)=>{
            delete propagated[k];
        });
        let val = "";
        if (typeof value !== "undefined" && value !== null) {
            val = value;
        } else if (stateValue !== null) {
            val = stateValue;
        } else if (defaultValue) {
            val = defaultValue;
        }
        return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
            style: {
                position: "relative ",
                display: "flex"
            },
            children: [
                /*#__PURE__*/ jsx_runtime_.jsx(material_.TextField, {
                    autoComplete: "off",
                    disabled: disabled,
                    onBlur: onBlur,
                    onChange: this.handleChange,
                    onKeyDown: this.handleKeyDown,
                    inputRef: this.refInput,
                    value: val,
                    InputProps: {
                        endAdornment: /*#__PURE__*/ jsx_runtime_.jsx(FilterButton, {
                            callback: applyFilter
                        }),
                        sx: {
                            fontSize: "13px",
                            width: "360px"
                        }
                    },
                    onKeyPress: onKeyPress,
                    ...propagated
                }),
                this.renderAutocompleteList()
            ]
        });
    }
}
AutocompleteTextField.propTypes = propTypes;
AutocompleteTextField.defaultProps = defaultProps;
/* harmony default export */ const ReactAutocomplete_client = (AutocompleteTextField);

;// CONCATENATED MODULE: external "@mui/material/InputAdornment"
const InputAdornment_namespaceObject = require("@mui/material/InputAdornment");
;// CONCATENATED MODULE: ./components/SettingsBar/HelpText.js

const HelpText = ()=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "markdown-body",
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                dir: "auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("b", {
                        children: "DataGrid filter expressions"
                    }),
                    " use Python syntax for selecting matching rows. To use the value of a column in the expression, enclosing the column name like ",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: '{"Column Name"}'
                    }),
                    ". Some examples:"
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: 'To select all of the rows that have a fitness score less than 0.1, given that you have a column named "Fitness":'
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "snippet-clipboard-content notranslate position-relative overflow-auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("pre", {
                        className: "notranslate",
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"fitness"} < 0.1'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "zeroclipboard-container position-absolute right-0 top-0"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: 'Note that the column name is case-insensitive (i.e., you can use any case of letters inside quotes). Column values can be used any where in the filter expression. For example, if you wanted to select all of the rows where column "Score 1" was greater than or equal to "Score 2", you would write:'
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "snippet-clipboard-content notranslate position-relative overflow-auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("pre", {
                        className: "notranslate",
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"score 1"} >= {"score 2"}'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "zeroclipboard-container position-absolute right-0 top-0"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "You can use any of Python's operators, including:"
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                dir: "auto",
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "<"
                            }),
                            " - less than"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "<="
                            }),
                            " - less than or equal"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: ">"
                            }),
                            " - greater than"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: ">="
                            }),
                            " - greater than or equal"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "=="
                            }),
                            " - equal to"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "!="
                            }),
                            " - not equal to"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "is"
                            }),
                            " - is the same (e.g., ",
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "is None"
                            }),
                            ")"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "is not"
                            }),
                            " - is not the same (e.g.",
                            " ",
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "is not None"
                            }),
                            ")"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "+"
                            }),
                            " - addition"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "-"
                            }),
                            " - subtraction"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "*"
                            }),
                            " - multiplication"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "/"
                            }),
                            " - division"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "//"
                            }),
                            " - integer division"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "**"
                            }),
                            " - raise to a power"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "not"
                            }),
                            " - flip the boolean value"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "in"
                            }),
                            " - is value in a list of values"
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "Also you can use Python's comparison operator chaining. That is, any of the above operators can be used in a shorthand way as follows:"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "snippet-clipboard-content notranslate position-relative overflow-auto",
                children: /*#__PURE__*/ jsx_runtime_.jsx("pre", {
                    className: "notranslate",
                    children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: '{"column a"} < {"column b"} < {"column c"}'
                    })
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "which is shorthand for:"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "snippet-clipboard-content notranslate position-relative overflow-auto",
                children: /*#__PURE__*/ jsx_runtime_.jsx("pre", {
                    className: "notranslate",
                    children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: '{"column a"} < {"column b"} and {"column b"} < {"column c"}'
                    })
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                dir: "auto",
                children: [
                    "Use ",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: "is None"
                    }),
                    " and ",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: "is not None"
                    }),
                    " for selecting rows that have null values. Otherwise, null values are ignored in most other uses."
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                dir: "auto",
                children: [
                    "You can combine comparisons using Python's ",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: "and"
                    }),
                    " and",
                    " ",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: "or"
                    }),
                    " (use parentheses to force evaluation order different from Python's defaults):"
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "snippet-clipboard-content notranslate position-relative overflow-auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("pre", {
                        className: "notranslate",
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '(({"loss"} - {"base line"}) < 0.5) or ({"loss"} > 0.95)'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "zeroclipboard-container position-absolute right-0 top-0"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("h3", {
                dir: "auto",
                children: "JSON attribute access"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "For JSON and metadata columns, you can use the dot operator to access values:"
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "snippet-clipboard-content notranslate position-relative overflow-auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("pre", {
                        className: "notranslate",
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Image"}.extension == "jpg"'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "zeroclipboard-container position-absolute right-0 top-0"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "or nested values:"
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "snippet-clipboard-content notranslate position-relative overflow-auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("pre", {
                        className: "notranslate",
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Image"}.labels.dog > 1'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("pre", {
                        className: "notranslate",
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Image"}.labels.dog and {"Image"}.labels.cat'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "zeroclipboard-container position-absolute right-0 top-0"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "The dotted-name path following a column of JSON data deviates from Python semantics. In addition, the path can only be use for nested dictionaries. If the JSON has a list, then you will not be able to use the dotted-name syntax. However, you can use Python's list comprehension, like these examples:"
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                dir: "auto",
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: 'any([x["label"] == \'dog\' for x in {"Image"}.overlays])'
                            }),
                            " - images with dogs"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: 'all([x["label"] == \'person\' for x in {"Image"}.overlays])'
                            }),
                            " - images with only people (no other labels)"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: 'any([x["label"] in ["car", "bicycle"] for x in {"Image"}.overlays])'
                            }),
                            " - images with cars or bicycles"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: 'any([x["label"] == "cat" or x["label"] == "dog" for x in {"Image"}.overlays])'
                            }),
                            " - images with dogs or cats"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: 'any([x["label"] == "cat" for x in {"Image"}.overlays]) and any([x["label"] == "dog" for x in {"Image"}.overlays])'
                            }),
                            " - images with dogs and cats"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: 'any([x["score"] > 0.999 for x in {"Image"}.overlays])'
                            }),
                            " - images with an annotation score greater than 0.999"
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "List comprehension also deviates slightly from standard Python semantics:"
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                dir: "auto",
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "[item for item in LIST]"
                            }),
                            " - same as Python (item is each element in the list)"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "[item for item in DICT]"
                            }),
                            " - item is the DICT"
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                dir: "auto",
                children: [
                    "Note that you will need to wrap the list comprehension in either",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: "any()"
                    }),
                    " or ",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: "all()"
                    }),
                    ". You can also use ",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: "flatten()"
                    }),
                    " around nested list comprehensions."
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "See below for more information on string and JSON methods."
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "Note that any mention of a column that contains an asset type (e.g., an image) will automatically reference its metadata."
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("h3", {
                dir: "auto",
                children: "Python String and JSON methods"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "These are mostly used with column values:"
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                dir: "auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: 'STRING in {"Column Name"}'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Column Name"}.endswith(STRING)'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Column Name"}.startswith(STRING)'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Column Name"}.strip()'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Column Name"}.lstrip()'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Column Name"}.rstrip()'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Column Name"}.upper()'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Column Name"}.lower()'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"Column Name"}.split(DELIM[, MAXSPLITS])'
                        })
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("h3", {
                dir: "auto",
                children: "Python if/else expression"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "You can use Python's if/else expression to return one value or another."
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "snippet-clipboard-content notranslate position-relative overflow-auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("pre", {
                        className: "notranslate",
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '("low" if {"loss"} < 0.5 else "high") == "low"'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "zeroclipboard-container position-absolute right-0 top-0"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("h3", {
                dir: "auto",
                children: "Python Builtin Functions"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "You can use any of these Python builtin functions:"
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                dir: "auto",
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "abs()"
                            }),
                            " - absolute value"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "round()"
                            }),
                            " - rounds to int"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "max(v1, v2, ...)"
                            }),
                            " or ",
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "max([v1, v2, ...])"
                            }),
                            " ",
                            "- maximum of list of values"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "min(v1, v2, ...)"
                            }),
                            " or ",
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "min([v1, v2, ...])"
                            }),
                            " ",
                            "- minimum of list of values"
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("code", {
                                children: "len()"
                            }),
                            " - length of item"
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("h3", {
                dir: "auto",
                children: "Aggregate Functions"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "You can use the following aggregate functions. Note that these are more expensive to compute, as they require computing on all rows."
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                dir: "auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: 'AVG({"Column Name"})'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: 'MAX({"Column Name"})'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: 'MIN({"Column Name"})'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: 'SUM({"Column Name"})'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: 'TOTAL({"Column Name"})'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: 'COUNT({"Column Name"})'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: 'STDEV({"Column Name"})'
                        })
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "Examples:"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "Find all rows that have a loss value less than the average:"
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "snippet-clipboard-content notranslate position-relative overflow-auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("pre", {
                        className: "notranslate",
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: '{"loss"} < AVG({"loss"})'
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "zeroclipboard-container position-absolute right-0 top-0"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("h3", {
                dir: "auto",
                children: "Python Library Functions and Values"
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                dir: "auto",
                children: [
                    "Functions from Python's ",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: "random"
                    }),
                    " library:"
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                dir: "auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "random.random()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "random.randint()"
                        })
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                dir: "auto",
                children: "Note that random values are regenerated on each call, and thus only have limited use. That means that every time the DataGrid is accessed, the values will change. This would result in bizarre results if you grouped or sorted by a random value."
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                dir: "auto",
                children: [
                    "Functions and values from Python's ",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: "math"
                    }),
                    " library:"
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                dir: "auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.pi"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.sqrt()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.acos()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.acosh()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.asin()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.asinh()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.atan()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.atan2()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.atanh()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.ceil()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.cos()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.cosh()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.degrees()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.exp()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.floor()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.log()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.log10()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.log2()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.radians()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.sin()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.sinh()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.tan()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.tanh()"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "math.trunc()"
                        })
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                dir: "auto",
                children: [
                    "Functions and values from Python's ",
                    /*#__PURE__*/ jsx_runtime_.jsx("code", {
                        children: "datetime"
                    }),
                    " library:"
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                dir: "auto",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "datetime.date(YEAR, MONTH, DAY)"
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("li", {
                        children: /*#__PURE__*/ jsx_runtime_.jsx("code", {
                            children: "datetime.datetime(YEAR, MONTH, DAY[, HOUR, MINUTE, SECOND])"
                        })
                    })
                ]
            })
        ]
    });
/* harmony default export */ const SettingsBar_HelpText = (HelpText);

;// CONCATENATED MODULE: ./components/SettingsBar/FilterExpr.client.js








const HelpButton = ()=>/*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: "button-outline",
        children: /*#__PURE__*/ jsx_runtime_.jsx("span", {
            children: "?"
        })
    });
const FilterExpr = ({ query , columns , completions  })=>{
    const refresh = (0,streaming_.unstable_useRefreshRoot)();
    const filter = (0,external_react_.useRef)();
    const onKeyPress = (0,external_react_.useCallback)((e)=>{
        if (e.key === "Enter") {
            refresh({
                query: {
                    ...query,
                    whereExpr: filter?.current?.value,
                    offset: 0
                }
            });
        }
    }, [
        query,
        refresh
    ]);
    const applyFilter = (0,external_react_.useCallback)((e)=>{
        refresh({
            query: {
                ...query,
                whereExpr: filter?.current?.value,
                offset: 0
            }
        });
    }, [
        query,
        refresh
    ]);
    (0,external_react_.useEffect)(()=>{
        filter.current.value = query?.whereExpr || "";
    }, [
        query
    ]);
    const onChangeSelect = (0,external_react_.useCallback)((trigger, slug)=>{
        if (trigger === "{") {
            return `{${slug}}`;
        } else if (trigger.endsWith(".")) {
            return `${trigger}${slug}`;
        } else {
            return ` ${slug}`;
        }
    }, [
        query,
        refresh
    ]);
    const triggers = (0,external_react_.useMemo)(()=>{
        return [
            "{"
        ].concat(Object.keys(completions));
    }, [
        completions
    ]);
    const options = (0,external_react_.useMemo)(()=>{
        return {
            "{": columns.map((name)=>`"${name}"`),
            ...completions
        };
    }, [
        completions,
        columns
    ]);
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx(ReactAutocomplete_client, {
                defaultValue: query?.whereExpr || "",
                trigger: triggers,
                options: options,
                changeOnSelect: onChangeSelect,
                matchAny: true,
                regex: '^[a-zA-Z0-9_\\-\\"\\ ]+$',
                spacer: "",
                maxOptions: 0,
                spaceRemovers: [
                    "."
                ],
                placeholder: `e.g.: {"column name"} > 0.5`,
                id: "filter",
                onKeyPress: onKeyPress,
                applyFilter: applyFilter,
                refInput: filter
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(DialogueModalContainer_client["default"], {
                fullScreen: false,
                toggleElement: /*#__PURE__*/ jsx_runtime_.jsx(HelpButton, {}),
                children: /*#__PURE__*/ jsx_runtime_.jsx(SettingsBar_HelpText, {})
            })
        ]
    });
};
/* harmony default export */ const FilterExpr_client = (FilterExpr);

;// CONCATENATED MODULE: external "next/dynamic.js"
const dynamic_js_namespaceObject = require("next/dynamic.js");
var dynamic_js_default = /*#__PURE__*/__webpack_require__.n(dynamic_js_namespaceObject);
;// CONCATENATED MODULE: external "@mui/icons-material/KeyboardArrowDown"
const KeyboardArrowDown_namespaceObject = require("@mui/icons-material/KeyboardArrowDown");
var KeyboardArrowDown_default = /*#__PURE__*/__webpack_require__.n(KeyboardArrowDown_namespaceObject);
;// CONCATENATED MODULE: external "@mui/icons-material/KeyboardArrowUp"
const KeyboardArrowUp_namespaceObject = require("@mui/icons-material/KeyboardArrowUp");
var KeyboardArrowUp_default = /*#__PURE__*/__webpack_require__.n(KeyboardArrowUp_namespaceObject);
// EXTERNAL MODULE: external "react-select"
var external_react_select_ = __webpack_require__("react-select");
var external_react_select_default = /*#__PURE__*/__webpack_require__.n(external_react_select_);
;// CONCATENATED MODULE: external "@dnd-kit/core"
const core_namespaceObject = require("@dnd-kit/core");
;// CONCATENATED MODULE: external "@dnd-kit/modifiers"
const modifiers_namespaceObject = require("@dnd-kit/modifiers");
;// CONCATENATED MODULE: external "@dnd-kit/sortable"
const sortable_namespaceObject = require("@dnd-kit/sortable");
;// CONCATENATED MODULE: external "@dnd-kit/utilities"
const utilities_namespaceObject = require("@dnd-kit/utilities");
;// CONCATENATED MODULE: ./components/SettingsBar/MultiSelectSort.client.js







// Most of this is taken directly from https://github.com/codercodingthecode/react-select/blob/update-sortable/docs/examples/MultiSelectSort.tsx
// The code is a lot, but the gist is that we use react-select to get all of the nice interactivity we need in our <select> element. Unfortunately,
// react-select doesn't provide the drag-and-drop sorting interface we use, so we use @dnd-kit for that. To make the two libraries work together,
// we have to pass our <Select> component as a child of our <DndContext> component tree. To prevent this from causing errors within <Select>,
// we override several of the internal components <Select> uses. react-select provides us an interface for doing this. Every component defined before
// MultiSelectSort is just a react-select internal component that we are redefining to accept the props that @dnd-kit passes through.
const MultiValue = (props)=>{
    const onMouseDown = (e)=>{
        e.preventDefault();
        e.stopPropagation();
    };
    const innerProps = {
        ...props.innerProps,
        onMouseDown
    };
    const { attributes , listeners , setNodeRef , transform , transition  } = (0,sortable_namespaceObject.useSortable)({
        id: props.data.id
    });
    const style = {
        transform: utilities_namespaceObject.CSS.Transform.toString(transform),
        transition
    };
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        style: style,
        ref: setNodeRef,
        ...attributes,
        ...listeners,
        children: /*#__PURE__*/ jsx_runtime_.jsx(external_react_select_.components.MultiValue, {
            ...props,
            innerProps: innerProps
        })
    });
};
const MultiValueContainer = (props)=>{
    const { isOver , setNodeRef  } = (0,core_namespaceObject.useDroppable)({
        id: "droppable"
    });
    const style = {
        color: isOver ? "green" : undefined
    };
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        style: style,
        ref: setNodeRef,
        children: /*#__PURE__*/ jsx_runtime_.jsx(external_react_select_.components.MultiValueContainer, {
            ...props
        })
    });
};
const MultiValueRemove = (props)=>{
    return /*#__PURE__*/ jsx_runtime_.jsx(external_react_select_.components.MultiValueRemove, {
        ...props,
        innerProps: {
            onPointerDown: (e)=>e.stopPropagation(),
            ...props.innerProps
        },
        children: /*#__PURE__*/ jsx_runtime_.jsx("div", {
            style: {
                width: "100%",
                height: "100%",
                textAlign: "center",
                display: "flex",
                justifyContent: "center",
                alignItems: "center"
            },
            children: "x"
        })
    });
};
const Menu = (props)=>/*#__PURE__*/ jsx_runtime_.jsx(external_react_select_.components.Menu, {
        className: "react-select-list",
        ...props
    });
const MultiSelectSort = ({ options , update , defaults  })=>{
    const { 0: selected , 1: setSelected  } = (0,external_react_.useState)(options);
    const onChange = (0,external_react_.useCallback)((selectedOptions)=>setSelected([
            ...selectedOptions
        ], []));
    const resetSelected = (0,external_react_.useCallback)(()=>setSelected(options), [
        options
    ]);
    const onSortEnd = (event)=>{
        const { active , over  } = event;
        if (!active || !over) return;
        setSelected((items)=>{
            const oldIndex = items.findIndex((item)=>item.id === active.id);
            const newIndex = items.findIndex((item)=>item.id === over.id);
            return (0,sortable_namespaceObject.arrayMove)(items, oldIndex, newIndex);
        });
    };
    const updated = (0,external_react_.useCallback)(()=>update(selected), [
        selected
    ]);
    // Note: react-select styling: https://react-select.com/styles
    const customStyles = {
        valueContainer: (provided, state)=>({
                ...provided,
                overflow: "auto",
                padding: "5px 6px"
            }),
        multiValue: (provided, state)=>({
                ...provided,
                backgroundColor: "#E5E5FE",
                alignItems: "center"
            }),
        multiValueLabel: (provided, state)=>({
                ...provided,
                color: "#5155F5",
                fontSize: "12px",
                fontWeight: "400",
                textTransform: "uppercase"
            }),
        multiValueRemove: (provided, state)=>({
                ...provided,
                backgroundColor: "#AFB0FB",
                borderRadius: "100%",
                height: "14px",
                width: "14px",
                marginLeft: "8px",
                marginRight: "8px",
                fontSize: "10px",
                color: "white",
                display: "flex",
                alignItems: "center"
            })
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "multi-select-columns-body",
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx(core_namespaceObject.DndContext, {
                modifiers: [
                    modifiers_namespaceObject.restrictToParentElement
                ],
                onDragEnd: onSortEnd,
                children: /*#__PURE__*/ jsx_runtime_.jsx(sortable_namespaceObject.SortableContext, {
                    items: selected,
                    strategy: sortable_namespaceObject.horizontalListSortingStrategy,
                    children: /*#__PURE__*/ jsx_runtime_.jsx((external_react_select_default()), {
                        styles: customStyles,
                        distance: 4,
                        isMulti: true,
                        options: defaults,
                        value: selected,
                        onChange: onChange,
                        components: {
                            MultiValue,
                            MultiValueContainer,
                            MultiValueRemove,
                            Menu
                        },
                        closeMenuOnSelect: false
                    })
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "button-row",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "reset",
                        onClick: resetSelected,
                        children: "Reset Defaults"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("button", {
                        className: "button",
                        onClick: updated,
                        children: "Done"
                    })
                ]
            })
        ]
    });
};
/* harmony default export */ const MultiSelectSort_client = (MultiSelectSort);

;// CONCATENATED MODULE: ./lib/makeQuery.js
// Replacement for _.set()
// Modified from https://youmightnotneed.com/lodash#set
// NOTE: if path is blank, value must be an object
const set = (obj, path = "", value = {})=>{
    // Handle empty string paths
    const parsed = path.trim();
    if (!parsed.length) return {
        ...obj,
        ...value
    };
    // Regex explained: https://regexr.com/58j0k
    const pathArray = parsed.match(/([^[.\]])+/g);
    pathArray.reduce((acc, key, i)=>{
        if (acc[key] === undefined) acc[key] = {};
        if (i === pathArray.length - 1) acc[key] = value;
        return acc[key];
    }, obj);
    return obj;
};
const makeQuery = (query, subtree, value)=>{
    return set({
        ...query
    }, subtree, value);
};
/* harmony default export */ const lib_makeQuery = (makeQuery);

;// CONCATENATED MODULE: ./components/SettingsBar/CustomizeColumns.client.js






const Select = dynamic_js_default()(()=>Promise.resolve(/* import() */).then(__webpack_require__.t.bind(__webpack_require__, "react-select", 23)), {
    ssr: false
});


const SortArrow = ({ toggle , sortDesc  })=>{
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "arrow-toggle",
        onClick: toggle,
        children: [
            sortDesc && /*#__PURE__*/ jsx_runtime_.jsx((KeyboardArrowDown_default()), {}),
            !sortDesc && /*#__PURE__*/ jsx_runtime_.jsx((KeyboardArrowUp_default()), {})
        ]
    });
};
const CustomizeColumnsModal = ({ columns , query , defaultOptions , onColumnChange =()=>{} , subtree ="" , isMulti =false , subtrees =[]  })=>{
    const refresh = (0,streaming_.unstable_useRefreshRoot)();
    const { 0: menuIsOpen , 1: setMenuIsOpen  } = (0,external_react_.useState)(false);
    const { 0: newOptions , 1: setNewOptions  } = (0,external_react_.useState)(null);
    // Should the reset button be active
    const { 0: active , 1: setActive  } = (0,external_react_.useState)(false);
    const { 0: sortDesc , 1: setSortDesc  } = (0,external_react_.useState)(false);
    const CLEAR_CHOICE = {
        id: 0,
        label: "",
        value: null
    };
    // React select requires an array of dictionaries as input
    const options = (0,external_react_.useMemo)(()=>columns.map((col, i)=>{
            // For dropdown selectors, we add an empty cell at id: 0, hence the i + 1 below
            return {
                id: i + 1,
                label: col,
                value: col
            };
        }), [
        columns
    ]);
    const defaults = (0,external_react_.useMemo)(()=>defaultOptions?.map((col, i)=>{
            // For dropdown selectors, we add an empty cell at id: 0, hence the i + 1 below
            return {
                id: i + 1,
                label: col,
                value: col
            };
        }), [
        defaultOptions
    ]);
    const selectedOption = (0,external_react_.useMemo)(()=>{
        const selection = query[subtree] || query[subtrees[0]];
        return options.find((opt)=>opt.value === selection) || null;
    }, [
        options,
        query
    ]);
    const handleClearCurrentChanges = ()=>{
        setNewOptions(null);
    };
    const handleColumnToggle = (newSelectedOptions, action)=>{
        setNewOptions(newSelectedOptions);
        setMenuIsOpen(false);
    };
    const handleResetDefaultColumns = ()=>{
        setNewOptions(columns);
    };
    // This is for selecting multiple columns
    const handleUpdateColumns = (0,external_react_.useCallback)((selected)=>{
        const parsedOptions = selected.map((col)=>col.value);
        refresh({
            query: lib_makeQuery(query, "", {
                select: parsedOptions
            })
        });
    }, [
        query
    ]);
    // This is for updating a singular column, where we may need to make the update across multiple fields
    const handleUpdateColumn = (0,external_react_.useCallback)((selected)=>{
        const column = selected.value;
        // If we've specified multiple subtrees, we need to iterate across them.
        if (subtrees.length) {
            let newQuery = {
                ...query,
                sortDesc
            };
            for (const tree of subtrees){
                newQuery = lib_makeQuery(newQuery, tree, column);
            }
            // Shrink limit if we're adding a groupBy; reset to 10 if removing groupBy
            if (newQuery?.groupBy) {
                const { limit , offset , ...limitless } = newQuery;
                newQuery = {
                    ...limitless,
                    limit: 4
                };
            } else {
                const { limit: limit1 , offset: offset1 , ...limitless1 } = newQuery;
                newQuery = {
                    ...limitless1,
                    limit: 10
                };
            }
            refresh({
                query: newQuery
            });
        } else {
            refresh({
                query: lib_makeQuery(query, subtree, column)
            });
        }
        onColumnChange();
    }, [
        subtrees,
        subtree,
        query,
        sortDesc,
        onColumnChange
    ]);
    const handleClearColumn = (0,external_react_.useCallback)(()=>{
        let newQuery = {
            ...query
        };
        if (subtree === "groupBy" || subtrees[0] == "groupBy") {
            const { groupBy , sortBy , ...groupless } = newQuery;
            newQuery = {
                ...groupless,
                limit: 10
            };
        } else if (subtree === "sortBy" || subtrees[0] == "sortBy") {
            const { sortBy: sortBy1 , ...unsorted } = newQuery;
            newQuery = unsorted;
        }
        refresh({
            query: newQuery
        });
        onColumnChange();
    }, [
        query,
        subtree,
        subtrees
    ]);
    const toggleDesc = (0,external_react_.useCallback)(()=>{
        // This is only passed to the single column selector, so the subtree parsing is unnecessary
        refresh({
            query: {
                ...query,
                sortDesc: !query?.sortDesc
            }
        });
        onColumnChange();
    }, [
        query
    ]);
    // FIXME: remove this height: 320px when we find solution for standalone height
    // in select:
    if (isMulti) {
        return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
            className: "multi-select-columns",
            children: [
                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                    className: "title",
                    children: `Column Selection & Ordering`
                }),
                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                    className: "subtitle",
                    children: "Add and remove column tags to update the table"
                }),
                /*#__PURE__*/ jsx_runtime_.jsx(MultiSelectSort_client, {
                    options: options,
                    update: handleUpdateColumns,
                    defaults: defaults
                })
            ]
        });
    }
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "select-modal-title",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        children: "Select a column"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: `reset-button ${selectedOption ? "enabled" : "disabled"}`,
                        onClick: handleClearColumn,
                        children: "Reset to default"
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "select-modal-body",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(Select, {
                        options: options,
                        value: selectedOption,
                        onChange: handleUpdateColumn
                    }),
                    !!query?.sortBy && /*#__PURE__*/ jsx_runtime_.jsx(SortArrow, {
                        toggle: toggleDesc,
                        sortDesc: query?.sortDesc
                    })
                ]
            })
        ]
    });
};
/* harmony default export */ const CustomizeColumns_client = (CustomizeColumnsModal);

;// CONCATENATED MODULE: ./lib/usePopover.js

const usePopover = (modalClass)=>{
    const { 0: open , 1: setOpen  } = (0,external_react_.useState)(false);
    const anchor = (0,external_react_.useRef)(null);
    const toggleOpen = (0,external_react_.useCallback)(()=>{
        if (anchor.current) {
            anchor.current.setAttribute("class", `${modalClass} ${!open ? "active" : ""}`);
        }
        setOpen(!open);
    }, [
        open
    ]);
    return {
        open,
        toggleOpen,
        anchor
    };
};
/* harmony default export */ const lib_usePopover = (usePopover);

;// CONCATENATED MODULE: ./components/SettingsBar/GroupBy.client.js




const GroupButton = ({ active  })=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: `button-outline ${active && "active-button"}`,
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("img", {
                src: "/group_placeholder.png"
            }),
            " ",
            /*#__PURE__*/ jsx_runtime_.jsx("span", {
                children: "Group by"
            })
        ]
    });
const GroupBy = ({ query , columns  })=>{
    const { open , toggleOpen , anchor  } = lib_usePopover();
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                onClick: toggleOpen,
                ref: anchor,
                children: /*#__PURE__*/ jsx_runtime_.jsx(GroupButton, {
                    active: open
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(material_.Popover, {
                open: open,
                onClose: toggleOpen,
                anchorEl: anchor.current,
                anchorOrigin: {
                    vertical: "bottom",
                    horizontal: "right"
                },
                transformOrigin: {
                    vertical: "top",
                    horizontal: "right"
                },
                className: "popover-select",
                children: /*#__PURE__*/ jsx_runtime_.jsx(CustomizeColumns_client, {
                    query: query,
                    subtrees: [
                        "groupBy",
                        "sortBy"
                    ],
                    columns: columns,
                    onColumnChange: toggleOpen
                })
            })
        ]
    });
};
/* harmony default export */ const GroupBy_client = (GroupBy);

;// CONCATENATED MODULE: ./components/SettingsBar/SortBy.client.js




const SortButton = ({ active  })=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: `button-outline ${active && "active-button"}`,
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("img", {
                src: "/sort_icon.png"
            }),
            " ",
            /*#__PURE__*/ jsx_runtime_.jsx("span", {
                children: "Sort"
            })
        ]
    });
const SortBy = ({ query , columns  })=>{
    const { open , toggleOpen , anchor  } = lib_usePopover();
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                onClick: toggleOpen,
                ref: anchor,
                children: /*#__PURE__*/ jsx_runtime_.jsx(SortButton, {
                    active: open
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(material_.Popover, {
                open: open,
                onClose: toggleOpen,
                anchorEl: anchor.current,
                anchorOrigin: {
                    vertical: "bottom",
                    horizontal: "right"
                },
                transformOrigin: {
                    vertical: "top",
                    horizontal: "right"
                },
                className: "popover-select",
                children: /*#__PURE__*/ jsx_runtime_.jsx(CustomizeColumns_client, {
                    query: query,
                    subtree: "sortBy",
                    columns: columns,
                    onColumnChange: toggleOpen
                })
            })
        ]
    });
};
/* harmony default export */ const SortBy_client = (SortBy);

;// CONCATENATED MODULE: ./components/SettingsBar/SelectRow.client.js






const SelectButton = ()=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "button-outline",
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("img", {
                src: "/columns_placeholder.png"
            }),
            " ",
            /*#__PURE__*/ jsx_runtime_.jsx("span", {
                children: "Columns"
            })
        ]
    });
const SelectRow = ({ columns , query , options , completions  })=>{
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "select-row",
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx(GroupBy_client, {
                query: query,
                columns: columns
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(SortBy_client, {
                query: query,
                columns: columns
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(DialogueModalContainer_client["default"], {
                toggleElement: /*#__PURE__*/ jsx_runtime_.jsx(SelectButton, {}),
                sx: {
                    "& .MuiDialog-container": {
                        "& .MuiPaper-root": {
                            width: "100%",
                            maxWidth: "540px"
                        }
                    }
                },
                children: /*#__PURE__*/ jsx_runtime_.jsx(CustomizeColumns_client, {
                    query: query,
                    isMulti: true,
                    columns: columns,
                    defaultOptions: options
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(FilterExpr_client, {
                query: query,
                columns: columns,
                completions: completions
            })
        ]
    });
};
/* harmony default export */ const SelectRow_client = (SelectRow);


/***/ }),

/***/ "./components/page.client.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("@mui/material");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_mui_material__WEBPACK_IMPORTED_MODULE_1__);


const Page = ({ children  })=>{
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_mui_material__WEBPACK_IMPORTED_MODULE_1__.StyledEngineProvider, {
        injectFirst: true,
        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
            className: "main",
            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                className: "page",
                children: children
            })
        })
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Page);


/***/ }),

/***/ "./config.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var process__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("process");
/* harmony import */ var process__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(process__WEBPACK_IMPORTED_MODULE_0__);

const localConfig = {
    apiUrl: `${process__WEBPACK_IMPORTED_MODULE_0__.env.KANGAS_PROTOCOL || "http"}://${process__WEBPACK_IMPORTED_MODULE_0__.env.KANGAS_HOST}:${process__WEBPACK_IMPORTED_MODULE_0__.env.KANGAS_BACKEND_PORT}/datagrid/`,
    defaultDecimalPrecision: 5,
    locale: "en-US",
    isColab: process__WEBPACK_IMPORTED_MODULE_0__.env.IN_COLAB === "True"
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (localConfig);


/***/ }),

/***/ "./lib/formatValue.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _truncateValue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./lib/truncateValue.js");

function formatValue(value, columnType) {
    if (value === null) {
        return "None";
    }
    let retval = value;
    if (columnType === "DATETIME") {
        const timestampObj = new UnixTime(value);
        retval = timestampObj.format("YYYY-MM-DD HH:mm:ss");
    } else if (columnType === "FLOAT") {
        retval = (0,_truncateValue__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value).toString();
    } else if (typeof value !== "string") {
        retval = value.toString();
    }
    return retval;
}
function pad(item, size, padding = "0") {
    return String(item).padStart(size, padding);
}
class UnixTime {
    constructor(datetime){
        this.obj = new Date(datetime * 1000);
        this.year = pad(this.obj.getFullYear(), 4);
        this.month = pad(this.obj.getMonth() + 1, 2);
        this.day = pad(this.obj.getDate(), 2);
        this.hour = pad(this.obj.getHours(), 2);
        this.minute = pad(this.obj.getMinutes(), 2);
        this.second = pad(this.obj.getSeconds(), 2);
    }
    format() {
        // Hard coded for now: 'YYYY-MM-DD HH:mm:ss'
        if (this.hour === "00" && this.minute === "00" && this.second === "00") {
            return `${this.year}-${this.month}-${this.day}`;
        } else {
            return `${this.year}-${this.month}-${this.day} ${this.hour}:${this.minute}:${this.second}`;
        }
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (formatValue);


/***/ }),

/***/ "./lib/generateChartColor.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Lq": () => (/* binding */ getColor),
/* harmony export */   "Qg": () => (/* binding */ getContrastingColor)
/* harmony export */ });
/* unused harmony export hexToRgb */
// Color functions
/*
// Full color spectrum:
const getUniqueColor = (hash) => {
    const n = hash % 124;
    // Must return lowercase hex
    // so that getContrastingColor will work
    const rgb = [0, 0, 0];
    let counter = n;
    for (let i = 0; i < 24; i++) {
	rgb[i % 3] <<= 1;
	rgb[i % 3] |= counter & 0x01;
	counter >>= 1;
    }
    return `#${rgb.reduce(
      (a, c) => (c > 0x0f ? c.toString(16) : `0${c.toString(16)}`) + a,
      ''
    )}`;
};
*/ // Constrained to a given color pallete:
const getUniqueColor = (hash)=>{
    // 144 color palette
    /* 
    const colors = [
	'#1a293f', '#22334d', '#2a3c5a', '#324669', '#3a5077', '#435a86', '#4d6595', '#5670a4', '#607ab4', '#6b85c4', '#7690d4', '#819be4',
	'#2a253e', '#342e4a', '#3e3757', '#483f64', '#534972', '#5e5280', '#695b8e', '#75659c', '#806fab', '#8d79ba', '#9983c9', '#a68dd8',
	'#3a223a', '#452a46', '#513252', '#5e3a5f', '#6a426b', '#774b78', '#845486', '#925c93', '#9f65a1', '#ad6faf', '#bb78bd', '#c981cb',
	'#451c2e', '#522238', '#602941', '#6d2f4b', '#7b3655', '#8a3d60', '#98456a', '#a74c75', '#b65380', '#c65b8b', '#d56396', '#e56ba1',
	'#4a1a1e', '#571f24', '#65252b', '#732b31', '#813138', '#8f383f', '#9d3e47', '#ac454e', '#bb4b55', '#cb525d', '#da5964', '#ea606c',
	'#0c343c', '#11414b', '#154e5a', '#1a5c69', '#1f6a79', '#247988', '#298799', '#2e96a9', '#33a6ba', '#38b5cb', '#3dc5dd', '#42d5ee',
	'#0a382a', '#0f4636', '#135542', '#18644f', '#1c745c', '#21846a', '#259578', '#2aa686', '#2fb795', '#33c9a4', '#38dab3', '#3cecc3',
	'#222f11', '#2d3d18', '#394c1f', '#445b27', '#516a2f', '#5d7b37', '#6a8b3f', '#779c48', '#84ad51', '#91bf5a', '#9fd163', '#ace36c',
	'#4f4114', '#5b4b18', '#66551c', '#725f20', '#7e6925', '#8a7429', '#967e2d', '#a28932', '#af9437', '#bc9f3b', '#c8ab40', '#d5b645',
	'#492c12', '#563517', '#643d1c', '#714621', '#7f5026', '#8d592b', '#9c6231', '#ab6c36', '#ba763c', '#c98041', '#d88a47', '#e8944d',
	'#462514', '#542d1a', '#623520', '#713e26', '#80472c', '#8f5032', '#9f5939', '#af6240', '#bf6c46', '#cf754d', '#e07f54', '#f1895b',
	'#daf96b', '#a4f986', '#6df6a9', '#35efcb', '#1de5e7', '#53d7f8', '#8ac6fc', '#b8b2f1', '#db9ed9', '#f08bb9', '#f77f95', '#f07b72'
    ];
    */ // 15 color palette
    const colors = [
        "#ffd51d",
        "#ffbd00",
        "#ff8900",
        "#fb7628",
        "#ff4747",
        "#e51772",
        "#cf0057",
        "#6e1d89",
        "#860dab",
        "#49a5bd",
        "#0096c7",
        "#00b4d8",
        "#12a592",
        "#16cab2",
        "#41ead4", 
    ];
    return colors[hash % colors.length];
};
const getColor = (text = "0")=>{
    // Must return lowercase hex
    // so that getContrastingColor will work
    if ([
        "1",
        "true",
        "t",
        "yes"
    ].includes(text.toLowerCase())) return "#12a592"; // green from palette
    if ([
        "0",
        "false",
        "f",
        "no"
    ].includes(text.toLowerCase())) return "#cf0057"; // red from palette
    const hash = [
        ...text
    ].reduce((acc, char)=>{
        return char.charCodeAt(0) + ((acc << 5) - acc);
    }, 0);
    return getUniqueColor(Math.abs(hash));
};
const hexToRgb = (hex)=>{
    const result = hex.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/);
    return [
        parseInt(result[1], 16),
        parseInt(result[2], 16),
        parseInt(result[3], 16), 
    ];
};
const getContrastingColor = (hex)=>{
    const colors = hexToRgb(hex);
    const r = colors[0];
    const g = colors[1];
    const b = colors[2];
    const o = Math.round((r * 299 + g * 587 + b * 114) / 1000);
    return o > 125 ? "black" : "white";
};


/***/ }),

/***/ "./lib/truncateValue.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./config.js");
// Config

const countDecimals = (value)=>{
    if (Math.floor(value) === value) return 0;
    const [, decimalPart = ""] = value.toString().split(".");
    return decimalPart.length;
};
const truncateValue = (value, customDecimalsPrecision)=>{
    const decimalsPrecision = customDecimalsPrecision ?? _config__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defaultDecimalPrecision */ .Z.defaultDecimalPrecision;
    if (decimalsPrecision === null) return value;
    const numberValue = Number(value);
    if (isNaN(numberValue)) return value;
    if (Number.isInteger(numberValue) || countDecimals(numberValue) <= decimalsPrecision) {
        return numberValue;
    }
    const exponential = 10 ** decimalsPrecision;
    return Math.floor(numberValue * exponential) / exponential;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (truncateValue);


/***/ }),

/***/ "./lib/useAsset.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_Cells_ClientContext_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./components/Cells/ClientContext.client.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("uuid");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_2__]);
uuid__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];



// Returns a URL that can be used as the src for assets like images.
const useAsset = (url)=>{
    const { isColab , apiUrl  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_components_Cells_ClientContext_client__WEBPACK_IMPORTED_MODULE_1__.ConfigContext);
    const { 0: asset , 1: setAsset  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();
    const listenerAttached = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);
    const listenerId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>(0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)(), []);
    const { dgid , assetId  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{
        const params = new URL(url).searchParams;
        return {
            dgid: params.get("dgid"),
            assetId: params.get("assetId")
        };
    }, [
        url
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{
        // Handle Colab
        // Attach asset listener
        if (isColab && !listenerAttached.current && listenerId) {
            window.addEventListener("message", (e)=>{
                const { messageType , targetId , ...data } = e.data;
                if (messageType === "asset" && targetId === listenerId) {
                    setAsset(`data:image/png;base64,${data.src}`);
                }
            }, false);
            listenerAttached.current = true;
        }
        if (isColab) {
            // Fire postMessage request for asset
            if (assetId && dgid && listenerId) {
                window.parent.postMessage({
                    dgid,
                    assetId,
                    targetId: listenerId,
                    type: "asset"
                }, "*");
            }
        } else {
            setAsset(url);
        }
    }, [
        url,
        assetId,
        dgid,
        isColab,
        listenerId
    ]);
    return asset;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useAsset);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./lib/useCategory.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_Cells_ClientContext_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./components/Cells/ClientContext.client.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("uuid");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_2__]);
uuid__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];



const useCategory = (query)=>{
    const { isColab , apiUrl  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_components_Cells_ClientContext_client__WEBPACK_IMPORTED_MODULE_1__.ConfigContext);
    const { 0: categoryData , 1: setData  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();
    const listenerAttached = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);
    const listenerId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>(0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)(), []);
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{
        // Handle Colab
        // Attach category listener
        if (isColab && !listenerAttached.current && listenerId) {
            window.addEventListener("message", (e)=>{
                const { messageType , targetId , raw  } = e.data;
                if (messageType === "category" && targetId === listenerId) {
                    const parsed = JSON.parse(raw.replace(/\n/g, "").replace(/\'/g, `"`).replace(`: None`, `: null`));
                    setData(parsed);
                }
            }, false);
            listenerAttached.current = true;
        }
        if (isColab) {
            // Fire postMessage request for category
            if (query && listenerId) {
                window.parent.postMessage({
                    ...query,
                    targetId: listenerId,
                    type: "category"
                }, "*");
            }
        } else {
            fetch(`${apiUrl}category`, {
                body: JSON.stringify(query),
                method: "post"
            }).then((res)=>res.json()).then((d)=>setData(d));
        }
    }, [
        query,
        isColab,
        listenerId
    ]);
    return categoryData;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useCategory);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./lib/useHistogram.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_Cells_ClientContext_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./components/Cells/ClientContext.client.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("uuid");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_2__]);
uuid__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];



const useHistogram = (query)=>{
    const { isColab , apiUrl  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_components_Cells_ClientContext_client__WEBPACK_IMPORTED_MODULE_1__.ConfigContext);
    const { 0: histogramData , 1: setData  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();
    const listenerAttached = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);
    const listenerId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>(0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)(), []);
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{
        // Handle Colab
        // Attach category listener
        if (isColab && !listenerAttached.current && listenerId) {
            window.addEventListener("message", (e)=>{
                const { messageType , targetId , raw  } = e.data;
                if (messageType === "histogram" && targetId === listenerId) {
                    const parsed = JSON.parse(raw.replace(/\n/g, "").replace(/\'/g, `"`).replace(`: None`, `: null`));
                    setData(parsed);
                }
            }, false);
            listenerAttached.current = true;
        }
        if (isColab) {
            // Fire postMessage request for category
            if (query && listenerId) {
                window.parent.postMessage({
                    ...query,
                    targetId: listenerId,
                    type: "histogram"
                }, "*");
            }
        } else {
            fetch(`${apiUrl}histogram`, {
                body: JSON.stringify(query),
                method: "post"
            }).then((res)=>res.json()).then((data)=>setData(data));
        }
    }, [
        query,
        isColab,
        listenerId
    ]);
    return histogramData;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useHistogram);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./lib/useMetadata.js":
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_Cells_ClientContext_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./components/Cells/ClientContext.client.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("uuid");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_2__]);
uuid__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];



/* 
Kangas fetches assets and metadata in different ways depending on the circumstance. Wherever possible,
Kangas fetches on the server-side, making use of React Server Components. However, in situations where
client-side fetching is necessary—like in the <Canvas /> component, Kangas has two different modes of 
client-side fetching, depending on environment. When running inside an iframe, like in a Colab/Jupyter environment,
Kangas performs fetches by posting a message to the parent frame, which handles data fetching and responds.
Outside of an iframe, Kangas will fetch against the relevant endpoint directly, in some situations making use
of Next.js api routes
*/ const useMetadata = (dgid, assetId, inheritedMetadata)=>{
    const { isColab , apiUrl  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_components_Cells_ClientContext_client__WEBPACK_IMPORTED_MODULE_1__.ConfigContext);
    const { 0: metadata , 1: setMetadata  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();
    const listenerAttached = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);
    const listenerId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>(0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)(), []);
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{
        // Handle Colab
        // Attach metadata listener
        if (isColab && !listenerAttached.current && listenerId) {
            window.addEventListener("message", (e)=>{
                const { messageType , targetId , ...data } = e.data;
                if (messageType === "metadata" && targetId === listenerId) {
                    setMetadata(data);
                }
            }, false);
            listenerAttached.current = true;
        }
        if (isColab && listenerId) {
            // Fire postMessage request for metadata
            if (assetId && dgid) {
                window.parent.postMessage({
                    dgid,
                    assetId,
                    targetId: listenerId,
                    type: "metadata"
                }, "*");
            }
        } else if (!isColab) {
            fetch(`/api/metadata?${new URLSearchParams({
                assetId,
                dgid,
                url: `${apiUrl}asset-metadata`
            })}`).then((res)=>res.json()).then((data)=>setMetadata(JSON.parse(data)));
        }
    }, [
        dgid,
        assetId,
        listenerId,
        isColab
    ]);
    if (inheritedMetadata) return JSON.parse(inheritedMetadata); // TODO: Remove this escape hatch when we fix the clientFetchMeta mess in ImageCanvas 
    return metadata;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useMetadata);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "@material-ui/icons":
/***/ ((module) => {

module.exports = require("@material-ui/icons");

/***/ }),

/***/ "@mui/material":
/***/ ((module) => {

module.exports = require("@mui/material");

/***/ }),

/***/ "../shared/lib/head":
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/head.js");

/***/ }),

/***/ "../shared/lib/image-config-context":
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/image-config-context.js");

/***/ }),

/***/ "../shared/lib/image-config":
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/image-config.js");

/***/ }),

/***/ "./loadable":
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/loadable.js");

/***/ }),

/***/ "../shared/lib/router/utils/parse-path":
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/parse-path.js");

/***/ }),

/***/ "../shared/lib/router/utils/remove-trailing-slash":
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash.js");

/***/ }),

/***/ "../shared/lib/utils":
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/utils.js");

/***/ }),

/***/ "next/streaming":
/***/ ((module) => {

module.exports = require("next/streaming");

/***/ }),

/***/ "react":
/***/ ((module) => {

module.exports = require("react");

/***/ }),

/***/ "react-select":
/***/ ((module) => {

module.exports = require("react-select");

/***/ }),

/***/ "react/jsx-runtime":
/***/ ((module) => {

module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "react-intersection-observer":
/***/ ((module) => {

module.exports = import("react-intersection-observer");;

/***/ }),

/***/ "use-debounce":
/***/ ((module) => {

module.exports = import("use-debounce");;

/***/ }),

/***/ "uuid":
/***/ ((module) => {

module.exports = import("uuid");;

/***/ }),

/***/ "process":
/***/ ((module) => {

module.exports = require("process");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [80,421], () => (__webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FSettingsBar%2FPaging.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FSettingsBar%2FMatrixSelect.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FSettingsBar%2FSelectRow.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FSettingsBar%2FRefreshButton.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FModals%2FDialogueModalContainer.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2Fpage.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FSettingsBar%2FImports.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FExpandOverlay.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FClientContext.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FCurveAssetCell.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FBooleanCell.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fnode_modules%2Fnext%2Fimage.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FImage%2FImageCanvas.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FDeferredCell.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FHistogram%2FHistogramGroupCell.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FHistogram%2FHistogramGroupExpanded.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FCategory%2FCategoryGroupCell.client.js&modules=%2Fhome%2Fdblank%2Fcomet%2Fkangas%2Ffrontend%2Fcomponents%2FCells%2FCategory%2FCategoryGroupExpanded.client.js&runtime=nodejs&ssr=false&name=pages%2Findex!")));
module.exports = __webpack_exports__;

})();