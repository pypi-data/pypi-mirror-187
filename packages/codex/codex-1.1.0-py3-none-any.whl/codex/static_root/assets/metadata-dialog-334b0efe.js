import{_ as j,o as _,d as $,aw as Me,r as oe,w as B,ax as Ne,ay as X,ap as Ye,bb as Ge,bc as He,bd as We,R as Ke,be as A,bf as k,af as Z,bg as Je,bh as Xe,bi as ke,M as fe,bj as Qe,ae as Ie,bk as Ze,S as he,bl as K,bm as et,f as o,b4 as Se,b5 as tt,bn as at,bo as nt,bp as rt,bq as lt,br as Ce,bs as st,bt as ot,b3 as it,bu as ut,bv as dt,F as pe,bw as ct,bx as vt,h as re,I as mt,E as ft,by as ie,a as ee,L as te,c as P,bz as ht,al as ge,e as L,t as z,bA as pt,k as g,bB as gt,bC as bt,x as _t,j as J,i as le,bD as yt,bE as ue,bF as be,bG as kt,q as Ve,s as Re,H as St,bH as Ct,aq as Fe,bI as wt,bJ as Tt,A as Mt,B as Nt,aW as It,aX as Vt,b as we,J as Rt,aZ as Ft,aU as Bt,l as $t,au as Pt,D as Lt}from"./admin-92aa290d.js";const Dt={name:"PaginationToolbar"};function zt(e,t,r,u,l,i){return _(),$(Ye,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},Me({_:2},[oe(e.$slots,(f,a)=>({name:a,fn:B(s=>[Ne(e.$slots,a,X({props:f},s),void 0,!0)])}))]),1024)}const un=j(Dt,[["render",zt],["__scopeId","data-v-cfa8cce0"]]);const _e=Symbol.for("vuetify:v-slider");function Et(e,t,r){const u=r==="vertical",l=t.getBoundingClientRect(),i="touches"in e?e.touches[0]:e;return u?i.clientY-(l.top+l.height/2):i.clientX-(l.left+l.width/2)}function At(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const Ot=Ge({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...He(),...We({elevation:2})},"slider"),xt=e=>{let{props:t,handleSliderMouseUp:r,handleMouseMove:u,getActiveThumb:l}=e;const{isRtl:i}=Ke(),f=A(t,"reverse"),a=k(()=>{let d=i.value?"rtl":"ltr";return t.reverse&&(d=d==="rtl"?"ltr":"rtl"),d}),s=k(()=>parseFloat(t.min)),n=k(()=>parseFloat(t.max)),v=k(()=>t.step>0?parseFloat(t.step):0),p=k(()=>{const d=v.value.toString().trim();return d.includes(".")?d.length-d.indexOf(".")-1:0}),h=k(()=>parseInt(t.thumbSize,10)),y=k(()=>parseInt(t.tickSize,10)),c=k(()=>parseInt(t.trackSize,10)),m=k(()=>(n.value-s.value)/v.value),b=A(t,"disabled"),w=k(()=>t.direction==="vertical"),I=k(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),S=k(()=>t.error||t.disabled?void 0:t.trackColor??t.color),U=k(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),D=Z(!1),M=Z(0),F=Z(),N=Z();function q(d){if(v.value<=0)return d;const T=ke(d,s.value,n.value),W=s.value%v.value,ce=Math.round((T-W)/v.value)*v.value+W;return parseFloat(Math.min(ce,n.value).toFixed(p.value))}function O(d){var T;const W=t.direction==="vertical",ce=W?"top":"left",Oe=W?"height":"width",xe=W?"clientY":"clientX",{[ce]:je,[Oe]:Ue}=(T=F.value)==null?void 0:T.$el.getBoundingClientRect(),qe=At(d,xe);let ve=Math.min(Math.max((qe-je-M.value)/Ue,0),1)||0;return(W||a.value==="rtl")&&(ve=1-ve),q(s.value+ve*(n.value-s.value))}let E=!1;const V=d=>{E||(M.value=0,r(O(d))),D.value=!1,E=!1,M.value=0},Q=d=>{N.value=l(d),N.value&&(N.value.focus(),D.value=!0,N.value.contains(d.target)?(E=!0,M.value=Et(d,N.value,t.direction)):(M.value=0,u(O(d))))},x={passive:!0,capture:!0};function Y(d){E=!0,u(O(d))}function C(d){d.stopPropagation(),d.preventDefault(),V(d),window.removeEventListener("mousemove",Y,x),window.removeEventListener("mouseup",C)}function R(d){var T;V(d),window.removeEventListener("touchmove",Y,x),(T=d.target)==null||T.removeEventListener("touchend",R)}function G(d){var T;Q(d),window.addEventListener("touchmove",Y,x),(T=d.target)==null||T.addEventListener("touchend",R,{passive:!1})}function ae(d){d.preventDefault(),Q(d),window.addEventListener("mousemove",Y,x),window.addEventListener("mouseup",C,{passive:!1})}const H=d=>{const T=(d-s.value)/(n.value-s.value)*100;return ke(isNaN(T)?0:T,0,100)},ne=k(()=>t.ticks?Array.isArray(t.ticks)?t.ticks.map(d=>({value:d,position:H(d),label:d.toString()})):Object.keys(t.ticks).map(d=>({value:parseFloat(d),position:H(parseFloat(d)),label:t.ticks[d]})):m.value!==1/0?Je(m.value+1).map(d=>{const T=s.value+d*v.value;return{value:T,position:H(T)}}):[]),de=k(()=>ne.value.some(d=>{let{label:T}=d;return!!T})),ye={activeThumbRef:N,color:A(t,"color"),decimals:p,disabled:b,direction:A(t,"direction"),elevation:A(t,"elevation"),hasLabels:de,horizontalDirection:a,isReversed:f,min:s,max:n,mousePressed:D,numTicks:m,onSliderMousedown:ae,onSliderTouchstart:G,parsedTicks:ne,parseMouseMove:O,position:H,readonly:A(t,"readonly"),rounded:A(t,"rounded"),roundValue:q,showTicks:A(t,"showTicks"),startOffset:M,step:v,thumbSize:h,thumbColor:I,thumbLabel:A(t,"thumbLabel"),ticks:A(t,"ticks"),tickSize:y,trackColor:S,trackContainerRef:F,trackFillColor:U,trackSize:c,vertical:w};return Xe(_e,ye),ye},jt=fe({name:"VSliderThumb",directives:{Ripple:Qe},props:{focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0}},emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r,emit:u}=t;const l=Ie(_e);if(!l)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:i,step:f,vertical:a,disabled:s,thumbSize:n,thumbLabel:v,direction:p,readonly:h,elevation:y,isReversed:c,horizontalDirection:m,mousePressed:b,decimals:w}=l,{textColorClasses:I,textColorStyles:S}=Ze(i),{pageup:U,pagedown:D,end:M,home:F,left:N,right:q,down:O,up:E}=rt,V=[U,D,M,F,N,q,O,E],Q=k(()=>f.value?[1,2,3]:[1,5,10]);function x(C,R){if(!V.includes(C.key))return;C.preventDefault();const G=f.value||.1,ae=(e.max-e.min)/G;if([N,q,O,E].includes(C.key)){const ne=(m.value==="rtl"?[N,E]:[q,E]).includes(C.key)?1:-1,de=C.shiftKey?2:C.ctrlKey?1:0;R=R+ne*G*Q.value[de]}else if(C.key===F)R=e.min;else if(C.key===M)R=e.max;else{const H=C.key===D?1:-1;R=R-H*G*(ae>100?ae/10:10)}return Math.max(e.min,Math.min(e.max,R))}function Y(C){const R=x(C,e.modelValue);R!=null&&u("update:modelValue",R)}return he(()=>{var C;const R=K(a.value||c.value?100-e.position:e.position,"%"),{elevationClasses:G}=et(k(()=>s.value?void 0:y.value));return o("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&b.value}],style:{"--v-slider-thumb-position":R,"--v-slider-thumb-size":K(n.value)},role:"slider",tabindex:s.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":h.value,"aria-orientation":p.value,onKeydown:h.value?void 0:Y},[o("div",{class:["v-slider-thumb__surface",I.value,G.value],style:{...S.value}},null),Se(o("div",{class:["v-slider-thumb__ripple",I.value],style:S.value},null),[[tt("ripple"),!0,null,{circle:!0,center:!0}]]),o(at,{origin:"bottom center"},{default:()=>[Se(o("div",{class:"v-slider-thumb__label-container"},[o("div",{class:["v-slider-thumb__label"]},[o("div",null,[((C=r["thumb-label"])==null?void 0:C.call(r,{modelValue:e.modelValue}))??e.modelValue.toFixed(f.value?w.value:1)])])]),[[nt,v.value&&e.focused||v.value==="always"]])]})])}),{}}});const Ut=fe({name:"VSliderTrack",props:{start:{type:Number,required:!0},stop:{type:Number,required:!0}},emits:{},setup(e,t){let{slots:r}=t;const u=Ie(_e);if(!u)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:l,horizontalDirection:i,parsedTicks:f,rounded:a,showTicks:s,tickSize:n,trackColor:v,trackFillColor:p,trackSize:h,vertical:y,min:c,max:m}=u,{roundedClasses:b}=lt(a),{backgroundColorClasses:w,backgroundColorStyles:I}=Ce(p),{backgroundColorClasses:S,backgroundColorStyles:U}=Ce(v),D=k(()=>`inset-${y.value?"block-end":"inline-start"}`),M=k(()=>y.value?"height":"width"),F=k(()=>({[D.value]:"0%",[M.value]:"100%"})),N=k(()=>e.stop-e.start),q=k(()=>({[D.value]:K(e.start,"%"),[M.value]:K(N.value,"%")})),O=k(()=>(y.value?f.value.slice().reverse():f.value).map((V,Q)=>{var x;const Y=y.value?"bottom":"margin-inline-start",C=V.value!==c.value&&V.value!==m.value?K(V.position,"%"):void 0;return o("div",{key:V.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":V.position>=e.start&&V.position<=e.stop,"v-slider-track__tick--first":V.value===c.value,"v-slider-track__tick--last":V.value===m.value}],style:{[Y]:C}},[(V.label||r["tick-label"])&&o("div",{class:"v-slider-track__tick-label"},[((x=r["tick-label"])==null?void 0:x.call(r,{tick:V,index:Q}))??V.label])])}));return he(()=>o("div",{class:["v-slider-track",b.value],style:{"--v-slider-track-size":K(h.value),"--v-slider-tick-size":K(n.value),direction:y.value?void 0:i.value}},[o("div",{class:["v-slider-track__background",S.value,{"v-slider-track__background--opacity":!!l.value||!p.value}],style:{...F.value,...U.value}},null),o("div",{class:["v-slider-track__fill",w.value],style:{...q.value,...I.value}},null),s.value&&o("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":s.value==="always"}]},[O.value])])),{}}}),qt=fe({name:"VSlider",props:{...st(),...Ot(),...ot(),modelValue:{type:[Number,String],default:0}},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const u=Z(),{min:l,max:i,mousePressed:f,roundValue:a,onSliderMousedown:s,onSliderTouchstart:n,trackContainerRef:v,position:p,hasLabels:h,readonly:y}=xt({props:e,handleSliderMouseUp:S=>c.value=a(S),handleMouseMove:S=>c.value=a(S),getActiveThumb:()=>{var S;return(S=u.value)==null?void 0:S.$el}}),c=it(e,"modelValue",void 0,S=>{const U=typeof S=="string"?parseFloat(S):S??l.value;return a(U)}),{isFocused:m,focus:b,blur:w}=ut(e),I=k(()=>p(c.value));return he(()=>{const[S,U]=dt(e),D=!!(e.label||r.label||r.prepend);return o(vt,X({class:["v-slider",{"v-slider--has-labels":!!r["tick-label"]||h.value,"v-slider--focused":m.value,"v-slider--pressed":f.value,"v-slider--disabled":e.disabled}]},S,{focused:m.value}),{...r,prepend:D?M=>{var F,N;return o(pe,null,[((F=r.label)==null?void 0:F.call(r,M))??e.label?o(ct,{class:"v-slider__label",text:e.label},null):void 0,(N=r.prepend)==null?void 0:N.call(r,M)])}:void 0,default:M=>{let{id:F}=M;return o("div",{class:"v-slider__container",onMousedown:y.value?void 0:s,onTouchstartPassive:y.value?void 0:n},[o("input",{id:F.value,name:e.name||F.value,disabled:e.disabled,readonly:e.readonly,tabindex:"-1",value:c.value},null),o(Ut,{ref:v,start:0,stop:I.value},{"tick-label":r["tick-label"]}),o(jt,{ref:u,focused:m.value,min:l.value,max:i.value,modelValue:c.value,"onUpdate:modelValue":N=>c.value=N,position:I.value,elevation:e.elevation,onFocus:b,onBlur:w},{"thumb-label":r["thumb-label"]})])}})}),{}}}),Yt={name:"PaginationSlider"};function Gt(e,t,r,u,l,i){return _(),$(qt,X({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),null,16)}const dn=j(Yt,[["render",Gt],["__scopeId","data-v-825b160e"]]);const Ht={name:"PaginationNavButton"};function Wt(e,t,r,u,l,i){return _(),$(re,X({class:"paginationNavButton",height:"100%"},e.$attrs),Me({_:2},[oe(e.$slots,(f,a)=>({name:a,fn:B(s=>[Ne(e.$slots,a,X({props:f},s),void 0,!0)])}))]),1040)}const cn=j(Ht,[["render",Wt],["__scopeId","data-v-852fad11"]]),Kt=function(e){let t;return e?t=e.length===4&&!Number.isNaN(e)?" ("+e+")":" v"+e:t="",t},Be=function({issue:e,issueSuffix:t},r){let u;try{e==null&&!t&&(e=0);const l=Number.parseFloat(e),i=Math.floor(l);r===void 0&&(r=0),l===i?u=i.toString():(u=l.toString(),r+=u.split(".")[1].length+1),u=u.padStart(r,"0")}catch{u=""}return t&&(u+=t),u},Jt=function({issue:e,issueSuffix:t,issueCount:r},u){let l="#"+Be({issue:e,issueSuffix:t},u);return r&&(l+=` of ${r}`),l},Xt=function({seriesName:e,volumeName:t,issue:r,issueSuffix:u,issueCount:l},i){const f=Kt(t),a=Jt({issue:r,issueSuffix:u,issueCount:l},i);return[e,f,a].filter(Boolean).join(" ")},$e=mt.browser.vuetifyNullCode,Pe="None",Qt={value:$e,title:Pe},Zt=function(e,t){let r;return e===void 0?r=e:e instanceof Object?(r={value:e.pk,title:e.name},e.pk===null||e.name===void 0?r.value=$e:t||(r.value=+e.pk),(r.title===null||r.value===void 0)&&(r.title=Pe)):e===null?r=Qt:r={value:e,title:e.toString()},r},ea=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},ta=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},aa=function(e,t,r=!1,u=!1){const l=e||[],i=t&&t.toLowerCase();let f=[];for(const s of l){const n=Zt(s,u);n&&(!i||n.title&&n.title.toLowerCase().includes(i))&&f.push(n)}const a=r?ta:ea;return f.sort(a)};const na={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function ra(e,t,r,u,l,i){return _(),$(ft,X({"aria-label":"loading",class:"codexProgressCircular",indeterminate:r.indeterminate},e.$attrs),null,16,["indeterminate"])}const Le=j(na,[["render",ra],["__scopeId","data-v-7bb4cf22"]]),la=(e,t)=>e?`${ie(e)}/cover.webp?${t}`:window.CODEX.MISSING_COVER;const sa={name:"BookCover",props:{group:{type:String,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},coverPk:{type:Number,required:!0}},data(){return{showPlaceholder:!1}},computed:{...ee(te,{coverSrc:function(e){return la(this.coverPk,e.page.coversTimestamp)}})},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},oa={class:"bookCover"},ia={key:1,class:"childCount"};function ua(e,t,r,u,l,i){return _(),P("div",oa,[o(ht,{src:e.coverSrc,class:"coverImg"},null,8,["src"]),r.finished!==!0?(_(),P("div",{key:0,class:ge({unreadFlag:!0,mixedreadFlag:r.finished===null})},null,2)):L("",!0),r.group!=="c"?(_(),P("span",ia,z(r.childCount),1)):L("",!0)])}const De=j(sa,[["render",ua],["__scopeId","data-v-9acb5f6a"]]);const da={name:"MetadataTags",props:{label:{type:String,required:!0},items:{type:Array,default(){return[]}},values:{type:Array,default(){return[]}}},data(){return{mdiFilter:pt}},computed:{...ee(te,{filterValues:function(e){return e.settings.filters[this.label.toLowerCase()]}}),model(){return aa(this.values)}},methods:{chipColor:function(e){return this.filterValues&&this.filterValues.includes(e)?this.$vuetify.theme.current.colors["primary-darken-1"]:""}}},ca={key:0,class:"tags"},va={class:"label"};function ma(e,t,r,u,l,i){return i.model&&i.model.length>0?(_(),P("div",ca,[o(bt,{value:i.model,multiple:"",class:"chipGroup"},{default:B(()=>[g("div",va,z(r.label),1),(_(!0),P(pe,null,oe(i.model,f=>(_(),$(gt,{key:`${r.label}/${f.value}`,color:i.chipColor(f.value),value:f.value,text:f.title},null,8,["color","value","text"]))),128))]),_:1},8,["value"])])):L("",!0)}const ze=j(da,[["render",ma],["__scopeId","data-v-80903885"]]);const fa={name:"MetadataTextBox",props:{label:{type:String,required:!0},value:{type:[Object,String,Number,Boolean],default:void 0},link:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1}},data(){return{mdiOpenInNew:_t}},computed:{computedValue:function(){return this.value!=null&&this.value instanceof Object?this.value.name:this.value}}},ha={class:"textLabel"},pa=["href"],ga={key:1,class:"textContent"};function ba(e,t,r,u,l,i){return i.computedValue?(_(),P("div",{key:0,class:ge(["text",{highlight:r.highlight}])},[g("div",ha,z(r.label),1),r.link?(_(),P("a",{key:0,href:i.computedValue,target:"_blank"},[J(z(i.computedValue)+" ",1),o(le,{size:"small"},{default:B(()=>[J(z(l.mdiOpenInNew),1)]),_:1})],8,pa)):(_(),P("div",ga,z(i.computedValue),1))],2)):L("",!0)}const Ee=j(fa,[["render",ba],["__scopeId","data-v-48a2f357"]]);var se={},_a={get exports(){return se},set exports(e){se=e}};(function(e,t){(function(){var r=this,u=r.humanize,l={};e.exports&&(t=e.exports=l),t.humanize=l,l.noConflict=function(){return r.humanize=u,this},l.pad=function(a,s,n,v){if(a+="",n?n.length>1&&(n=n.charAt(0)):n=" ",v=v===void 0?"left":"right",v==="right")for(;a.length<s;)a=a+n;else for(;a.length<s;)a=n+a;return a},l.time=function(){return new Date().getTime()/1e3};var i=[0,0,31,59,90,120,151,181,212,243,273,304,334],f=[0,0,31,60,91,121,152,182,213,244,274,305,335];l.date=function(a,s){var n=s===void 0?new Date:s instanceof Date?new Date(s):new Date(s*1e3),v=/\\?([a-z])/gi,p=function(m,b){return c[m]?c[m]():b},h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y=["January","February","March","April","May","June","July","August","September","October","November","December"],c={d:function(){return l.pad(c.j(),2,"0")},D:function(){return c.l().slice(0,3)},j:function(){return n.getDate()},l:function(){return h[c.w()]},N:function(){return c.w()||7},S:function(){var m=c.j();return m>4&&m<21?"th":{1:"st",2:"nd",3:"rd"}[m%10]||"th"},w:function(){return n.getDay()},z:function(){return(c.L()?f[c.n()]:i[c.n()])+c.j()-1},W:function(){var m=c.z()-c.N()+1.5;return l.pad(1+Math.floor(Math.abs(m)/7)+(m%7>3.5?1:0),2,"0")},F:function(){return y[n.getMonth()]},m:function(){return l.pad(c.n(),2,"0")},M:function(){return c.F().slice(0,3)},n:function(){return n.getMonth()+1},t:function(){return new Date(c.Y(),c.n(),0).getDate()},L:function(){return new Date(c.Y(),1,29).getMonth()===1?1:0},o:function(){var m=c.n(),b=c.W();return c.Y()+(m===12&&b<9?-1:m===1&&b>9)},Y:function(){return n.getFullYear()},y:function(){return String(c.Y()).slice(-2)},a:function(){return n.getHours()>11?"pm":"am"},A:function(){return c.a().toUpperCase()},B:function(){var m=n.getTime()/1e3,b=m%86400+3600;b<0&&(b+=86400);var w=b/86.4%1e3;return m<0?Math.ceil(w):Math.floor(w)},g:function(){return c.G()%12||12},G:function(){return n.getHours()},h:function(){return l.pad(c.g(),2,"0")},H:function(){return l.pad(c.G(),2,"0")},i:function(){return l.pad(n.getMinutes(),2,"0")},s:function(){return l.pad(n.getSeconds(),2,"0")},u:function(){return l.pad(n.getMilliseconds()*1e3,6,"0")},O:function(){var m=n.getTimezoneOffset(),b=Math.abs(m);return(m>0?"-":"+")+l.pad(Math.floor(b/60)*100+b%60,4,"0")},P:function(){var m=c.O();return m.substr(0,3)+":"+m.substr(3,2)},Z:function(){return-n.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(v,p)},r:function(){return"D, d M Y H:i:s O".replace(v,p)},U:function(){return n.getTime()/1e3||0}};return a.replace(v,p)},l.numberFormat=function(a,s,n,v){s=isNaN(s)?2:Math.abs(s),n=n===void 0?".":n,v=v===void 0?",":v;var p=a<0?"-":"";a=Math.abs(+a||0);var h=parseInt(a.toFixed(s),10)+"",y=h.length>3?h.length%3:0;return p+(y?h.substr(0,y)+v:"")+h.substr(y).replace(/(\d{3})(?=\d)/g,"$1"+v)+(s?n+Math.abs(a-h).toFixed(s).slice(2):"")},l.naturalDay=function(a,s){a=a===void 0?l.time():a,s=s===void 0?"Y-m-d":s;var n=86400,v=new Date,p=new Date(v.getFullYear(),v.getMonth(),v.getDate()).getTime()/1e3;return a<p&&a>=p-n?"yesterday":a>=p&&a<p+n?"today":a>=p+n&&a<p+2*n?"tomorrow":l.date(s,a)},l.relativeTime=function(a){a=a===void 0?l.time():a;var s=l.time(),n=s-a;if(n<2&&n>-2)return(n>=0?"just ":"")+"now";if(n<60&&n>-60)return n>=0?Math.floor(n)+" seconds ago":"in "+Math.floor(-n)+" seconds";if(n<120&&n>-120)return n>=0?"about a minute ago":"in about a minute";if(n<3600&&n>-3600)return n>=0?Math.floor(n/60)+" minutes ago":"in "+Math.floor(-n/60)+" minutes";if(n<7200&&n>-7200)return n>=0?"about an hour ago":"in about an hour";if(n<86400&&n>-86400)return n>=0?Math.floor(n/3600)+" hours ago":"in "+Math.floor(-n/3600)+" hours";var v=2*86400;if(n<v&&n>-v)return n>=0?"1 day ago":"in 1 day";var p=29*86400;if(n<p&&n>-p)return n>=0?Math.floor(n/86400)+" days ago":"in "+Math.floor(-n/86400)+" days";var h=60*86400;if(n<h&&n>-h)return n>=0?"about a month ago":"in about a month";var y=parseInt(l.date("Y",s),10),c=parseInt(l.date("Y",a),10),m=y*12+parseInt(l.date("n",s),10),b=c*12+parseInt(l.date("n",a),10),w=m-b;if(w<12&&w>-12)return w>=0?w+" months ago":"in "+-w+" months";var I=y-c;return I<2&&I>-2?I>=0?"a year ago":"in a year":I>=0?I+" years ago":"in "+-I+" years"},l.ordinal=function(a){a=parseInt(a,10),a=isNaN(a)?0:a;var s=a<0?"-":"";a=Math.abs(a);var n=a%100;return s+a+(n>4&&n<21?"th":{1:"st",2:"nd",3:"rd"}[a%10]||"th")},l.filesize=function(a,s,n,v,p,h){return s=s===void 0?1024:s,a<=0?"0 bytes":(a<s&&n===void 0&&(n=0),h===void 0&&(h=" "),l.intword(a,["bytes","KB","MB","GB","TB","PB"],s,n,v,p,h))},l.intword=function(a,s,n,v,p,h,y){var c,m;s=s||["","K","M","B","T"],m=s.length-1,n=n||1e3,v=isNaN(v)?2:Math.abs(v),p=p||".",h=h||",",y=y||"";for(var b=0;b<s.length;b++)if(a<Math.pow(n,b+1)){m=b;break}c=a/Math.pow(n,m);var w=s[m]?y+s[m]:"";return l.numberFormat(c,v,p,h)+w},l.linebreaks=function(a){return a=a.replace(/^([\n|\r]*)/,""),a=a.replace(/([\n|\r]*)$/,""),a=a.replace(/(\r\n|\n|\r)/g,`
`),a=a.replace(/(\n{2,})/g,"</p><p>"),a=a.replace(/\n/g,"<br />"),"<p>"+a+"</p>"},l.nl2br=function(a){return a.replace(/(\r\n|\n|\r)/g,"<br />")},l.truncatechars=function(a,s){return a.length<=s?a:a.substr(0,s)+"…"},l.truncatewords=function(a,s){var n=a.split(" ");return n.length<s?a:n.slice(0,s).join(" ")+"…"}}).call(yt)})(_a,se);const me=se,ya=e=>{const t=ue();return be.get(`c/${e}`,{params:t})},ka=()=>{const e=ue();return be.get("c/settings",{params:e})},Sa=e=>be.put("c/settings",e),Ca=e=>{const t=ie(e),r=ue().ts;return`${t}/download.cbz?ts=${r}`},vn=({pk:e,page:t})=>{const r=ie(e),u=ue().ts;return`${r}/${t}/page.jpg?ts=${u}`},mn={getReaderBasePath:ie,getReaderInfo:ya,getReaderSettings:ka,setReaderSettings:Sa};const wa={name:"MetadataCreditsTable",props:{value:{type:Array,default:void 0}},data(){return{}},computed:{sortedCredits:function(){return this.value?[...this.value].sort(this.creditsCompare):[]},...ee(te,{filteredCreators(e){return e.settings.filters.creators}})},methods:{roleName:function(e){return e==="CoverArtist"?"Cover Artist":e},creditSortable:function(e){const t=e.person.name.split(" ");let r=[];return t&&(r.push(t.slice(-1)),t.length>1&&r.push(t.slice(0,-1))),r.push(e.role.name),r.join(" ")},creditsCompare:function(e,t){const r=this.creditSortable(e),u=this.creditSortable(t);return r<u?-1:r>u?1:0},isFilteredCreator(e){return this.filteredCreators&&this.filteredCreators.includes(e)}}},Ae=e=>(Ve("data-v-0552ad41"),e=e(),Re(),e),Ta=Ae(()=>g("h2",null,"Credits",-1)),Ma={class:"highlight-table"},Na=Ae(()=>g("thead",null,[g("tr",null,[g("th",{class:"text-left"},"Role"),g("th",{class:"text-left"},"Creator")])],-1)),Ia={class:"highlight"};function Va(e,t,r,u,l,i){return i.sortedCredits&&i.sortedCredits.length>0?(_(),$(kt,{key:0,id:"creditsTable"},{default:B(()=>[Ta,g("table",Ma,[Na,g("tbody",null,[(_(!0),P(pe,null,oe(i.sortedCredits,f=>(_(),P("tr",{key:f.pk},[g("td",null,z(i.roleName(f.role.name)),1),g("td",{class:ge({filteredOn:i.isFilteredCreator(f.person.pk)})},[g("span",Ia,z(f.person.name),1)],2)]))),128))])])]),_:1})):L("",!0)}const Ra=j(wa,[["render",Va],["__scopeId","data-v-0552ad41"]]),Fa=({pk:e,page:t,readLtr:r,pageCount:u})=>{if(u){if(t)t=Number(t);else if(r)t=0;else{const l=Number(u)-1;t=Math.max(l,0)}return{name:"reader",params:{pk:e,page:t}}}},Te=St("metadata",{state:()=>({md:void 0}),actions:{async loadMetadata({group:e,pk:t}){const r=te();await Ct.getMetadata({group:e,pk:t},r.settings).then(u=>(this.md=u.data,!0)).catch(u=>{console.error(u),this.clearMetadata()})},clearMetadata(){this.md=void 0}}});const Ba=1160,$a=.05,Pa=250,La={comic:"Comic Archive",pdf:"PDF"},Da={name:"MetadataButton",components:{BookCover:De,CloseButton:Fe,MetadataCreditsTable:Ra,MetadataTags:ze,MetadataText:Ee,PlaceholderLoading:Le},props:{group:{type:String,required:!0},pk:{type:Number,required:!0},children:{type:Number,default:1}},data(){return{mdiDownload:wt,mdiTagOutline:Tt,dialog:!1,progress:0}},computed:{...Mt(Nt,["isUserAdmin"]),...ee(Te,{md:e=>e.md,downloadFileName:e=>{const t=e.md;return e.md.path?t.path.split("/").at(-1):Xt({seriesName:t.series.name,volumeName:t.volume.name,issue:t.issue,issueSuffix:t.issueSuffix})+".cbz"}}),...ee(te,{q:e=>e.settings.q}),downloadURL:function(){return Ca(this.pk)},isReadButtonShown:function(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled:function(){return this.$route.name==="browser"&&Boolean(this.readerRoute)},readButtonIcon:function(){return this.isReadButtonEnabled?It:Vt},readerRoute:function(){return Fa(this.md)},formattedIssue:function(){if(!((this.md.issue===null||this.md.issue===void 0)&&!this.md.issueSuffix))return Be({issue:this.md.issue,issueSuffix:this.md.issueSuffix})},ltrText:function(){return this.md.readLtr?"Left to Right":"Right to Left"},pages:function(){let e="";if(this.md.page){const r=me.numberFormat(this.md.page,0);e+=`Read ${r} of `}const t=me.numberFormat(this.md.pageCount,0);return e+=`${t} pages`,this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size:function(){return me.filesize(this.md.size)},fileFormat:function(){return La[this.md.fileFormat]||this.md.fileFormat}},watch:{dialog:function(e){e?this.dialogOpened():this.clearMetadata()}},mounted(){window.addEventListener("keyup",this._keyListener)},unmounted(){window.removeEventListener("keyup",this._keyListener)},methods:{...we(Te,["clearMetadata","loadMetadata"]),...we(Rt,["downloadIOSPWAFix"]),dialogOpened:function(){this.loadMetadata({group:this.group,pk:this.pk}),this.startProgress()},startProgress:function(){this.startTime=Date.now(),this.estimatedMS=Math.max($a,this.children/Ba)*1e3,this.updateProgress()},updateProgress:function(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Pa)},formatDateTime:function(e){const t=new Date(e);return Ft.format(t).replace(",","")},download(){this.downloadIOSPWAFix(this.downloadURL,this.downloadFileName)},_keyListener(e){e.stopImmediatePropagation(),e.key==="Escape"&&(this.dialog=!1)}}},za=e=>(Ve("data-v-fdc382c4"),e=e(),Re(),e),Ea={key:0,id:"metadataContainer"},Aa={id:"metadataHeader"},Oa={id:"metadataBookCoverWrapper"},xa={class:"headerHalfRow"},ja={class:"headerQuarterRow"},Ua={class:"mdSection"},qa={key:0,class:"inlineRow"},Ya={id:"metadataBody"},Ga={class:"mdSection"},Ha={class:"thirdRow"},Wa={class:"mdSection"},Ka={class:"quarterRow"},Ja={class:"lastSmallRow"},Xa={class:"halfRow mdSection"},Qa={class:"mdSection"},Za={class:"mdSection"},en={class:"mdSection"},tn={class:"mdSection"},an={id:"footerLinks"},nn={id:"bottomRightButtons"},rn={key:1,id:"placeholderContainer"},ln=za(()=>g("div",{id:"placeholderTitle"},"Tags Loading",-1));function sn(e,t,r,u,l,i){const f=Fe,a=Ee,s=De,n=ze,v=Lt("MetadataCreditsTable"),p=Le;return _(),$(Pt,{modelValue:l.dialog,"onUpdate:modelValue":t[4]||(t[4]=h=>l.dialog=h),fullscreen:"",transition:"dialog-bottom-transition"},{activator:B(({props:h})=>[o(re,X({"aria-label":"tags",class:"tagButton cardControlButton",icon:"",title:"Tags",variant:"text"},h,{onClick:t[0]||(t[0]=Bt(()=>{},["prevent"]))}),{default:B(()=>[o(le,null,{default:B(()=>[J(z(l.mdiTagOutline),1)]),_:1})]),_:2},1040)]),default:B(()=>[e.md?(_(),P("div",Ea,[g("header",Aa,[o(f,{class:"closeButton",title:"Close Metadata (esc)",size:"x-large",onClick:t[1]||(t[1]=h=>l.dialog=!1)}),e.q?(_(),$(a,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):L("",!0),g("div",Oa,[o(s,{id:"bookCover","cover-pk":e.md.coverPk,group:r.group,"child-count":e.md.childCount,finished:e.md.finished},null,8,["cover-pk","group","child-count","finished"]),o($t,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])]),g("div",xa,[o(a,{id:"publisher",value:e.md.publisher,label:"Publisher",highlight:e.md.group==="p"},null,8,["value","highlight"]),o(a,{id:"imprint",value:e.md.imprint,label:"Imprint",highlight:e.md.group==="i"},null,8,["value","highlight"])]),o(a,{id:"series",value:e.md.series,label:"Series",highlight:e.md.group==="s"},null,8,["value","highlight"]),g("div",ja,[o(a,{id:"volume",value:e.md.volume,label:"Volume",highlight:e.md.group==="v"},null,8,["value","highlight"]),o(a,{value:e.md.volumeCount,label:"Volume Count"},null,8,["value"]),o(a,{id:"issue",value:i.formattedIssue,label:"Issue",highlight:e.md.group==="c"},null,8,["value","highlight"]),o(a,{value:e.md.issueCount,label:"Issue Count"},null,8,["value"])]),g("section",Ua,[o(a,{value:e.md.name,label:"Title"},null,8,["value"]),e.md.year||e.md.month||e.md.day?(_(),P("div",qa,[o(a,{value:e.md.year,label:"Year",class:"datePicker",type:"number"},null,8,["value"]),o(a,{value:e.md.month,label:"Month",class:"datePicker"},null,8,["value"]),o(a,{value:e.md.day,label:"Day",class:"datePicker"},null,8,["value"])])):L("",!0),o(a,{value:e.md.format,label:"Format"},null,8,["value"])])]),g("div",Ya,[g("section",Ga,[g("div",Ha,[o(a,{value:i.pages,label:"Pages"},null,8,["value"]),o(a,{value:e.md.finished,label:"Finished"},null,8,["value"]),o(a,{value:i.ltrText,label:"Reading Direction"},null,8,["value"])])]),g("section",Wa,[g("div",Ka,[e.md.createdAt?(_(),$(a,{key:0,value:i.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):L("",!0),e.md.updatedAt?(_(),$(a,{key:1,value:i.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):L("",!0),o(a,{value:i.size,label:"Size"},null,8,["value"]),o(a,{value:i.fileFormat,label:"File Type"},null,8,["value"])]),g("div",Ja,[o(a,{value:e.md.path,label:"Path"},null,8,["value"])])]),g("section",Xa,[o(a,{value:e.md.country,label:"Country"},null,8,["value"]),o(a,{value:e.md.language,label:"Language"},null,8,["value"])]),g("section",Qa,[o(a,{value:e.md.communityRating,label:"Community Rating"},null,8,["value"]),o(a,{value:e.md.criticalRating,label:"Critical Rating"},null,8,["value"]),o(a,{value:e.md.ageRating,label:"Age Rating"},null,8,["value"])]),g("section",Za,[o(n,{values:e.md.genres,label:"Genres"},null,8,["values"]),o(n,{values:e.md.tags,label:"Tags"},null,8,["values"]),o(n,{values:e.md.teams,label:"Teams"},null,8,["values"]),o(n,{values:e.md.characters,label:"Characters"},null,8,["values"]),o(n,{values:e.md.locations,label:"Locations"},null,8,["values"]),o(n,{values:e.md.storyArcs,label:"Story Arcs"},null,8,["values"]),o(n,{values:e.md.seriesGroups,label:"Series Groups"},null,8,["values"])]),g("section",en,[o(a,{value:e.md.web,label:"Web Link",link:!0},null,8,["value"]),o(a,{value:e.md.summary,label:"Summary"},null,8,["value"]),o(a,{value:e.md.comments,label:"Comments"},null,8,["value"]),o(a,{value:e.md.notes,label:"Notes"},null,8,["value"]),o(a,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])]),g("section",tn,[o(v,{value:e.md.credits},null,8,["value"])])]),g("footer",an,[r.group==="c"?(_(),$(re,{key:0,id:"downloadButton",title:"Download Comic Archive",onClick:i.download},{default:B(()=>[r.group==="c"?(_(),$(le,{key:0},{default:B(()=>[J(z(l.mdiDownload),1)]),_:1})):L("",!0),J(" Download ")]),_:1},8,["onClick"])):L("",!0),i.isReadButtonShown?(_(),$(re,{key:1,to:i.readerRoute,title:"Read Comic",disabled:!i.isReadButtonEnabled},{default:B(()=>[o(le,null,{default:B(()=>[J(z(i.readButtonIcon),1)]),_:1}),J(" Read ")]),_:1},8,["to","disabled"])):L("",!0),g("span",nn,[o(f,{class:"closeButton",title:"Close Metadata (esc)",size:"x-large",onClick:t[2]||(t[2]=h=>l.dialog=!1)})])])])):(_(),P("div",rn,[o(f,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[3]||(t[3]=h=>l.dialog=!1)}),ln,o(p,{"model-value":l.progress,indeterminate:l.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const fn=j(Da,[["render",sn],["__scopeId","data-v-fdc382c4"]]);export{mn as A,Le as P,cn as _,dn as a,un as b,fn as c,Jt as d,De as e,Kt as f,Xt as g,me as h,Fa as i,vn as j,Ca as k,aa as t};
