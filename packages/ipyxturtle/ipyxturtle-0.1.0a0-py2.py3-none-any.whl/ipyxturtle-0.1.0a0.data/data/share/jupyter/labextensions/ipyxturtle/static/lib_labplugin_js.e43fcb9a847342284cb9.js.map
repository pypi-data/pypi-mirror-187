{"version":3,"sources":["webpack://ipyxturtle/./lib/index.js","webpack://ipyxturtle/./lib/ipyxturtle.js","webpack://ipyxturtle/./lib/labplugin.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA,kFAA2C;AAC3C,6FAA8D;;;;;;;;;;;;;;;;;;;;;ACFpB;AACO;;AAE1C,0BAA0B,iEAAsB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,yBAAyB,gEAAqB;AACrD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,oDAAe;;AAEzC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,qBAAqB;AACrB,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kCAAkC,yBAAyB;AAC3D;AACA;;AAEA;AACA,kCAAkC,yBAAyB;AAC3D;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;ACzGA,aAAa,mBAAO,CAAC,+BAAS;AAC9B,WAAW,mBAAO,CAAC,oFAAuB;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,GAAG;AACH;AACA","file":"lib_labplugin_js.e43fcb9a847342284cb9.js","sourcesContent":["// Export widget models and views, and the npm package version number.\nmodule.exports = require('./ipyxturtle.js');\nmodule.exports['version'] = require('../package.json').version;\n","import { TurtleComponent } from 'xturtle';\nimport * as widgets from '@jupyter-widgets/base';\n\nexport class CanvasModel extends widgets.DOMWidgetModel {\n    defaults() {\n        return {\n            ...super.defaults(),\n            _model_name: 'CanvasModel',\n            _view_name: 'CanvasView',\n            _model_module: 'ipyxturtle',\n            _view_module: 'ipyxturtle',\n            _model_module_version: '0.1.0',\n            _view_module_version: '0.1.0'\n        }\n    }\n}\n\nexport class CanvasView extends widgets.DOMWidgetView {\n    render() {\n        this.turtles = {};\n        this.create_canvas();\n\n        this.model.on('change:command', this.execute, this);\n        this.model.on('change:last_turtle', this.create_turtle, this);\n    }\n\n    create_turtle() {\n        const turtle = this.model.get('last_turtle');\n\n        if (Number.isInteger(turtle.id)) {\n            this.turtles[turtle.id] = this.canvas.createTurtle();\n        }\n    }\n\n    create_canvas() {\n        const backgroundCanvas = document.createElement('canvas');\n        this.canvas = new TurtleComponent();\n\n        this.canvas.width = this.model.get('width');\n        this.canvas.height = this.model.get('height');\n\n        backgroundCanvas.id = 'bgCanvas';\n        backgroundCanvas.setAttribute('width', this.canvas.width);\n        backgroundCanvas.setAttribute('height', this.canvas.height);\n\n        this.canvas.canvasStyle = this.model.get('canvas_style');\n        this.canvas.spriteScale = this.model.get('sprite_scale');\n        this.canvas.initializeCanvas(this.el);\n\n        this.el.appendChild(backgroundCanvas);\n\n        this.el.style.cssText = `\n            width: ${this.canvas.width};\n            height: ${this.canvas.height};\n            z-index: 999;\n            background-color: white;\n            position: fixed;\n            border-color: grey;\n            border-width: 1px;\n            border: 1px solid grey;\n            right: 0;\n            bottom: 0;\n        `\n        document.body.prepend(this.el);\n\n        this.set_canvas();\n    }\n\n    set_canvas() {\n        this.model.set('canvas', { 'element': this.canvas });\n        this.model.save_changes();\n    }\n\n    set_turtle() {\n        this.model.set('turtle', { 'element': this.turtle });\n        this.model.save_changes();\n    }\n\n    get_canvas() {\n        let canvas = this.model.get('canvas');\n\n        if (canvas) return canvas.element;\n    }\n\n    get_turtle() {\n        let turtle = this.model.get('turtle');\n\n        if (turtle) return turtle.element;\n    }\n\n    execute() {\n        this.command = this.model.get('command');\n\n        if (this.command.function_name) {\n            this.run();\n            this.command = {};\n        }\n    }\n\n    run() {\n        let turtle_id = this.command.turtle_id;\n        let turtle = this.turtles[turtle_id];\n\n        if (turtle) turtle[this.command['function_name']](...this.command['args']);\n    }\n}\n","var plugin = require('./index');\nvar base = require('@jupyter-widgets/base');\n\nmodule.exports = {\n  id: 'ipyxturtle:plugin',\n  requires: [base.IJupyterWidgetRegistry],\n  activate: function(app, widgets) {\n      widgets.registerWidget({\n          name: 'ipyxturtle',\n          version: plugin.version,\n          exports: plugin\n      });\n  },\n  autoStart: true\n};\n\n"],"sourceRoot":""}