{"version":3,"sources":["StreamlitPlotlyEventsComponent.tsx","index.tsx"],"names":["StreamlitPlotlyEventsComponent","render","plot_obj","JSON","parse","props","args","override_height","override_width","click_event","select_event","hover_event","Streamlit","setFrameHeight","data","layout","config","frames","onClick","plotlyEventHandler","onSelected","onHover","style","width","height","className","return_fields","clickedPoints","points","forEach","arrayItem","clickedPoint","x","y","pointNumber","pointIndex","curveNumber","customdata","push","setComponentValue","stringify","StreamlitComponentBase","withStreamlitConnection","ReactDOM","StrictMode","document","getElementById"],"mappings":"iRAQMA,EAA8B,iKAmDjC,OAnDiC,oCAC3BC,OAAS,WAEd,IAAMC,EAAWC,KAAKC,MAAM,EAAKC,MAAMC,KAAe,UAChDC,EAAkB,EAAKF,MAAMC,KAAsB,gBACnDE,EAAiB,EAAKH,MAAMC,KAAqB,eAGjDG,EAAc,EAAKJ,MAAMC,KAAkB,YAC3CI,EAAe,EAAKL,MAAMC,KAAmB,aAC7CK,EAAc,EAAKN,MAAMC,KAAkB,YAIjD,OADAM,IAAUC,eAAeN,GAEvB,kBAAC,IAAI,CACHO,KAAMZ,EAASY,KACfC,OAAQb,EAASa,OACjBC,OAAQd,EAASc,OACjBC,OAAQf,EAASe,OACjBC,QAAST,EAAc,EAAKU,mBAAqB,aACjDC,WAAYV,EAAe,EAAKS,mBAAqB,aACrDE,QAASV,EAAc,EAAKQ,mBAAqB,aACjDG,MAAO,CAACC,MAAOf,EAAgBgB,OAAQjB,GACvCkB,UAAU,mBAGf,EAGON,mBAAqB,SAACL,GAC5B,IAAMY,EAAgB,EAAKrB,MAAMC,KAAoB,cAGjDqB,EAA4B,GAChCb,EAAKc,OAAOC,SAAQ,SAAUC,GAC5B,IAAIC,EAAoB,GACxBA,EAAaC,EAAIF,EAAUE,EAC3BD,EAAaE,EAAIH,EAAUG,EAC3BF,EAAaG,YAAcJ,EAAUI,YACrCH,EAAaI,WAAaL,EAAUK,WACpCJ,EAAaK,YAAcN,EAAUM,YACjCV,IACFK,EAAaM,WAAaP,EAAUO,YAGtCV,EAAcW,KAAKP,MAIrBnB,IAAU2B,kBAAkBpC,KAAKqC,UAAUb,KAC5C,wBAnDiC,CAASc,KAsD9BC,cAAwB1C,GC1DvC2C,IAAS1C,OACP,kBAAC,IAAM2C,WAAU,KACf,kBAAC,EAA8B,OAEjCC,SAASC,eAAe,W","file":"static/js/main.2f5c6e5d.chunk.js","sourcesContent":["import {\n  Streamlit,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ReactNode } from \"react\"\nimport Plot from 'react-plotly.js';\n\nclass StreamlitPlotlyEventsComponent extends StreamlitComponentBase {\n  public render = (): ReactNode => {\n    // Pull Plotly object from args and parse\n    const plot_obj = JSON.parse(this.props.args[\"plot_obj\"]);\n    const override_height = this.props.args[\"override_height\"];\n    const override_width = this.props.args[\"override_width\"];\n\n    // Event booleans\n    const click_event = this.props.args[\"click_event\"];\n    const select_event = this.props.args[\"select_event\"];\n    const hover_event = this.props.args[\"hover_event\"];\n    \n\n    Streamlit.setFrameHeight(override_height);\n    return (\n      <Plot\n        data={plot_obj.data}\n        layout={plot_obj.layout}\n        config={plot_obj.config}\n        frames={plot_obj.frames}\n        onClick={click_event ? this.plotlyEventHandler : function(){}}\n        onSelected={select_event ? this.plotlyEventHandler : function(){}}\n        onHover={hover_event ? this.plotlyEventHandler : function(){}}\n        style={{width: override_width, height: override_height}}\n        className=\"stPlotlyChart\"\n      />\n    )\n  }\n\n  /** Click handler for plot. */\n  private plotlyEventHandler = (data: any) => {\n    const return_fields = this.props.args[\"return_fields\"];\n    \n    // Build array of points to return\n    var clickedPoints: Array<any> = [];\n    data.points.forEach(function (arrayItem: any) {\n      let clickedPoint: any = {};\n      clickedPoint.x = arrayItem.x;\n      clickedPoint.y = arrayItem.y;\n      clickedPoint.pointNumber = arrayItem.pointNumber;\n      clickedPoint.pointIndex = arrayItem.pointIndex;\n      clickedPoint.curveNumber = arrayItem.curveNumber;\n      if (return_fields){\n        clickedPoint.customdata = arrayItem.customdata;\n      }\n\n      clickedPoints.push(clickedPoint);\n    });\n\n    // Return array as JSON to Streamlit\n    Streamlit.setComponentValue(JSON.stringify(clickedPoints))\n  }\n}\n\nexport default withStreamlitConnection(StreamlitPlotlyEventsComponent)\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport StreamlitPlotlyEventsComponent from \"./StreamlitPlotlyEventsComponent\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <StreamlitPlotlyEventsComponent />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}