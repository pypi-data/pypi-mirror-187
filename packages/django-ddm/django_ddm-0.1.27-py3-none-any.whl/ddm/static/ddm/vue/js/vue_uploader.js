(function(){"use strict";var e={1559:function(e,t,n){var r=n(821);const a={class:"row"},o={class:"col"},s={class:"modal custom-modal",id:"overlayModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true"},i={class:"modal-dialog modal-dialog-centered custom-modal-container"},l={class:"modal-content fs-1 text-center custom-modal-content"},c={class:"p-3 modal-message"},d=(0,r._)("div",{class:"dot-floating"},null,-1);function u(e,t,n,u,p,g){const m=(0,r.up)("FileUploader");return(0,r.wg)(),(0,r.iD)(r.HY,null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(p.parsedUploadConfig,((e,t)=>((0,r.wg)(),(0,r.j4)(m,{key:t,"component-id":t,"expects-zip":"zip"===e.ul_type,name:e.name,blueprints:e.blueprints,instructions:e.instructions,"exception-url":this.exceptionUrl,onChangedData:g.updatePostData},null,8,["component-id","expects-zip","name","blueprints","instructions","exception-url","onChangedData"])))),128)),(0,r._)("div",a,[(0,r._)("div",o,[(0,r._)("button",{class:"flow-btn",type:"button","data-bs-toggle":"modal","data-bs-target":"#overlayModal",onClick:t[0]||(t[0]=(...e)=>g.zipData&&g.zipData(...e))},(0,r.zw)(e.$t("next-btn-label"))+"  ›",1)])]),(0,r._)("div",s,[(0,r._)("div",i,[(0,r._)("div",l,[(0,r._)("div",c,(0,r.zw)(e.$t("data-submit-wait")),1),d])])])],64)}const p=e=>((0,r.dD)("data-v-e1954b44"),e=e(),(0,r.Cn)(),e),g={class:"mb-5"},m={class:"float-left bg-dark text-white pt-2 ps-2 pb-1 rounded-top"},f={class:"col-sm"},h=["id"],b={class:"accordion-item"},w=["id"],_=["data-bs-target","aria-controls"],y=["id","data-bs-parent"],z={class:"accordion-body"},D={key:1},v={class:"accordion-body border"},x={class:"row align-items-center"},S=p((()=>(0,r._)("div",{class:"col-auto ul-status-icon"},[(0,r._)("i",{class:"bi bi-upload"})],-1))),k={class:"col ul-status-description"},$={key:0},E={key:1},C={class:"col ul-status-message"},U={class:"select-file-btn"},T=["name"],I=p((()=>(0,r._)("div",{class:"col-auto ul-status-icon"},[(0,r._)("div",{class:"clearfix"},[(0,r._)("p",null,[(0,r._)("span",{class:"spinner-border float-right me-3",role:"status"},[(0,r._)("span",{class:"sr-only"})])])])],-1))),O={class:"col ul-status-description"},j=p((()=>(0,r._)("div",{class:"col ul-status-message"},null,-1))),H=p((()=>(0,r._)("div",{class:"col-auto ul-status-icon"},[(0,r._)("i",{class:"bi bi-file-check"})],-1))),A={class:"col ul-status-description"},Y={class:"text-success fw-bold"},P=p((()=>(0,r._)("div",{class:"col ul-status-message"},null,-1))),Z=p((()=>(0,r._)("div",{class:"col-auto ul-status-icon"},[(0,r._)("i",{class:"bi bi-exclamation-diamond text-warning"})],-1))),F={class:"col-auto ul-status-description"},L={class:"fw-bold"},N={class:"col ul-status-message"},M=p((()=>(0,r._)("div",{class:"col-auto ul-status-icon"},[(0,r._)("i",{class:"bi bi-exclamation-diamond text-danger"})],-1))),q={class:"col-auto ul-status-description"},K={class:"fw-bold"},B={class:"col ul-status-message"},J={class:"text-danger"},R={class:"ul-feedback-container row border-bottom mt-3"},V={class:"col"},W=p((()=>(0,r._)("div",{class:"col-auto bp-ul-icon"},[(0,r._)("i",{class:"bi bi-file-earmark-fill text-grey"})],-1))),G={class:"col-2 bp-description"},Q={class:"col bp-ul-status"},X=p((()=>(0,r._)("div",{class:"col bp-ul-data"},null,-1))),ee=p((()=>(0,r._)("div",{class:"col bp-ul-consent"},null,-1))),te=p((()=>(0,r._)("div",{class:"col-auto bp-ul-icon"},[(0,r._)("i",{class:"bi bi-file-earmark-check-fill text-success"})],-1))),ne={class:"col-2 bp-description"},re={class:"col bp-ul-status"},ae={class:"col-auto bp-ul-data"},oe=["id","onClick","href","aria-controls"],se=["id"],ie=(0,r.Uk)(),le=p((()=>(0,r._)("i",{class:"bi bi-arrow-bar-down collapse-icon"},null,-1))),ce={class:"col-auto bp-ul-consent"},de=["for"],ue=["id","onUpdate:modelValue"],pe=p((()=>(0,r._)("div",{class:"col-auto bp-ul-icon"},[(0,r._)("i",{class:"bi bi-file-earmark-x-fill text-danger"})],-1))),ge={class:"col-2 bp-description"},me={class:"col bp-ul-status"},fe={key:1},he=p((()=>(0,r._)("div",{class:"col-auto bp-ul-data"},null,-1))),be=p((()=>(0,r._)("div",{class:"col-auto bp-ul-consent"},null,-1))),we=["id"],_e={class:"ul-data-container"},ye=["id"];function ze(e,t,n,a,o,s){const i=(0,r.up)("DonationInstructions");return(0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",m,[(0,r._)("div",f,[(0,r._)("h4",null,"Upload "+(0,r.zw)(n.name),1)])]),(0,r._)("div",{class:"accordion",id:"ul-acc-"+n.componentId},[(0,r._)("div",b,[(0,r._)("h3",{class:"accordion-header",id:"acc-instr-head-"+n.componentId},[(0,r._)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#acc-instr-body-"+n.componentId,"aria-expanded":"true","aria-controls":"acc-instr-body-"+n.componentId},[(0,r._)("b",null,(0,r.zw)(e.$t("instructions")),1)],8,_)],8,w),(0,r._)("div",{id:"acc-instr-body-"+n.componentId,class:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#ul-acc-"+n.componentId},[(0,r._)("div",z,[n.instructions.length?((0,r.wg)(),(0,r.j4)(i,{key:0,instructions:n.instructions,"component-id":n.componentId},null,8,["instructions","component-id"])):((0,r.wg)(),(0,r.iD)("div",D,(0,r.zw)(e.$t("no-instructions-defined"))+".",1))])],8,y)])],8,h),(0,r._)("div",v,[(0,r._)("div",x,["pending"===o.uploadStatus?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[S,(0,r._)("div",k,[o.uploadAttempts?o.uploadAttempts?((0,r.wg)(),(0,r.iD)("p",E,(0,r.zw)(e.$t("upload-different-file"))+":",1)):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",$,(0,r.zw)(e.$t("upload-file"))+":",1))]),(0,r._)("div",C,[(0,r._)("label",U,[(0,r._)("input",{name:"ul-"+n.componentId,type:"file",onChange:t[0]||(t[0]=(...e)=>s.processFile&&s.processFile(...e)),class:"d-none"},null,40,T),(0,r.Uk)(" "+(0,r.zw)(e.$t("choose-file")),1)])])],64)):"processing"===o.uploadStatus?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[I,(0,r._)("div",O,[(0,r._)("p",null,(0,r.zw)(e.$t("file-is-being-uploaded")),1)]),j],64)):"success"===o.uploadStatus?((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[H,(0,r._)("div",A,[(0,r._)("p",Y,(0,r.zw)(e.$t("upload-success")),1),(0,r._)("p",null,[(0,r._)("a",{onClick:t[1]||(t[1]=e=>o.uploadStatus="pending"),class:"upload-other"},(0,r.zw)(e.$t("choose-different-file")),1)])]),P],64)):"partial"===o.uploadStatus?((0,r.wg)(),(0,r.iD)(r.HY,{key:3},[Z,(0,r._)("div",F,[(0,r._)("p",L,(0,r.zw)(e.$t("partial-upload-status")),1),(0,r._)("p",null,[(0,r._)("a",{onClick:t[2]||(t[2]=e=>o.uploadStatus="pending"),class:"upload-other"},(0,r.zw)(e.$t("choose-different-file")),1)])]),(0,r._)("div",N,[(0,r._)("p",null,(0,r.zw)(e.$t("partial-upload-message")),1)])],64)):"failed"===o.uploadStatus?((0,r.wg)(),(0,r.iD)(r.HY,{key:4},[M,(0,r._)("div",q,[(0,r._)("p",K,(0,r.zw)(e.$t("upload-failed")),1),(0,r._)("p",null,[(0,r._)("a",{onClick:t[3]||(t[3]=e=>o.uploadStatus="pending"),class:"upload-other"},(0,r.zw)(e.$t("choose-different-file")),1)])]),(0,r._)("div",B,[(0,r._)("ul",J,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.generalErrors,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e},(0,r.zw)(e),1)))),128))])])],64)):(0,r.kq)("",!0)]),(0,r._)("div",R,[(0,r._)("div",V,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.blueprints,(n=>((0,r.wg)(),(0,r.iD)(r.HY,{key:n},[(0,r._)("div",{class:(0,r.C_)(["ul-status row align-items-center border-top pt-2 pb-2",{"ul-success":"success"===o.blueprintData[n.id.toString()].status,"ul-failed":"failed"===o.blueprintData[n.id.toString()].status}])},["pending"===o.blueprintData[n.id.toString()].status?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[W,(0,r._)("div",G,(0,r.zw)(n.name),1),(0,r._)("div",Q,(0,r.zw)(e.$t("not-yet-extracted")),1),X,ee],64)):(0,r.kq)("",!0),"success"===o.blueprintData[n.id.toString()].status?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[te,(0,r._)("div",ne,(0,r.zw)(n.name),1),(0,r._)("div",re,(0,r.zw)(e.$t("upload-success-short")),1),(0,r._)("div",ae,[(0,r._)("a",{class:"text-orange text-decoration-none",id:"collapse-toggle-"+n.id.toString(),"data-bs-toggle":"collapse",onClick:e=>s.toggleCollapseLabel("collapse-toggle-"+n.id.toString()),href:"#bp-fb-"+n.id.toString(),role:"button","aria-expanded":"false","aria-controls":"bp-fb-"+n.id.toString()},[(0,r._)("span",{id:"collapse-toggle-"+n.id.toString()+"-label"},(0,r.zw)(e.$t("show-extracted-data")),9,se),ie,le],8,oe)]),(0,r._)("div",ce,[(0,r._)("p",null,[(0,r._)("label",{class:"form-check-label",for:"ul-consent-"+n.id.toString()},[(0,r.wy)((0,r._)("input",{class:"form-check-input consent-checkbox",id:"ul-consent-"+n.id.toString(),type:"checkbox",onChange:t[4]||(t[4]=(...e)=>s.emitToParent&&s.emitToParent(...e)),"onUpdate:modelValue":e=>o.blueprintData[n.id.toString()].consent=e},null,40,ue),[[r.e8,o.blueprintData[n.id.toString()].consent]]),(0,r.Uk)(" "+(0,r.zw)(e.$t("submit-agree")),1)],8,de)])])],64)):(0,r.kq)("",!0),"failed"===o.blueprintData[n.id.toString()].status?((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[pe,(0,r._)("div",ge,(0,r.zw)(n.name),1),(0,r._)("div",me,[o.blueprintData[n.id.toString()].errors.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(o.blueprintData[n.id.toString()].errors,(e=>((0,r.wg)(),(0,r.iD)("p",{key:e},(0,r.zw)(e),1)))),128)):((0,r.wg)(),(0,r.iD)("p",fe,(0,r.zw)(e.$t("extraction-failed")),1))]),he,be],64)):(0,r.kq)("",!0)],2),"success"===o.blueprintData[n.id.toString()].status?((0,r.wg)(),(0,r.iD)("div",{key:0,id:"bp-fb-"+n.id.toString(),class:"row bg-white collapse ul-data-collapsible"},[(0,r._)("p",null,(0,r.zw)(e.$t("extracted-data-intro"))+":",1),(0,r._)("div",_e,[(0,r._)("table",{id:"ul-result-"+n.id.toString(),class:"table table-sm"},[(0,r._)("thead",null,[(0,r._)("tr",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.f_extract,(e=>((0,r.wg)(),(0,r.iD)("th",{key:e},(0,r.zw)(e),1)))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.blueprintData[n.id.toString()].extracted_data,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e,(e=>((0,r.wg)(),(0,r.iD)("td",{key:e},(0,r.zw)(e),1)))),128))])))),128))])],8,ye)])],8,we)):(0,r.kq)("",!0)],64)))),128))])])])])}n(6699);var De=n(5733),ve=n.n(De);const xe=e=>((0,r.dD)("data-v-39892445"),e=e(),(0,r.Cn)(),e),Se=["id"],ke={class:"carousel-indicators"},$e=["data-bs-target","data-bs-slide-to","aria-label","aria-current"],Ee={class:"carousel-inner"},Ce=["innerHTML"],Ue=["data-bs-target"],Te=xe((()=>(0,r._)("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1))),Ie=xe((()=>(0,r._)("span",{class:"visually-hidden"},"Previous",-1))),Oe=[Te,Ie],je=["data-bs-target"],He=xe((()=>(0,r._)("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1))),Ae=xe((()=>(0,r._)("span",{class:"visually-hidden"},"Next",-1))),Ye=[He,Ae];function Pe(e,t,n,a,o,s){return(0,r.wg)(),(0,r.iD)("div",{id:"carousel-"+n.componentId,class:"carousel carousel-dark slide","data-bs-interval":"false","data-bs-ride":"carousel"},[(0,r._)("div",ke,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.instructions,((e,t)=>((0,r.wg)(),(0,r.iD)("button",{key:t,type:"button","data-bs-target":"#carousel-"+n.componentId,"data-bs-slide-to":t,"aria-label":"Step "+t,class:(0,r.C_)({active:0===t}),"aria-current":0===t},null,10,$e)))),128))]),(0,r._)("div",Ee,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.instructions,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:(0,r.C_)(["carousel-item",{active:0===t}]),innerHTML:e.text},null,10,Ce)))),128))]),(0,r._)("button",{class:"carousel-control-prev",type:"button","data-bs-target":"#carousel-"+n.componentId,"data-bs-slide":"prev"},Oe,8,Ue),(0,r._)("button",{class:"carousel-control-next",type:"button","data-bs-target":"#carousel-"+n.componentId,"data-bs-slide":"next"},Ye,8,je)],8,Se)}var Ze={name:"DonationInstructions",props:{instructions:Array,componentId:Number},data(){return{}},methods:{}},Fe=n(3744);const Le=(0,Fe.Z)(Ze,[["render",Pe],["__scopeId","data-v-39892445"]]);var Ne=Le,Me=n(9669),qe=n.n(Me),Ke={name:"ProcessFile",components:{DonationInstructions:Ne},props:{expectsZip:Boolean,blueprints:Array,instructions:Array,componentId:Number,name:String,exceptionUrl:String},emits:["changedData"],data(){return{blueprintData:{},uploadStatus:"pending",uploadAttempts:0,generalErrors:[]}},created(){this.blueprints.forEach((e=>{let t=e.id,n={name_uploaded_file:null,consent:!1,extracted_data:[],status:"pending",errors:[]};this.blueprintData[t.toString()]=n})),this.resetErrorLog(),this.emitToParent()},methods:{toggleCollapseLabel(e){let t=document.getElementById(e),n=document.getElementById(e.concat("-label")),r="";"true"===t.getAttribute("aria-expanded")?(r=this.$t("hide-extracted-data"),t.getElementsByTagName("i")[0].classList.add("rotate-down")):(r=this.$t("show-extracted-data"),t.getElementsByTagName("i")[0].classList.remove("rotate-down")),setTimeout((()=>{n.innerHTML=r}),300)},processFile(e){let t=this;t.uploadStatus="processing",t.uploadAttempts+=1,t.resetErrorLog();const n=e.target.files;if(t.expectsZip&&1===n.length)ve().loadAsync(n[0]).then((e=>{t.blueprints.forEach((n=>{let r=new RegExp(n.regex_path),a=!1;e.file(r).forEach((e=>{a=!0,e.async("string").then((e=>t.processContent(e,n))).catch((e=>{qe().post(t.exceptionUrl,{status_code:4199,message:e.message}).catch((e=>console.error(`Could not post error message, ${e}`))),t.recordError(t.$t("error-generic")+e.message,n.id.toString())}))})),a||(qe().post(t.exceptionUrl,{status_code:418,message:t.$t("error-regex-not-matched")}).catch((e=>console.error(`Could not post error message, ${e}`))),t.recordError(t.$t("error-regex-not-matched"),n.id.toString()))}))})).catch((e=>{let n="",r=0;e.message.includes("zip")&&e.message.includes("central")?(n=t.$t("error-not-zip"),r=4101):e.message.includes("Corrupted zip")?(n=t.$t("error-zip-corrupted"),r=4102):e.message.includes("Encrypted zip")?(n=t.$t("error-zip-encrypted"),r=4103):(n=t.$t("error-generic")+e.message,r=4198),qe().post(t.exceptionUrl,{status_code:r,message:e.message}).catch((e=>console.error(`Could not post error message, ${e}`))),t.recordError(n,"general")}));else if(t.expectsZip||1!==n.length)qe().post(t.exceptionUrl,{status_code:4104,message:t.$t("error-multiple-files","en")}).catch((e=>console.error(`Could not post error message, ${e}`))),t.recordError(t.$t("error-multiple-files"),"general");else{"json"===t.blueprints[0].format&&(n[0].name.endsWith(".json")||(qe().post(t.exceptionUrl,{status_code:4105,message:t.$t("error-wrong-file-type","en",{actualType:n[0].name.substr(n[0].name.lastIndexOf(".")),expectedType:".json"})}).catch((e=>console.error(`Could not post error message, ${e}`))),t.recordError(t.$t("error-wrong-file-type",{actualType:n[0].name.substr(n[0].name.lastIndexOf(".")),expectedType:".json"}),t.blueprints[0].id.toString())));let e=new FileReader;e.onload=function(e){let n=e.target.result;try{t.processContent(n,t.blueprints[0])}catch(r){qe().post(t.exceptionUrl,{status_code:4199,message:r.message}).catch((e=>console.error(`Could not post error message, ${e}`))),t.recordError(t.$t("error-generic")+r.message,t.blueprints[0].id.toString())}},e.readAsText(n[0])}setTimeout((()=>{t.updateStatus(),t.emitToParent()}),1e3)},processContent(e,t){let n=this,r=t.id.toString(),a=null,o=[];if("json"===t.format){try{a=JSON.parse(e)}catch(s){qe().post(n.exceptionUrl,{status_code:4106,message:s.message}).catch((e=>console.error(`Could not post error message, ${e}`))),n.recordError(n.$t("error-json-syntax"),n.blueprints[0].id.toString())}if(a){let e=0;a.forEach((n=>{if(t.f_expected.every((e=>Object.keys(n).includes(e)))){for(let e in n)t.f_extract.indexOf(e)<0&&delete n[e];o.push(n)}else e+=1})),e>0&&(qe().post(n.exceptionUrl,{status_code:4201,message:`Expected fields missing in ${e}/${a.length} entries.`}).catch((e=>console.error(`Could not post error message, ${e}`))),n.recordError(n.$t("error-expected-fields-missing"),t.id.toString())),n.blueprintData[r].extracted_data=o}}},emitToParent(){let e=JSON.parse(JSON.stringify(this.blueprintData));Object.keys(e).forEach((t=>{e[t].consent||(e[t].extracted_data=[])})),this.$emit("changedData",e)},resetErrorLog(){this.generalErrors=[];for(let e in this.blueprintData)this.blueprintData[e].errors=[]},recordError(e,t){"general"==t?this.generalErrors.push(e):this.blueprintData[t].errors.push(e)},updateStatus(){let e=0,t=Object.keys(this.blueprintData).length;for(let n in this.blueprintData)this.blueprintData[n].errors.length?(this.blueprintData[n].status="failed",e+=1):this.blueprintData[n].status="success";if(this.generalErrors.length||0!==e)if(!this.generalErrors.length&&e<t)this.uploadStatus="partial";else{this.uploadStatus="failed";for(let e in this.blueprintData)this.blueprintData[e].status="failed"}else this.uploadStatus="success"}}};function Be(e){e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{instructions:e=>{const{normalize:t}=e;return t(["Instructions"])},"no-instructions-defined":e=>{const{normalize:t}=e;return t(["No instructions defined"])},"upload-file":e=>{const{normalize:t}=e;return t(["Upload File"])},"upload-different-file":e=>{const{normalize:t}=e;return t(["Upload a different file"])},"upload-success":e=>{const{normalize:t}=e;return t(["Upload was successful"])},"upload-failed":e=>{const{normalize:t}=e;return t(["Upload failed"])},"choose-different-file":e=>{const{normalize:t}=e;return t(["select a different file"])},"choose-file":e=>{const{normalize:t}=e;return t(["Select file"])},"file-is-being-uploaded":e=>{const{normalize:t}=e;return t(["file is being uploaded"])},"extracted-files":e=>{const{normalize:t}=e;return t(["Extracted files"])},"not-yet-extracted":e=>{const{normalize:t}=e;return t(["not yet extracted"])},"upload-success-short":e=>{const{normalize:t}=e;return t(["Successfully Uploaded"])},"upload-failed-short":e=>{const{normalize:t}=e;return t(["Upload Failed"])},"show-extracted-data":e=>{const{normalize:t}=e;return t(["Show extracted data"])},"hide-extracted-data":e=>{const{normalize:t}=e;return t(["Hide extracted data"])},"submit-agree":e=>{const{normalize:t}=e;return t(["I agree to submit this data"])},"extracted-data-intro":e=>{const{normalize:t}=e;return t(["The following data has been extracted and will be transmitted to the researchers with your consent"])},file:e=>{const{normalize:t}=e;return t(["file"])},"error-multiple-files":e=>{const{normalize:t}=e;return t(["More than one file uploaded, but only one is expected."])},"error-not-zip":e=>{const{normalize:t}=e;return t(["A zip-file is expected but another file type was uploaded."])},"error-generic":e=>{const{normalize:t}=e;return t(["An error occurred: "])},"error-zip-corrupted":e=>{const{normalize:t}=e;return t(["The provided zip file is corrupted. Please download the zip file again from the original source and try again."])},"error-zip-encrypted":e=>{const{normalize:t}=e;return t(["The provided zip file is encrypted. Unfortunately, encrypted files are not supported."])},"error-expected-fields-missing":e=>{const{normalize:t}=e;return t(["Uploaded file does not contain all expected data fields."])},"error-regex-not-matched":e=>{const{normalize:t}=e;return t(["The provided zip container does not contain the matching file."])},"error-json-syntax":e=>{const{normalize:t}=e;return t(["The provided file contains a syntax error."])},"error-wrong-file-type":e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["The provided file is of type '",n(r("actualType")),"' but '",n(r("expectedType")),"' is expected."])},"extraction-failed":e=>{const{normalize:t}=e;return t(["Information could not be extracted from uploaded file"])},"partial-upload-status":e=>{const{normalize:t}=e;return t(["Only partially uploaded"])},"partial-upload-message":e=>{const{normalize:t}=e;return t(["Zip file was successfully uploaded but only parts of the expected information were successfully extracted (see below)"])}},de:{instructions:e=>{const{normalize:t}=e;return t(["Instruktionen"])},"no-instructions-defined":e=>{const{normalize:t}=e;return t(["Es wurden keine Instruktionen definiert"])},"upload-file":e=>{const{normalize:t}=e;return t(["Datei hochladen"])},"upload-different-file":e=>{const{normalize:t}=e;return t(["Andere Datei hochladen"])},"upload-success":e=>{const{normalize:t}=e;return t(["Upload erfolgreich abgeschlossen"])},"upload-failed":e=>{const{normalize:t}=e;return t(["Etwas ging schief"])},"choose-different-file":e=>{const{normalize:t}=e;return t(["eine andere Datei auswählen"])},"choose-file":e=>{const{normalize:t}=e;return t(["Datei auswählen"])},"file-is-being-uploaded":e=>{const{normalize:t}=e;return t(["Datei wird hochgeladen"])},"extracted-files":e=>{const{normalize:t}=e;return t(["Ausgelesene Dateien"])},"not-yet-extracted":e=>{const{normalize:t}=e;return t(["noch nicht ausgelesen"])},"upload-success-short":e=>{const{normalize:t}=e;return t(["erfolgreich hochgeladen"])},"upload-failed-short":e=>{const{normalize:t}=e;return t(["Upload fehlgeschlagen"])},"show-extracted-data":e=>{const{normalize:t}=e;return t(["Ausgelesene Daten ansehen"])},"hide-extracted-data":e=>{const{normalize:t}=e;return t(["Ausgelesene Daten verbergen"])},"submit-agree":e=>{const{normalize:t}=e;return t(["Ich bin damit einverstanden, diese Daten zu übermitteln"])},"extracted-data-intro":e=>{const{normalize:t}=e;return t(["Die folgenden Daten wurden ausgelesen und werden bei Ihrer Zustimmung an die Forschenden übermittelt"])},file:e=>{const{normalize:t}=e;return t(["Datei"])},"error-multiple-files":e=>{const{normalize:t}=e;return t(["Mehr als eine Datei hochgeladen, aber nur eine wird erwartet"])},"error-not-zip":e=>{const{normalize:t}=e;return t(["Es wird eine Zip-Datei erwartet, aber es wurde ein anderer Dateityp hochgeladen."])},"error-generic":e=>{const{normalize:t}=e;return t(["Es ist ein Fehler aufgetreten: "])},"error-zip-corrupted":e=>{const{normalize:t}=e;return t(["Die hochgeladene Zip-Datei scheint beschädigt zu sein. Bitte laden Sie die Zip-Datei erneut von der Originalquelle herunter und versuchen Sie, sie erneut hochzuladen."])},"error-zip-encrypted":e=>{const{normalize:t}=e;return t(["Die hochgeladene Zip-Datei ist password-geschützt. Leider werden verschlüsselte Dateien nicht unterstützt."])},"error-expected-fields-missing":e=>{const{normalize:t}=e;return t(["Die hochgeladene Datei enthält nicht alle erwarteten Datenfelder."])},"error-regex-not-matched":e=>{const{normalize:t}=e;return t(["Die entsprechende Datei ist nicht im hochgeladenen Zip-Container enthalten."])},"error-json-syntax":e=>{const{normalize:t}=e;return t(["Die json-Datei enthält einen Syntaxfehler."])},"error-wrong-file-type":e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Die ausgewählte Datei ist eine '",n(r("actualType")),"'-Datei; es wird aber eine '",n(r("expectedType")),"'-Datei erwartet."])},"extraction-failed":e=>{const{normalize:t}=e;return t(["Es konnten nicht alle erwarteten Dateien ausgelesen werden."])},"partial-upload-status":e=>{const{normalize:t}=e;return t(["Nur teilweise hochgeladen"])},"partial-upload-message":e=>{const{normalize:t}=e;return t(["Der Zip-Container wurde erfolgreich hochgeladen, aber es wurde nur ein Teil der erwarteten Daten erfolgreich extrahiert (siehe unten)"])}}}})}"function"===typeof Be&&Be(Ke);const Je=(0,Fe.Z)(Ke,[["render",ze],["__scopeId","data-v-e1954b44"]]);var Re=Je,Ve={name:"UApp",components:{FileUploader:Re},props:{uploadConfig:String,actionUrl:String,exceptionUrl:String,language:String},data(){return this.$i18n.locale=this.language,{parsedUploadConfig:JSON.parse(this.uploadConfig),postData:{},locale:this.language}},watch:{locale(e){this.$i18n.locale=e}},methods:{updatePostData(e){Object.keys(e).forEach((t=>{this.postData[t]=e[t]}))},zipData(){let e=document.querySelectorAll("input[type=file]");e.forEach((e=>{e.disabled=!0}));let t=new FormData(document.getElementById("uploader-form")),n=new(ve());n.file("ul_data.json",JSON.stringify(this.postData)).generateAsync({type:"blob"}).then((e=>{t.append("post_data",e),fetch(this.actionUrl,{method:"POST",body:t}).then((e=>{console.log(e),e.redirected&&(window.location.href=e.url)})).catch((e=>{console.info(e)}))}))}}};function We(e){e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{"data-submit-wait":e=>{const{normalize:t}=e;return t(["Just a moment, your data donation is being submitted"])},"next-btn-label":e=>{const{normalize:t}=e;return t(["Submit Data"])}},de:{"data-submit-wait":e=>{const{normalize:t}=e;return t(["Einen Moment bitte, Ihre Datenspende wird gerade übermittelt"])},"next-btn-label":e=>{const{normalize:t}=e;return t(["Daten übermitteln"])}}}})}"function"===typeof We&&We(Ve);const Ge=(0,Fe.Z)(Ve,[["render",u]]);var Qe=Ge,Xe=n(2474);const et=new Xe.o({fallbackLocale:"en"}),tt="#uapp",nt=document.querySelector(tt),rt=(0,r.ri)(Qe,{...nt.dataset});rt.use(et),rt.mount(tt)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,o){if(!r){var s=1/0;for(d=0;d<e.length;d++){r=e[d][0],a=e[d][1],o=e[d][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(i=!1,o<s&&(s=o));if(i){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={93:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,s=r[0],i=r[1],l=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(l)var d=l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},r=self["webpackChunkvue_frontend"]=self["webpackChunkvue_frontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(1559)}));r=n.O(r)})();
//# sourceMappingURL=vue_uploader.js.map